<template><div><h1 id="vue" tabindex="-1"><a class="header-anchor" href="#vue" aria-hidden="true">#</a> Vue</h1>
<h2 id="代码片段" tabindex="-1"><a class="header-anchor" href="#代码片段" aria-hidden="true">#</a> 代码片段</h2>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #E06C75">我们在前面练习Vue的过程中</span><span style="color: #ABB2BF">，</span><span style="color: #E06C75">有些代码片段是需要经常写的</span><span style="color: #ABB2BF">。</span></span>
<span class="line"><span style="color: #E06C75">我们再VSCode中我们可以生成一个代码片段</span><span style="color: #ABB2BF">，</span><span style="color: #E06C75">方便我们快速生成</span><span style="color: #ABB2BF">。</span></span>
<span class="line"><span style="color: #E06C75">VSCode中的代码片段有固定的格式</span><span style="color: #ABB2BF">，</span><span style="color: #E06C75">所以我们一般会借助于一个在线工具来完成</span><span style="color: #ABB2BF">。</span></span>
<span class="line"><span style="color: #E06C75">具体的步骤如下</span><span style="color: #ABB2BF">：</span></span>
<span class="line"><span style="color: #E06C75">第一步</span><span style="color: #ABB2BF">，</span><span style="color: #E06C75">复制自己需要生成代码片段的代码</span><span style="color: #ABB2BF">；</span></span>
<span class="line"><span style="color: #E06C75">第二步</span><span style="color: #ABB2BF">，https:</span><span style="color: #7F848E; font-style: italic">//snippet-generator.app/在该网站中生成代码片段；</span></span>
<span class="line"><span style="color: #E06C75">第三步</span><span style="color: #ABB2BF">，</span><span style="color: #E06C75">在VSCode中配置代码片段</span><span style="color: #ABB2BF">；</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="class-数组语法" tabindex="-1"><a class="header-anchor" href="#class-数组语法" aria-hidden="true">#</a> class 数组语法</h2>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:class=&quot;[&#39;abc&#39;,title]&quot;&gt;{{message}}&lt;/h2&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//解析成&lt;h2 :class=&quot;abc change&quot;&gt;{{message}}&lt;/h2&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">data()</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">return</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">message</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;Hello World&quot;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">title</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;change&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="v-bind" tabindex="-1"><a class="header-anchor" href="#v-bind" aria-hidden="true">#</a> v-bind</h2>
<h3 id="绑定属性" tabindex="-1"><a class="header-anchor" href="#绑定属性" aria-hidden="true">#</a> 绑定属性</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:[key]=&quot;value&quot;&gt;{{message}}&lt;/div&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// &lt;div username=&quot;xzy&quot;&gt;Hello World&lt;/div&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">data()</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">return</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">message</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;Hello World&quot;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">key</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;username&quot;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">value</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;xzy&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="绑定对象" tabindex="-1"><a class="header-anchor" href="#绑定对象" aria-hidden="true">#</a> 绑定对象</h3>
<ul>
<li>可用来封装自己的组件</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-bind</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;info&quot;</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{</span><span style="color: #E06C75">message</span><span style="color: #ABB2BF">}</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//&lt;h2 name=&quot;xzy&quot; age=&quot;18&quot; height=&quot;175&quot;&gt;Hello World&lt;/h2&gt;</span></span>
<span class="line"><span style="color: #61AFEF">data</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">message</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;Hello World&quot;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">info</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;xzy&quot;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">18</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E06C75">height</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">175</span></span>
<span class="line"><span style="color: #ABB2BF">        }</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="v-show" tabindex="-1"><a class="header-anchor" href="#v-show" aria-hidden="true">#</a> v-show</h2>
<ul>
<li>元素需要频繁的显示与隐藏时使用</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//v-show应该可以用来做后门</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="v-for" tabindex="-1"><a class="header-anchor" href="#v-for" aria-hidden="true">#</a> v-for</h2>
<ul>
<li>遍历对象</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">ul</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	&lt;</span><span style="color: #E06C75">li</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-for</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;value in info&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:key=&quot;value&quot;&gt;{{value}}&lt;/li&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/ul&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;ul&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #FFFFFF">&lt;li</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-for</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;(value,key) in info&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:key=&quot;value&quot;&gt;{{key</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">+</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&quot; : &quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">+</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">value}}&lt;/li&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/ul&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//xzy</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//18</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//女</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//name : xzy</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//age : 18</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//sex : 女</span></span>
<span class="line"><span style="color: #FFFFFF">data()</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">return</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">message</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;Hello World&quot;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">info</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;xzy&quot;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">18</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E06C75">sex</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;女&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">        }</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="与-template-结合使用" tabindex="-1"><a class="header-anchor" href="#与-template-结合使用" aria-hidden="true">#</a> 与 template 结合使用</h3>
<ul>
<li>不会出现多余的元素</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">ul</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-for</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;(value,key) in info&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:key=&quot;value&quot;&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #FFFFFF">&lt;li&gt;{{key}}&lt;/li&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #FFFFFF">&lt;li&gt;{{value}}&lt;/li&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #FFFFFF">&lt;li&gt;&lt;/li&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/ul&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">data()</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">return</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">message</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;Hello World&quot;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">info</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;xzy&quot;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">18</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E06C75">sex</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;女&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">        }</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="computed" tabindex="-1"><a class="header-anchor" href="#computed" aria-hidden="true">#</a> computed</h2>
<p>{ [key: string]: Function | { get: Function, set: Function }</p>
<p>因为后面是函数,所以可以省略成 key( ){ }</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{</span><span style="color: #E06C75">fullName</span><span style="color: #ABB2BF">}</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{</span><span style="color: #E06C75">reverseMessage</span><span style="color: #ABB2BF">}</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//xzy</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//World Hello</span></span>
<span class="line"><span style="color: #61AFEF">data</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">message</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;Hello World&quot;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">firstName</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;x&quot;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">lastName</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;zy&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">},</span></span>
<span class="line"><span style="color: #ABB2BF">computed: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">fullName</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    	</span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">firstName</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">lastName</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">reverseMessage</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    	</span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">message</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">split</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot; &quot;</span><span style="color: #ABB2BF">).</span><span style="color: #61AFEF">reverse</span><span style="color: #ABB2BF">().</span><span style="color: #61AFEF">join</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot; &quot;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="watch-监听" tabindex="-1"><a class="header-anchor" href="#watch-监听" aria-hidden="true">#</a> watch 监听</h2>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{infoChange.children.children.</span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">}</span><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;changeInfo&quot;&gt;改变info&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;changeInfoName&quot;&gt;改变info.name&lt;/button&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;hr&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;h2&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{goodsChange[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]</span><span style="color: #E06C75">.children.children.name}}</span></span>
<span class="line"><span style="color: #E06C75">&lt;/h2&gt;</span></span>
<span class="line"><span style="color: #E06C75">    &lt;button @click=&quot;changeGoods&quot;&gt;改变品牌&lt;/button&gt;</span></span>
<span class="line"><span style="color: #E06C75">    &lt;button @click=&quot;changeGoodsName&quot;&gt;改变名字&lt;/button&gt;</span></span>
<span class="line"><span style="color: #E06C75">data() {</span></span>
<span class="line"><span style="color: #E06C75">    return {</span></span>
<span class="line"><span style="color: #E06C75">        info</span><span style="color: #ABB2BF">: { </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;zs&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">18</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">children</span><span style="color: #ABB2BF">: { </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;钟&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">children</span><span style="color: #ABB2BF">: { </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;雨&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">22</span><span style="color: #ABB2BF"> } } },</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">goods</span><span style="color: #ABB2BF">: [{ </span><span style="color: #E06C75">id</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;家电&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">children</span><span style="color: #ABB2BF">: { </span><span style="color: #E06C75">id</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">11</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;海信&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">children</span><span style="color: #ABB2BF">: { </span><span style="color: #E06C75">id</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">111</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;海信电视&quot;</span><span style="color: #ABB2BF"> } } }]</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//这里一定要写计算属性</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//利用计算属性的缓存  深拷贝的数据旧值</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//要不然侦听器  侦听不出旧值</span></span>
<span class="line"><span style="color: #FFFFFF">computed:</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">infoChange</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">        return JSON.parse(JSON.stringify(this.info))</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">goodsChange</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">		return JSON.parse(JSON.stringify(this.goods))</span></span>
<span class="line"><span style="color: #ABB2BF">	}</span></span>
<span class="line"><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">watch:</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 默认情况下,我们的侦听器只会针对监听的数据本身的改变</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// info(newVal, oldVal) {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//     console.log(&quot;newVal:&quot;, newVal, &quot;oldVal:&quot;, oldVal);</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//深度侦听  立即执行</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">infoChange</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">handler</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">newVal</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">oldVal</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">//不写计算属性的话 这里是个bug   因为是引用，所以新值和旧值指向同一个地址</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;newVal:&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">newVal</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&quot;oldVal:&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">oldVal</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">        },</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//开启深度监听</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">deep</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//开启立即执行</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">immediate</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">true</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #7F848E; font-style: italic">//复杂数据类型也能监听</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">goodsChange</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">handler</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">newVal</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">oldVal</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">        	</span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;newVal:&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">newVal</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&quot;oldVal:&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">oldVal</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">        },</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">immediate</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">deep</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">true</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">methods:</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">changeInfo</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">        this.info.children.</span><span style="color: #E06C75">children</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;wh&quot;</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">changeInfoName</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">        this.info.children.children.</span><span style="color: #E06C75">name</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&quot;wlh&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">   },</span></span>
<span class="line"><span style="color: #ABB2BF">   </span><span style="color: #61AFEF">changeGoods</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">        this.goods[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]</span><span style="color: #E06C75">.children.children = { id</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">12</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;格力&quot;</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">   </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #ABB2BF">   </span><span style="color: #FFFFFF">changeGoodsName()</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">goods</span><span style="color: #ABB2BF">[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">].</span><span style="color: #E5C07B">children</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">children</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">name</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&quot;海信空调&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">   </span><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="对象的引用" tabindex="-1"><a class="header-anchor" href="#对象的引用" aria-hidden="true">#</a> 对象的引用</h2>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//   指针</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">info</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;lzh&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">18</span><span style="color: #ABB2BF"> }; </span><span style="color: #7F848E; font-style: italic">//info = 指针地址</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">obj</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">info</span><span style="color: #ABB2BF">; </span><span style="color: #7F848E; font-style: italic">//obj = info = 指针地址</span></span>
<span class="line"><span style="color: #E5C07B">info</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">name</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;xzy&#39;</span><span style="color: #ABB2BF">; </span><span style="color: #7F848E; font-style: italic">//info改变 所以obj发生变化</span></span>
<span class="line"><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">obj</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">); </span><span style="color: #7F848E; font-style: italic">//xzy</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="浅拷贝" tabindex="-1"><a class="header-anchor" href="#浅拷贝" aria-hidden="true">#</a> 浅拷贝</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">// 浅拷贝 拷贝简单对象没问题 拷贝复杂对象会有问题</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// 简单对象</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//创建一个地址空间A  存放 name: &quot;lzh&quot;, age: 18</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//info = A(指针地址)</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">info</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;lzh&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">18</span><span style="color: #ABB2BF"> };</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//创建一个地址空间B 存放空对象 {}</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//将info的内容全拷贝地址B   所以B为 name: &quot;lzh&quot;, age: 18</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//obj = B(指针地址)</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">obj</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Object</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">assign</span><span style="color: #ABB2BF">({}, </span><span style="color: #E06C75">info</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//-----------------------------------------------------</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//复杂对象</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// children的地址空间是C</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">info</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;lzh&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">18</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">children</span><span style="color: #ABB2BF">: { </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;lyz&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">null</span><span style="color: #ABB2BF"> } };</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//object.assign()拷贝时,children的地址还是C</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//所以当info中children发生改变时 obj里面的children也会发生改变</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//他们指向同一个地址</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">obj</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Object</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">assign</span><span style="color: #ABB2BF">({}, </span><span style="color: #E06C75">info</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #E5C07B">info</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">children</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">name</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;lzy&#39;</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">obj</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">children</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">); </span><span style="color: #7F848E; font-style: italic">//lzy</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//lodash(js库)  浅拷贝</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//_.clone()</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">info</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;lzh&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">18</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">children</span><span style="color: #ABB2BF">: { </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;lyz&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">null</span><span style="color: #ABB2BF"> } };</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">obj</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">_</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">clone</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">info</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #E5C07B">info</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">name</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;xzy&#39;</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E5C07B">info</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">children</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">name</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;lzy&#39;</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">obj</span><span style="color: #ABB2BF">); </span><span style="color: #7F848E; font-style: italic">//name: &#39;lzh&#39;, age: 18, children: {name: &#39;lzy&#39;, age: null}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="深拷贝" tabindex="-1"><a class="header-anchor" href="#深拷贝" aria-hidden="true">#</a> 深拷贝</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//1.JSON方法深拷贝</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">info</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;lzh&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">18</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">children</span><span style="color: #ABB2BF">: { </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;lyz&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">null</span><span style="color: #ABB2BF"> } };</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">obj</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">JSON</span><span style="color: #ABB2BF">.</span><span style="color: #56B6C2">parse</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">JSON</span><span style="color: #ABB2BF">.</span><span style="color: #56B6C2">stringify</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">info</span><span style="color: #ABB2BF">));</span></span>
<span class="line"><span style="color: #E5C07B">info</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">children</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">name</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;lzy&#39;</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">obj</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">children</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">); </span><span style="color: #7F848E; font-style: italic">//lyz</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//2.lodash  深拷贝</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//_.cloneDeep()他这个的话应该是递归拷贝</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">info</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;lzh&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">18</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">children</span><span style="color: #ABB2BF">: { </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;lyz&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">null</span><span style="color: #ABB2BF"> } };</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">obj</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">_</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">cloneDeep</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">info</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #E5C07B">info</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">children</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">name</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;lzy&#39;</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">obj</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">children</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">); </span><span style="color: #7F848E; font-style: italic">//lyz</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="v-model" tabindex="-1"><a class="header-anchor" href="#v-model" aria-hidden="true">#</a> v-model</h2>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #56B6C2">&lt;!--</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">复选框</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">--&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">span</span><span style="color: #ABB2BF">&gt;你的爱好&lt;/</span><span style="color: #E06C75">span</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">label</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">for</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;basketball&quot;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">input</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;checkbox&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">id</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;basketball&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-model</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;hobbies&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">value</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;basketball&quot;</span><span style="color: #ABB2BF">&gt;篮球</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">label</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">label</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">for</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;football&quot;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">input</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;checkbox&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">id</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;football&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-model</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;hobbies&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">value</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;football&quot;</span><span style="color: #ABB2BF">&gt;篮球</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">label</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">label</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">for</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;tennis&quot;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">input</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;checkbox&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">id</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;tennis&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-model</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;hobbies&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">value</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;tennis&quot;</span><span style="color: #ABB2BF">&gt;篮球</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">label</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">br</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">span</span><span style="color: #ABB2BF">&gt;hobbies:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{</span><span style="color: #E06C75">hobbies</span><span style="color: #ABB2BF">}</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">span</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;!-- --------------------------------------------------------------------------------- --&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;!-- 单选框 --&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">br</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">span</span><span style="color: #ABB2BF">&gt;性别&lt;/</span><span style="color: #E06C75">span</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">label</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">for</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;male&quot;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">input</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;radio&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">id</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;male&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-model</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;gender&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">value</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;male&quot;</span><span style="color: #ABB2BF">&gt;男</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">label</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">label</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">for</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;female&quot;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">input</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;radio&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">id</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;female&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-model</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;gender&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">value</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;female&quot;</span><span style="color: #ABB2BF">&gt;女</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">label</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">br</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">span</span><span style="color: #ABB2BF">&gt;gender:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{</span><span style="color: #E06C75">gender</span><span style="color: #ABB2BF">}</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">span</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;!-- --------------------------------------------------------------------------------- --&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;!-- 下拉框 --&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">br</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">span</span><span style="color: #ABB2BF">&gt;喜欢的水果&lt;/</span><span style="color: #E06C75">span</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;!-- multiple 多选 size --&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">select</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-model</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;fruilt&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">multiple</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">size</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;2&quot;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">        &lt;</span><span style="color: #E06C75">option</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">value</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;apple&quot;</span><span style="color: #ABB2BF">&gt;苹果&lt;/</span><span style="color: #E06C75">option</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	&lt;</span><span style="color: #E06C75">option</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">value</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;orange&quot;</span><span style="color: #ABB2BF">&gt;橘子&lt;/</span><span style="color: #E06C75">option</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	&lt;</span><span style="color: #E06C75">option</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">value</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;banana&quot;</span><span style="color: #ABB2BF">&gt;香蕉&lt;/</span><span style="color: #E06C75">option</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">select</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">br</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">span</span><span style="color: #ABB2BF">&gt;fruilt:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{</span><span style="color: #E06C75">fruilt</span><span style="color: #ABB2BF">}</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">span</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">data() </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">return</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">hobbies</span><span style="color: #ABB2BF">: [],</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">gender</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;male&quot;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">fruilt</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;banana&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="真实开发案例" tabindex="-1"><a class="header-anchor" href="#真实开发案例" aria-hidden="true">#</a> 真实开发案例</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #56B6C2">&lt;!--</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">复选框</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">--&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">span</span><span style="color: #ABB2BF">&gt;你的爱好&lt;/</span><span style="color: #E06C75">span</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">label</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:for=&quot;hobby&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-for</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;(hobby, index) in hobbyArray&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:key=&quot;index&quot;&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #FFFFFF">&lt;input</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;checkbox&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:id=&quot;hobby&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-model</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;hobbies&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:value=&quot;hobby&quot;&gt;{{hobby}}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/label&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;br&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;span&gt;hobbies:{{hobbies}}&lt;/span&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;!--</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">单选框</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">--&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;br&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;span&gt;性别&lt;/span&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;label</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:for=&quot;sex&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-for</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;(sex, index) in genders&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:key=&quot;index&quot;&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #FFFFFF">&lt;input</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;radio&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:id=&quot;sex&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-model</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;gender&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:value=&quot;sex&quot;&gt;{{sex}}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/label&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;br&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;span&gt;gender:{{gender}}&lt;/span&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;!--</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">下拉框</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">--&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;br&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;span&gt;喜欢的水果&lt;/span&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;!--</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">multiple</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">多选</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">size</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">--&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;select</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-model</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;fruilt&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">multiple</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">size</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;2&quot;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	&lt;</span><span style="color: #E06C75">option</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:value=&quot;fruiltItem&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-for</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;(fruiltItem, index) in fruilts&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:key=&quot;fruiltItem&quot;&gt;{{fruiltItem}}&lt;/option&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/select&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;br&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;span&gt;fruilt:{{fruilt}}&lt;/span&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">data()</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">return</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">hobbyArray</span><span style="color: #ABB2BF">: [</span><span style="color: #98C379">&quot;篮球&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&quot;足球&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&quot;网球&quot;</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">hobbies</span><span style="color: #ABB2BF">: [],</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">genders</span><span style="color: #ABB2BF">: [</span><span style="color: #98C379">&quot;male&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&quot;female&quot;</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">gender</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;male&quot;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">fruilts</span><span style="color: #ABB2BF">: [</span><span style="color: #98C379">&quot;apple&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&quot;orange&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&quot;banana&quot;</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">fruilt</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;banana&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="修饰符" tabindex="-1"><a class="header-anchor" href="#修饰符" aria-hidden="true">#</a> 修饰符</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #56B6C2">&lt;!--</span><span style="color: #ABB2BF"> 1.</span><span style="color: #E06C75">lazy修饰符</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">--&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//按下enter或者离开时 才进行改变</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">input</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;text&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">v-model.lazy=&quot;message&quot;&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;h2&gt;{{message}}&lt;/h2&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;!--</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">2.number修饰符</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">--&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//数据只能接受数字</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;input</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;text&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">v-model.number=&quot;sum&quot;&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;h2&gt;{{sum}}&lt;/h2&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;!--</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">3.trim修饰符</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">--&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//去除字符串前后的空格</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;input</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;text&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">v-model.trim=&quot;message&quot;&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;h2&gt;{{message}}&lt;/h2&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">data()</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">return</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">message</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;Hello World&quot;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">sum</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">100</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="组件" tabindex="-1"><a class="header-anchor" href="#组件" aria-hidden="true">#</a> 组件</h2>
<h3 id="全局组件" tabindex="-1"><a class="header-anchor" href="#全局组件" aria-hidden="true">#</a> 全局组件</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//组件名称</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//1.comopnent-a(短横线)   则只能&lt;component-a&gt;&lt;/component-a&gt;这样使用    建议这种</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//2.ComponentB(驼峰)   可以&lt;component-b&gt;&lt;/component-b&gt;,也可以这样写&lt;ComponentB&gt;&lt;ComponentB/&gt;</span></span>
<span class="line"><span style="color: #E5C07B">app</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">component</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;组件名称&#39;</span><span style="color: #ABB2BF">, {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//组件内容</span></span>
<span class="line"><span style="color: #ABB2BF">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="局部组件" tabindex="-1"><a class="header-anchor" href="#局部组件" aria-hidden="true">#</a> 局部组件</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">components: {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//key:value</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//ComponentA:ComponentA</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//根据ES6可以简写成</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">ComponentA</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="webpack" tabindex="-1"><a class="header-anchor" href="#webpack" aria-hidden="true">#</a> webpack</h2>
<p><strong>全局:</strong></p>
<p>1、安装 node，node 安装时会自动安装 npm</p>
<p>链接:<a href="https://nodejs.org/zh-cn/" target="_blank" rel="noopener noreferrer">Node.js (nodejs.org)<ExternalLinkIcon/></a></p>
<p>2、安装 webpack -g 是全局安装</p>
<p>npm install webpack webpack-cli -g</p>
<p><strong>局部:</strong></p>
<p>1、npm init 或者 npm init -y 添加 package.json -y 的意思是后面配置全部都是 yes</p>
<p>2、npm install webpack webpack-cli -D(--save-dev) 开发依赖</p>
<p>3、npx webpack（使用局部的 webpack 进行打包）</p>
<p>4、在 package.json 中书写以下代码</p>
<div class="language-json ext-json line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #98C379">&quot;scripts&quot;</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">&quot;build&quot;</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;webpack&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5、运行 npm run build 即可使用局部的 webpack 进行打包(对步骤 3 的优化)</p>
<p>6.配置 webpack.config.js 配置输入、输出</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">path</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;path&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E5C07B">module</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">exports</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//    输入文件  从这个文件开始打包</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">entry</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;./src/main.js&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//   输出文件</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">output</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//   输出文件路径   路径拼接</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">path</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">path</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">resolve</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">__dirname</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;./build&#39;</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//   输出文件名称  并且放在js目录下</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">filename</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;js/bundle.js&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>7、给 webpack.config.js 设置别名</p>
<p>在 package.json 中书写以下代码</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #98C379">&quot;build&quot;</span><span style="color: #ABB2BF">:</span><span style="color: #98C379">&quot;webpack --config why.config.js&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>坑 1:因为要获取 body js 文件必须在 body 里最后的位置引入</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #E5C07B">document</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">body</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">appendChild</span><span style="color: #ABB2BF">();</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>8、安装 css-loader 预解析 css</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">css</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">loader</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">D</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>9、将解析后的通过 style 插入</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">style</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">loader</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">D</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>10、安装 less</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">less</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">D</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>11、安装 less-loader</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">less</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">loader</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">D</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>12、安装 postcss</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">postcss</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">postcss</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">cli</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">D</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>13、安装 autoprefixer</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #abb2bf">npm install autoprefixer -D</span></span>
<span class="line"><span style="color: #abb2bf"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>14、添加前缀</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #abb2bf">npx postcss --use autoprefixer -o 处理后.css 处理前.css</span></span>
<span class="line"><span style="color: #abb2bf"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>15、安装 postcss-loader</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #abb2bf">npm install postcss-loader</span></span>
<span class="line"><span style="color: #abb2bf"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>16、安装 postcss-preset-env(内置了 autoprefixer，所以可以不用暗转 autoprefixer)</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #abb2bf">npm install postcss-preset-env -D</span></span>
<span class="line"><span style="color: #abb2bf"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>17、postcss.config.js</p>
<p>在这个文件中配置 webpack.config.js 就可以简单点</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #E5C07B">module</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">exports</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//  插件</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//  postcss-preset-env</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">// 可以将现代化的css特性color: #12345678;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">// 并且还可以自动添加浏览器前缀 以兼容</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">// 转化为color: rgba(18,52,86,0.47059);现代大多数浏览器认识的css</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">plugins</span><span style="color: #ABB2BF">: [</span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;postcss-preset-env&#39;</span><span style="color: #ABB2BF">)],</span></span>
<span class="line"><span style="color: #ABB2BF">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="webpack-config-js-完整版" tabindex="-1"><a class="header-anchor" href="#webpack-config-js-完整版" aria-hidden="true">#</a> webpack.config.js(完整版)</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">path</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;path&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E5C07B">module</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">exports</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//    输入文件  从这个文件开始打包</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">entry</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;./src/main.js&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//   输出文件</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">output</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//   输出文件路径   路径拼接</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">path</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">path</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">resolve</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">__dirname</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;./build&#39;</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//   输出文件名称</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">filename</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;bundle.js&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//模块  object</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">module</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 规则 array</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">rules</span><span style="color: #ABB2BF">: [</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//   // 匹配.css的文件</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//   test: /\.css/,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//   // 1.使用loader(语法糖)</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//   // loader: &#39;css-loader&#39;,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//   // 2.使用哪些loader array  完整写法</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//   // use: [{ loader: &#39;css-loader&#39; }],</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//   // 3.简洁写法</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//   css规则</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//   use: [</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//     //执行顺序 从后往前</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//     &#39;style-loader&#39;,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//     &#39;css-loader&#39;,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//     &#39;postcss-loader&#39;, //配置在外面了</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//     // postcss-loader要配置 所以要写成对象</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//     // {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//     //   loader: &#39;postcss-loader&#39;,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//     //   配置额外的选项</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//     //   options: {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//     //     postcss配置</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//     //     postcssOptions: {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//     //       插件</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//     //       plugins: [require(&#39;autoprefixer&#39;)],</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//     //     },</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//     //   },</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//     // },</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//   ],</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// },</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// less规则</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//   test: /\.less$/,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//   use: [&#39;style-loader&#39;, &#39;css-loader&#39;, &#39;less-loader&#39;, &#39;postcss-loader&#39;],</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// },</span></span>
<span class="line"><span style="color: #ABB2BF">      {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">test</span><span style="color: #ABB2BF">:</span><span style="color: #E06C75"> /</span><span style="color: #E5C07B">\.</span><span style="color: #E06C75">(less</span><span style="color: #ABB2BF">|</span><span style="color: #E06C75">css)</span><span style="color: #C678DD">$</span><span style="color: #E06C75">/</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">use</span><span style="color: #ABB2BF">: [</span><span style="color: #98C379">&#39;style-loader&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;css-loader&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;less-loader&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;postcss-loader&#39;</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">    ],</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>19、file-loader 加载 jpg、png 等图片(<strong>webpack5 都不用了</strong>)</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">file</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">loader</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">D</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>20、安装 url-loader 将较小的图片转成 base64(<strong>webpack5 都不用了</strong>)</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #abb2bf">npm install url-loader -D</span></span>
<span class="line"><span style="color: #abb2bf"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>步骤 19、20 的配置，用了 url-loader 可以不用 file-loader</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">{</span></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #7F848E; font-style: italic">//匹配这些图片形式</span></span>
<span class="line"><span style="color: #ABB2BF">    test:</span><span style="color: #E06C75"> /</span><span style="color: #E5C07B">\.</span><span style="color: #E06C75">(jpe</span><span style="color: #D19A66">?</span><span style="color: #E06C75">g</span><span style="color: #ABB2BF">|</span><span style="color: #E06C75">png</span><span style="color: #ABB2BF">|</span><span style="color: #E06C75">gif</span><span style="color: #ABB2BF">|</span><span style="color: #E06C75">svg)</span><span style="color: #C678DD">$</span><span style="color: #E06C75">/</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    use: {</span></span>
<span class="line"><span style="color: #ABB2BF">        loader: </span><span style="color: #98C379">&#39;url-loader&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        options: {</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">// 输出路径 img</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">// outputPath: &#39;img&#39;,</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">// outputPath和filename配合使用</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">// 输出名称  原来的名称_哈希6位 扩展名</span></span>
<span class="line"><span style="color: #ABB2BF">            name: </span><span style="color: #98C379">&#39;img/[name]_[hash:6].[ext]&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">// 小于120kb的图片转成base64</span></span>
<span class="line"><span style="color: #ABB2BF">            limit: </span><span style="color: #D19A66">120</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1024</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">//  这是因为webpack先用css-loader将url(../resource/1.png) 解析成</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">//  url(require(&#39;./resource/1.png&#39;))最后url-loader遇到后才能进行处理</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">//  但是url-loader默认用es6的模块语法进行解析</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">//  如果没有设置esModule为false 那么将出现下面这种情况</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">//  问题详解链接:https://www.jianshu.com/p/07322ac362c4</span></span>
<span class="line"><span style="color: #ABB2BF">            esModule: </span><span style="color: #D19A66">false</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        },</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//When using the old assets loaders (i.e. file-loader/url-loader/raw-loader) along with Asset Module in webpack 5, you might want to stop Asset Module from processing your assets again as that would result in asset duplication. This can be done by setting asset&#39;s module type to &#39;javascript/auto&#39;.//</span></span>
<span class="line"><span style="color: #ABB2BF">    type: </span><span style="color: #98C379">&#39;javascript/auto&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>21、webpack5 对图片及转化为 base64 的用法</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">{</span></span>
<span class="line"><span style="color: #ABB2BF">    test:</span><span style="color: #E06C75"> /.</span><span style="color: #E5C07B">\.</span><span style="color: #E06C75">(jpe</span><span style="color: #D19A66">?</span><span style="color: #E06C75">g</span><span style="color: #ABB2BF">|</span><span style="color: #E06C75">png</span><span style="color: #ABB2BF">|</span><span style="color: #E06C75">gif</span><span style="color: #ABB2BF">|</span><span style="color: #E06C75">svg)</span><span style="color: #C678DD">$</span><span style="color: #E06C75">/</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 相当于file-loader的作用</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// type: &#39;asset/resource&#39;,</span></span>
<span class="line"><span style="color: #ABB2BF">    type: </span><span style="color: #98C379">&#39;asset&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//generator（生成器）是ES6标准引入的新的数据类型。一个generator看上去像一个函数，但可以返回多次。</span></span>
<span class="line"><span style="color: #ABB2BF">    generator: {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// 文件名字  img文件夹下  原文件夹名_哈希值6位+扩展名</span></span>
<span class="line"><span style="color: #ABB2BF">        filename: </span><span style="color: #98C379">&#39;img/[name]_[hash:6][ext]&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 解析器</span></span>
<span class="line"><span style="color: #ABB2BF">    parser: {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// 数据url条件</span></span>
<span class="line"><span style="color: #ABB2BF">        dataUrlCondition: {</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">// 小于120kb生成base64图片</span></span>
<span class="line"><span style="color: #ABB2BF">            maxSize: </span><span style="color: #D19A66">120</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1024</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        },</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">},</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>或者这样也可以起到 file-loader 的作用，并且还可以重命名放入指定文件夹(<strong>了解即可</strong>)</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//   输出文件</span></span>
<span class="line"><span style="color: #ABB2BF">output: {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">// assetModuleFilename: &#39;img/[name]_[hash:6][ext]&#39;,</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>22、对字体打包</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//方法1  使用file-loader对字体打包</span></span>
<span class="line"><span style="color: #ABB2BF">{</span></span>
<span class="line"><span style="color: #ABB2BF">    test:</span><span style="color: #E06C75"> /</span><span style="color: #E5C07B">\.</span><span style="color: #E06C75">(eot</span><span style="color: #ABB2BF">|</span><span style="color: #E06C75">ttf</span><span style="color: #ABB2BF">|</span><span style="color: #E06C75">woff2</span><span style="color: #D19A66">?</span><span style="color: #E06C75">)</span><span style="color: #C678DD">$</span><span style="color: #E06C75">/</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    use: {</span></span>
<span class="line"><span style="color: #ABB2BF">        loader: </span><span style="color: #98C379">&#39;file-loader&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        options: {</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">// outputPath: &#39;font&#39;,</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">// filename:&quot;[name]_[hash:6].[ext]&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">// 这两个要搭配使用</span></span>
<span class="line"><span style="color: #ABB2BF">            name: </span><span style="color: #98C379">&#39;font/[name]_[hash:6].[ext]&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">            esModule: </span><span style="color: #D19A66">false</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        },</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//webpack5对loader不兼容</span></span>
<span class="line"><span style="color: #ABB2BF">    type: </span><span style="color: #98C379">&#39;javascript/auto&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #E06C75">方法2</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">使用webpack5内置的方法打包</span><span style="color: #ABB2BF">  </span><span style="color: #E06C75">推荐这种</span></span>
<span class="line"><span style="color: #ABB2BF">{</span></span>
<span class="line"><span style="color: #ABB2BF">    test:</span><span style="color: #E06C75"> /</span><span style="color: #E5C07B">\.</span><span style="color: #E06C75">(eot</span><span style="color: #ABB2BF">|</span><span style="color: #E06C75">ttf</span><span style="color: #ABB2BF">|</span><span style="color: #E06C75">woff2</span><span style="color: #D19A66">?</span><span style="color: #E06C75">)</span><span style="color: #C678DD">$</span><span style="color: #E06C75">/</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    type: </span><span style="color: #98C379">&#39;asset/resource&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 生成器</span></span>
<span class="line"><span style="color: #ABB2BF">    generator: {</span></span>
<span class="line"><span style="color: #ABB2BF">    	</span><span style="color: #7F848E; font-style: italic">// 文件名</span></span>
<span class="line"><span style="color: #ABB2BF">    	filename: </span><span style="color: #98C379">&#39;font/[name]_[hash:6][ext]&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>23、安装 clean-webpack-plugin 插件 打包之前删除原有的打包文件</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF"> </span><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">clean</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">webpack</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">plugin</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">D</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>24、clean-webpack-plugin 的使用</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//引入clean-webpack-plugin插件</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> { </span><span style="color: #E5C07B">CleanWebpackPlugin</span><span style="color: #ABB2BF"> } </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;clean-webpack-plugin&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// 插件 和module同一级目录</span></span>
<span class="line"><span style="color: #ABB2BF">plugins: [</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">// 一个个插件对象 一般是类</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">CleanWebpackPlugin</span><span style="color: #ABB2BF">(),</span></span>
<span class="line"><span style="color: #ABB2BF">];</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>25、安装 html-webpack-plugin 插件，用于生成 index.html 文件</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">html</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">webpack</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">plugin</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">D</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>26、html-webpack-plugin 的使用</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//引入</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">htmlWebpackPlugin</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;html-webpack-plugin&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// 插件</span></span>
<span class="line"><span style="color: #ABB2BF">plugins: [</span></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #7F848E; font-style: italic">// 生成index.html文件</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">HtmlWebpackPlugin</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 依照这个模板生成的index.html(vue)</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;./public/index.html&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// index.html里的标题读的是这个</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">title</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;webpack5&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    })</span></span>
<span class="line"><span style="color: #ABB2BF">],</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>27、给 index.html 模板里的变量赋值</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">// 定义变量 base_url</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> { </span><span style="color: #E5C07B">DefinePlugin</span><span style="color: #ABB2BF"> } </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;webpack&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">DefinePlugin</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//const url = &quot;./&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//BASE_URL: &quot;url&quot;,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">BASE_URL</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;&#39;./&#39;&quot;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">}),</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>28、安装 copy-webpack-plugin，拷贝某些文件</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">copy</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">webpack</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">plugin</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">D</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>29、copy-webpack-plugin 的使用</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">// 复制文件</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">CopyWebpackPlugin</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;copy-webpack-plugin&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">CopyWebpackPlugin</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 匹配</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">patterns</span><span style="color: #ABB2BF">: [</span></span>
<span class="line"><span style="color: #ABB2BF">        {</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">// 从这里来</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E06C75">from</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;public&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">// 到那里去</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E06C75">to</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;./&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">// 配置</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E06C75">globOptions</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #7F848E; font-style: italic">// 忽略</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #E06C75">ignore</span><span style="color: #ABB2BF">: [</span><span style="color: #98C379">&#39;**/index.html&#39;</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">            },</span></span>
<span class="line"><span style="color: #ABB2BF">        },</span></span>
<span class="line"><span style="color: #ABB2BF">    ],</span></span>
<span class="line"><span style="color: #ABB2BF">}),</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>30、方便调试代码</strong></p>
<p>webpack 打包的 js 文件只有一行,如果出错的话找不到出错的地方。而加上这个的话，可以映射错误在哪?</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #E5C07B">module</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">exports</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//开发模式  设置模式  production</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">mode</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;development&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//一般是eval  建立js映射文件 方便代码的调试</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">devtool</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;source-map&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>31、babel 的使用</p>
<p>@babel/core:babel 的核心代码，必须安装</p>
<p>@babel/cli:可以让我们在命令行使用 babel</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> @</span><span style="color: #E06C75">babel</span><span style="color: #56B6C2">/</span><span style="color: #E06C75">core</span><span style="color: #ABB2BF"> @</span><span style="color: #E06C75">babel</span><span style="color: #56B6C2">/</span><span style="color: #E06C75">cli</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">D</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>32、转化箭头函数</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> @</span><span style="color: #E06C75">babel</span><span style="color: #56B6C2">/</span><span style="color: #E06C75">plugin</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">transform</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">arrow</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">functions</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">D</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>33、转化 const(块级作用域)</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> @</span><span style="color: #E06C75">babel</span><span style="color: #56B6C2">/</span><span style="color: #E06C75">plugin</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">transform</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">block</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">scoping</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">D</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>34、babel 的预设</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> @</span><span style="color: #E06C75">babel</span><span style="color: #56B6C2">/</span><span style="color: #E06C75">preset</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">env</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">D</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>35、安装 bebel-loader</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #abb2bf">npm install babel-loader -D</span></span>
<span class="line"><span style="color: #abb2bf"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>36、配置 babel 将 es6 转化为 es5 兼容</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//方法1</span></span>
<span class="line"><span style="color: #ABB2BF">{</span></span>
<span class="line"><span style="color: #ABB2BF">    test:</span><span style="color: #E06C75"> /</span><span style="color: #E5C07B">\.</span><span style="color: #E06C75">js</span><span style="color: #C678DD">$</span><span style="color: #E06C75">/</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    use: {</span></span>
<span class="line"><span style="color: #ABB2BF">        loader: </span><span style="color: #98C379">&#39;babel-loader&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">            options: {</span></span>
<span class="line"><span style="color: #ABB2BF">                </span><span style="color: #7F848E; font-style: italic">//使用两个插件</span></span>
<span class="line"><span style="color: #ABB2BF">                plugins: [</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #7F848E; font-style: italic">//转化箭头函数</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #98C379">&#39;@babel/plugin-transform-arrow-functions&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #7F848E; font-style: italic">//块级作用域  转化const</span></span>
<span class="line"><span style="color: #ABB2BF">                    </span><span style="color: #98C379">&#39;@babel/plugin-transform-block-scoping&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">                ],</span></span>
<span class="line"><span style="color: #ABB2BF">        },</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">},</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//方法2</span></span>
<span class="line"><span style="color: #ABB2BF">{</span></span>
<span class="line"><span style="color: #ABB2BF">    test:</span><span style="color: #E06C75"> /</span><span style="color: #E5C07B">\.</span><span style="color: #E06C75">js</span><span style="color: #C678DD">$</span><span style="color: #E06C75">/</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    use: {</span></span>
<span class="line"><span style="color: #ABB2BF">        loader: </span><span style="color: #98C379">&#39;babel-loader&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        options: {</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">//使用预设</span></span>
<span class="line"><span style="color: #ABB2BF">            presets: [</span><span style="color: #98C379">&#39;@babel/preset-env&#39;</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">        },</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">},</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//方法3   推荐</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//webpack.config.js</span></span>
<span class="line"><span style="color: #ABB2BF">{</span></span>
<span class="line"><span style="color: #ABB2BF">    test:</span><span style="color: #E06C75"> /</span><span style="color: #E5C07B">\.</span><span style="color: #E06C75">js</span><span style="color: #C678DD">$</span><span style="color: #E06C75">/</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    loader: </span><span style="color: #98C379">&#39;babel-loader&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//babel.config.js 将代码抽离出来</span></span>
<span class="line"><span style="color: #E5C07B">module</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">exports</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">presets</span><span style="color: #ABB2BF">: [</span><span style="color: #98C379">&#39;@babel/preset-env&#39;</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="结合-vue-使用" tabindex="-1"><a class="header-anchor" href="#结合-vue-使用" aria-hidden="true">#</a> 结合 vue 使用</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//都行 安装vue3</span></span>
<span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">vue</span><span style="color: #ABB2BF">@</span><span style="color: #E06C75">next</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">--</span><span style="color: #E06C75">save</span></span>
<span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">vue</span><span style="color: #ABB2BF">@</span><span style="color: #E06C75">next</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>01-vue 代码高亮插件</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//插件一:Vetur,从vue2开发就一直在使用的vscode支持的vue插件</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//插件二:volar，官方推荐的插件(后续会基于volar开发官方的VScode插件)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>02-指定 vue 版本</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">// 需要解析template,所以需要手动指定版本</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">createApp</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue/dist/vue.esm-bundler&#39;</span><span style="color: #ABB2BF">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>03-解析 vue 文件</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">vue</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">loader</span><span style="color: #ABB2BF">@</span><span style="color: #E06C75">next</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">D</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>04-安装 compiler-sfc(vue-loader@next 的依赖文件)</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> @</span><span style="color: #E06C75">vue</span><span style="color: #56B6C2">/</span><span style="color: #E06C75">compiler</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">sfc</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">D</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>05-解析工具 2(配合 vue-loader@next)</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">// vue解析工具2</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> { </span><span style="color: #E5C07B">VueLoaderPlugin</span><span style="color: #ABB2BF"> } </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;vue-loader/dist/index&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">plugins: [</span></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">VueLoaderPlugin</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">],</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>06-补充</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//webpack.config.js</span></span>
<span class="line"><span style="color: #ABB2BF">plugins: [</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 定义变量</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">DefinePlugin</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 是否支持vue2</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">__VUE_OPTIONS_API__</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 是否在生产阶段调试</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">__VUE_PROD_DEVTOOLS__</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">false</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }),</span></span>
<span class="line"><span style="color: #ABB2BF">  ],</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//因为抽离了template为.vue文件,所以不用指定vue版本了</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//对02步骤进行修改</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">createApp</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="开启-webserver" tabindex="-1"><a class="header-anchor" href="#开启-webserver" aria-hidden="true">#</a> 开启 webServer</h3>
<ul>
<li>热更新</li>
</ul>
<p>1、watch</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">// 方法1</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//package.json</span></span>
<span class="line"><span style="color: #98C379">&quot;scripts&quot;</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #98C379">&quot;build&quot;</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;webpack --watch&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">},</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">// 方法2</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//webpack.config.js</span></span>
<span class="line"><span style="color: #E5C07B">module</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">exports</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//用于热更新</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">watch</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2、webpack-dev-server(推荐)</p>
<p>安装 webpack-dev-server</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #abb2bf">npm install webpack-dev-server -D</span></span>
<span class="line"><span style="color: #abb2bf"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>使用 webpack-dev-server</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//package.json</span></span>
<span class="line"><span style="color: #98C379">&quot;scripts&quot;</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//开启热更新</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #98C379">&quot;server&quot;</span><span style="color: #ABB2BF">:</span><span style="color: #98C379">&quot;webpack server&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//webpack.config.js</span></span>
<span class="line"><span style="color: #E5C07B">module</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">exports</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//和webpack-dev-server热更新一起使用的</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">target</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;web&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>webpack-dev-server 配置</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//webpack.config.js</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// 热更新</span></span>
<span class="line"><span style="color: #ABB2BF">devServer: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//webpack打包之后找不到资源从这找</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//connectBase这个有问题</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//mp3、mp4不想用copyWebpackPlugin复制时</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//可以用这个</span></span>
<span class="line"><span style="color: #ABB2BF">    static: </span><span style="color: #98C379">&#39;./public&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">},</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>webpack-dev-server 热替换(HMR)</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//webpack.config.js</span></span>
<span class="line"><span style="color: #E5C07B">module</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">exports</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">// 热更新</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">devServer</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 模块热替换(HMR)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 替换、添加、刷新模块,无需重新刷新整个页面</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 改变部分,就修改部分 而不刷新整个浏览器</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">hot</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">};</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//引入时要这样写  当element.js发生改变时则只执行element.js里面的内容</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./js/element&#39;</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// 热替换</span></span>
<span class="line"><span style="color: #C678DD">if</span><span style="color: #ABB2BF"> (</span><span style="color: #E5C07B">module</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">hot</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E5C07B">module</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">hot</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">accept</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;./js/element.js&#39;</span><span style="color: #ABB2BF">, () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;element发生更新了&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">  });</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>webpack-dev-server 设置 host(主机地址)、port(端口号)、open(是否自动打开浏览器)</p>
<p>compress(是否对静态资源进行 gzip 压缩(算优化吧))</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">// 热更新</span></span>
<span class="line"><span style="color: #ABB2BF">devServer: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// host: &#39;0.0.0.0&#39;,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 自动打开浏览器</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//package.json 或者在这里写也行</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//&quot;scripts&quot;: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//    &quot;server&quot;: &quot;webpack server --open&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// },</span></span>
<span class="line"><span style="color: #ABB2BF">    open: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 修改端口</span></span>
<span class="line"><span style="color: #ABB2BF">    port: </span><span style="color: #D19A66">8000</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// gzip压缩 前端优化</span></span>
<span class="line"><span style="color: #ABB2BF">    compress: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">},</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="proxy" tabindex="-1"><a class="header-anchor" href="#proxy" aria-hidden="true">#</a> proxy</h3>
<ul>
<li>跨域问题</li>
</ul>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">// 热更新</span></span>
<span class="line"><span style="color: #ABB2BF">devServer: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 跨域问题 代理</span></span>
<span class="line"><span style="color: #ABB2BF">    proxy: {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 映射</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #98C379">&#39;/api&#39;</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// 映射地址</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">target</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;http://www.baidu.com&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// 路径重写 地址拼接不要加上api</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">pathRewrite</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #98C379">&#39;^/api&#39;</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        },</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//无证书也正确代理  设置为false 默认为true</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">secure</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">false</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// 修改源  有这个服务器才看不出你是代理的</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">changeOrigin</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">},</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="resolve-路径问题" tabindex="-1"><a class="header-anchor" href="#resolve-路径问题" aria-hidden="true">#</a> resolve 路径问题</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//查找文件</span></span>
<span class="line"><span style="color: #ABB2BF">resolve: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//自动加载文件夹下的index文件  resolve.mainFiles的默认值是index</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//默认扩展名  当查找的文件无扩展名时,默认添加,然后再查找</span></span>
<span class="line"><span style="color: #ABB2BF">    extensions: [</span><span style="color: #98C379">&#39;.js&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;.json&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;.mjs&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;.vue&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;.ts&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;.jsx&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;.tsx&#39;</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 起别名  解决路径关系</span></span>
<span class="line"><span style="color: #ABB2BF">    alias: {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// 常见起别名  &quot;@&quot; = &quot;./src&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">&#39;@&#39;</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">path</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">resolve</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">__dirname</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;./src&#39;</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">},</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="区分开发环境与生产环境" tabindex="-1"><a class="header-anchor" href="#区分开发环境与生产环境" aria-hidden="true">#</a> 区分开发环境与生产环境</h3>
<p>1、wepback.config.js 总配置-未拆分前</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">path</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;path&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// 生成打包文件前删除原有文件</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> { </span><span style="color: #E5C07B">CleanWebpackPlugin</span><span style="color: #ABB2BF"> } </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;clean-webpack-plugin&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// 生成index.html文件</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">HtmlWebpackPlugin</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;html-webpack-plugin&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// 定义变量 base_url</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> { </span><span style="color: #E5C07B">DefinePlugin</span><span style="color: #ABB2BF"> } </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;webpack&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// 复制文件</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">CopyWebpackPlugin</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;copy-webpack-plugin&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// vue解析工具2</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> { </span><span style="color: #E5C07B">VueLoaderPlugin</span><span style="color: #ABB2BF"> } </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;vue-loader/dist/index&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E5C07B">module</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">exports</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//和webpack-dev-server热更新一起使用的</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">target</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;web&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//开发模式  设置模式  production</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">mode</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;development&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//一般是eval  建立js映射文件 方便代码的调试</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">devtool</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;source-map&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//    输入文件  从这个文件开始打包</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">entry</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;./src/main.js&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//   输出文件</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">output</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//   输出文件路径   路径拼接</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">path</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">path</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">resolve</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">__dirname</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;./build&#39;</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//   输出文件名称</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">filename</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;js/bundle.js&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// assetModuleFilename: &#39;img/[name]_[hash:6][ext]&#39;,</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">// 热更新</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">devServer</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//webpack打包之后找不到资源从这找</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//connectBase这个有问题</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//mp3、mp4不想用copyWebpackPlugin复制时</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//可以用这个</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">static</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;./public&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 模块热替换(HMR)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 替换、添加、刷新模块,无需重新刷新整个页面</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 改变部分,就修改部分 而不刷新整个浏览器</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">hot</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 当前网段的ip地址都可以访问</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// host: &#39;0.0.0.0&#39;,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 自动打开浏览器</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">open</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 修改端口</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">port</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">8000</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// gzip压缩 前端优化</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">compress</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 跨域问题 代理</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">proxy</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 映射</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #98C379">&#39;/api&#39;</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// 映射地址</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">target</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;http://www.baidu.com&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// 路径重写 地址拼接不要加上api</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">pathRewrite</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #98C379">&#39;^/api&#39;</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        },</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//无证书也正确代理  设置为false 默认为true</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">secure</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">false</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// 修改源  有这个服务器才看不出你是代理的</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">changeOrigin</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//模块  object</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">module</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 规则 array</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">rules</span><span style="color: #ABB2BF">: [</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// less/css规则</span></span>
<span class="line"><span style="color: #ABB2BF">      {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">test</span><span style="color: #ABB2BF">:</span><span style="color: #E06C75"> /</span><span style="color: #E5C07B">\.</span><span style="color: #E06C75">(less</span><span style="color: #ABB2BF">|</span><span style="color: #E06C75">css)</span><span style="color: #C678DD">$</span><span style="color: #E06C75">/</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">use</span><span style="color: #ABB2BF">: [</span><span style="color: #98C379">&#39;style-loader&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;css-loader&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;less-loader&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;postcss-loader&#39;</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 图片</span></span>
<span class="line"><span style="color: #ABB2BF">      {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">test</span><span style="color: #ABB2BF">:</span><span style="color: #E06C75"> /.</span><span style="color: #E5C07B">\.</span><span style="color: #E06C75">(jpe</span><span style="color: #D19A66">?</span><span style="color: #E06C75">g</span><span style="color: #ABB2BF">|</span><span style="color: #E06C75">png</span><span style="color: #ABB2BF">|</span><span style="color: #E06C75">gif</span><span style="color: #ABB2BF">|</span><span style="color: #E06C75">svg)</span><span style="color: #C678DD">$</span><span style="color: #E06C75">/</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// type: &#39;asset/resource&#39;,     file-loader</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">type</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;asset&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//generator（生成器）是ES6标准引入的新的数据类型。一个generator看上去像一个函数，但可以返回多次。</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">generator</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #7F848E; font-style: italic">// 文件名字  img文件夹下  原文件夹名_哈希值6位+扩展名</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #E06C75">filename</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;img/[name]_[hash:6][ext]&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        },</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// 解析器</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">parser</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #7F848E; font-style: italic">// 数据url条件</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #E06C75">dataUrlCondition</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">// 小于120kb生成base64图片</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E06C75">maxSize</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">120</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1024</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">          },</span></span>
<span class="line"><span style="color: #ABB2BF">        },</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 字体2</span></span>
<span class="line"><span style="color: #ABB2BF">      {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">test</span><span style="color: #ABB2BF">:</span><span style="color: #E06C75"> /</span><span style="color: #E5C07B">\.</span><span style="color: #E06C75">(eot</span><span style="color: #ABB2BF">|</span><span style="color: #E06C75">ttf</span><span style="color: #ABB2BF">|</span><span style="color: #E06C75">woff2</span><span style="color: #D19A66">?</span><span style="color: #E06C75">)</span><span style="color: #C678DD">$</span><span style="color: #E06C75">/</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">type</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;asset/resource&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">generator</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #E06C75">filename</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;font/[name]_[hash:6][ext]&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        },</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// js</span></span>
<span class="line"><span style="color: #ABB2BF">      {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">test</span><span style="color: #ABB2BF">:</span><span style="color: #E06C75"> /</span><span style="color: #E5C07B">\.</span><span style="color: #E06C75">js</span><span style="color: #C678DD">$</span><span style="color: #E06C75">/</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">loader</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;babel-loader&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//vue</span></span>
<span class="line"><span style="color: #ABB2BF">      {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">test</span><span style="color: #ABB2BF">:</span><span style="color: #E06C75"> /</span><span style="color: #E5C07B">\.</span><span style="color: #E06C75">vue</span><span style="color: #C678DD">$</span><span style="color: #E06C75">/</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">loader</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;vue-loader&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">    ],</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//查找文件</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">resolve</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//自动加载文件夹下的index文件  resolve.mainFiles的默认值是index</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//默认扩展名  当查找的文件无扩展名时,默认添加,然后再查找</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">extensions</span><span style="color: #ABB2BF">: [</span><span style="color: #98C379">&#39;.js&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;.json&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;.mjs&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;.vue&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;.ts&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;.jsx&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;.tsx&#39;</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 起别名  解决路径关系</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">alias</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 常见起别名  &quot;@&quot; = &quot;./src&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #98C379">&#39;@&#39;</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">path</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">resolve</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">__dirname</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;./src&#39;</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">// 插件</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">plugins</span><span style="color: #ABB2BF">: [</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 一个个插件对象 一般是类</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">CleanWebpackPlugin</span><span style="color: #ABB2BF">(),</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 生成index.html文件</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">HtmlWebpackPlugin</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 依照这个模板生成的index.html(vue)</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;./public/index.html&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// index.html里的标题读的是这个</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">title</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;webpack5&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }),</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 定义变量</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">DefinePlugin</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//const url = &quot;./&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//BASE_URL: &quot;url&quot;,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">BASE_URL</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;&#39;./&#39;&quot;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 是否支持vue2</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">__VUE_OPTIONS_API__</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 是否在生产阶段调试</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">__VUE_PROD_DEVTOOLS__</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">false</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }),</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//复制文件</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">CopyWebpackPlugin</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 匹配</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">patterns</span><span style="color: #ABB2BF">: [</span></span>
<span class="line"><span style="color: #ABB2BF">        {</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #7F848E; font-style: italic">// 从这里来</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #E06C75">from</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;public&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #7F848E; font-style: italic">// 到那里去</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #E06C75">to</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;./&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #7F848E; font-style: italic">// 配置</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #E06C75">globOptions</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">// 忽略</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E06C75">ignore</span><span style="color: #ABB2BF">: [</span><span style="color: #98C379">&#39;**/index.html&#39;</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">          },</span></span>
<span class="line"><span style="color: #ABB2BF">        },</span></span>
<span class="line"><span style="color: #ABB2BF">      ],</span></span>
<span class="line"><span style="color: #ABB2BF">    }),</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 加载vue所需要的插件</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">VueLoaderPlugin</span><span style="color: #ABB2BF">(),</span></span>
<span class="line"><span style="color: #ABB2BF">  ],</span></span>
<span class="line"><span style="color: #ABB2BF">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>2、公共环境配置</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//webpack.comm.config.js</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">path</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;path&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// 生成index.html文件</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">HtmlWebpackPlugin</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;html-webpack-plugin&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// 定义变量 base_url</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> { </span><span style="color: #E5C07B">DefinePlugin</span><span style="color: #ABB2BF"> } </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;webpack&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// vue解析工具2</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> { </span><span style="color: #E5C07B">VueLoaderPlugin</span><span style="color: #ABB2BF"> } </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;vue-loader/dist/index&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E5C07B">module</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">exports</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">target</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;web&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//    输入文件  从这个文件开始打包</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">entry</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;./src/main.js&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//   输出文件</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">output</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//   输出文件路径   路径拼接</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">path</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">path</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">resolve</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">__dirname</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;./build&#39;</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//   输出文件名称</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">filename</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;js/bundle.js&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// assetModuleFilename: &#39;img/[name]_[hash:6][ext]&#39;,</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//查找文件</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">resolve</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//自动加载文件夹下的index文件  resolve.mainFiles的默认值是index</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//默认扩展名  当查找的文件无扩展名时,默认添加,然后再查找</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">extensions</span><span style="color: #ABB2BF">: [</span><span style="color: #98C379">&#39;.js&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;.json&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;.mjs&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;.vue&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;.ts&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;.jsx&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;.tsx&#39;</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 起别名  解决路径关系</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">alias</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 常见起别名  &quot;@&quot; = &quot;./src&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #98C379">&#39;@&#39;</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">path</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">resolve</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">__dirname</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;./src&#39;</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//模块  object</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">module</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 规则 array</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">rules</span><span style="color: #ABB2BF">: [</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// less/css规则</span></span>
<span class="line"><span style="color: #ABB2BF">      {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">test</span><span style="color: #ABB2BF">:</span><span style="color: #E06C75"> /</span><span style="color: #E5C07B">\.</span><span style="color: #E06C75">(less</span><span style="color: #ABB2BF">|</span><span style="color: #E06C75">css)</span><span style="color: #C678DD">$</span><span style="color: #E06C75">/</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">use</span><span style="color: #ABB2BF">: [</span><span style="color: #98C379">&#39;style-loader&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;css-loader&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;less-loader&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;postcss-loader&#39;</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 图片</span></span>
<span class="line"><span style="color: #ABB2BF">      {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">test</span><span style="color: #ABB2BF">:</span><span style="color: #E06C75"> /.</span><span style="color: #E5C07B">\.</span><span style="color: #E06C75">(jpe</span><span style="color: #D19A66">?</span><span style="color: #E06C75">g</span><span style="color: #ABB2BF">|</span><span style="color: #E06C75">png</span><span style="color: #ABB2BF">|</span><span style="color: #E06C75">gif</span><span style="color: #ABB2BF">|</span><span style="color: #E06C75">svg)</span><span style="color: #C678DD">$</span><span style="color: #E06C75">/</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// type: &#39;asset/resource&#39;,     file-loader</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">type</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;asset&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//generator（生成器）是ES6标准引入的新的数据类型。一个generator看上去像一个函数，但可以返回多次。</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">generator</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #7F848E; font-style: italic">// 文件名字  img文件夹下  原文件夹名_哈希值6位+扩展名</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #E06C75">filename</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;img/[name]_[hash:6][ext]&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        },</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// 解析器</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">parser</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #7F848E; font-style: italic">// 数据url条件</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #E06C75">dataUrlCondition</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">// 小于120kb生成base64图片</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E06C75">maxSize</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">120</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1024</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">          },</span></span>
<span class="line"><span style="color: #ABB2BF">        },</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 字体2</span></span>
<span class="line"><span style="color: #ABB2BF">      {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">test</span><span style="color: #ABB2BF">:</span><span style="color: #E06C75"> /</span><span style="color: #E5C07B">\.</span><span style="color: #E06C75">(eot</span><span style="color: #ABB2BF">|</span><span style="color: #E06C75">ttf</span><span style="color: #ABB2BF">|</span><span style="color: #E06C75">woff2</span><span style="color: #D19A66">?</span><span style="color: #E06C75">)</span><span style="color: #C678DD">$</span><span style="color: #E06C75">/</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">type</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;asset/resource&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">generator</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #E06C75">filename</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;font/[name]_[hash:6][ext]&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        },</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// js</span></span>
<span class="line"><span style="color: #ABB2BF">      {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">test</span><span style="color: #ABB2BF">:</span><span style="color: #E06C75"> /</span><span style="color: #E5C07B">\.</span><span style="color: #E06C75">js</span><span style="color: #C678DD">$</span><span style="color: #E06C75">/</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">loader</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;babel-loader&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//vue</span></span>
<span class="line"><span style="color: #ABB2BF">      {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">test</span><span style="color: #ABB2BF">:</span><span style="color: #E06C75"> /</span><span style="color: #E5C07B">\.</span><span style="color: #E06C75">vue</span><span style="color: #C678DD">$</span><span style="color: #E06C75">/</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">loader</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;vue-loader&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">    ],</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">// 插件</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">plugins</span><span style="color: #ABB2BF">: [</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 生成index.html文件</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">HtmlWebpackPlugin</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 依照这个模板生成的index.html(vue)</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;./public/index.html&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// index.html里的标题读的是这个</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">title</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;webpack5&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }),</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 定义变量</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">DefinePlugin</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//const url = &quot;./&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//BASE_URL: &quot;url&quot;,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">BASE_URL</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;&#39;./&#39;&quot;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 是否支持vue2</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">__VUE_OPTIONS_API__</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 是否在生产阶段调试</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">__VUE_PROD_DEVTOOLS__</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">false</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }),</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 加载vue所需要的插件</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">VueLoaderPlugin</span><span style="color: #ABB2BF">(),</span></span>
<span class="line"><span style="color: #ABB2BF">  ],</span></span>
<span class="line"><span style="color: #ABB2BF">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3、开发环境配置</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//webpack.dev.config.js</span></span>
<span class="line"><span style="color: #E5C07B">module</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">exports</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//开发模式  设置模式  production</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">mode</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;development&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//一般是eval  建立js映射文件 方便代码的调试</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">devtool</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;source-map&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">// 热更新</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">devServer</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//webpack打包之后找不到资源从这找</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//connectBase这个有问题</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//mp3、mp4不想用copyWebpackPlugin复制时</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//可以用这个</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">static</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;./public&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 模块热替换(HMR)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 替换、添加、刷新模块,无需重新刷新整个页面</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 改变部分,就修改部分 而不刷新整个浏览器</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">hot</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 当前网段的ip地址都可以访问</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// host: &#39;0.0.0.0&#39;,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 自动打开浏览器</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// open:true,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 修改端口</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">port</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">8000</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// gzip压缩 前端优化</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">compress</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 跨域问题 代理</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">proxy</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 映射</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #98C379">&#39;/api&#39;</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// 映射地址</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">target</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;http://www.baidu.com&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// 路径重写 地址拼接不要加上api</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">pathRewrite</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #98C379">&#39;^/api&#39;</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        },</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//无证书也正确代理  设置为false 默认为true</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">secure</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">false</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// 修改源  有这个服务器才看不出你是代理的</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">changeOrigin</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4、生产环境配置</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//webpack.prod.config.js</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// 生成打包文件前删除原有文件</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> { </span><span style="color: #E5C07B">CleanWebpackPlugin</span><span style="color: #ABB2BF"> } </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;clean-webpack-plugin&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// 复制文件</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">CopyWebpackPlugin</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;copy-webpack-plugin&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E5C07B">module</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">exports</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//生产模式  设置模式  production</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">mode</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;production&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//插件</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">plugins</span><span style="color: #ABB2BF">: [</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 一个个插件对象 一般是类</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">CleanWebpackPlugin</span><span style="color: #ABB2BF">(),</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//复制文件</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">CopyWebpackPlugin</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 匹配</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">patterns</span><span style="color: #ABB2BF">: [</span></span>
<span class="line"><span style="color: #ABB2BF">        {</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #7F848E; font-style: italic">// 从这里来</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #E06C75">from</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;public&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #7F848E; font-style: italic">// 到那里去</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #E06C75">to</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;./&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #7F848E; font-style: italic">// 配置</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #E06C75">globOptions</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">// 忽略</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E06C75">ignore</span><span style="color: #ABB2BF">: [</span><span style="color: #98C379">&#39;**/index.html&#39;</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">          },</span></span>
<span class="line"><span style="color: #ABB2BF">        },</span></span>
<span class="line"><span style="color: #ABB2BF">      ],</span></span>
<span class="line"><span style="color: #ABB2BF">    }),</span></span>
<span class="line"><span style="color: #ABB2BF">  ],</span></span>
<span class="line"><span style="color: #ABB2BF">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5、安装 webpack-merge 合并环境</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">webpack</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">merge</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">D</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>6、合并环境</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">// 导入合并环境</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> { </span><span style="color: #E5C07B">merge</span><span style="color: #ABB2BF"> } </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;webpack-merge&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// 引入公共环境</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">commonConfig</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;./webpack.comm.config&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//dev以及prod都是这样</span></span>
<span class="line"><span style="color: #E5C07B">module</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">exports</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">merge</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">commonConfig</span><span style="color: #ABB2BF">, {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//具体内容</span></span>
<span class="line"><span style="color: #ABB2BF">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>7、合并之后要修改环境</p>
<p>7.1、webpack.dev.config.js</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">// 导入合并环境</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> { </span><span style="color: #E5C07B">merge</span><span style="color: #ABB2BF"> } </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;webpack-merge&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// 引入公共环境</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">commonConfig</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;./webpack.comm.config&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E5C07B">module</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">exports</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">merge</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">commonConfig</span><span style="color: #ABB2BF">, {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//开发模式  设置模式  production</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">mode</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;development&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//一般是eval  建立js映射文件 方便代码的调试</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">devtool</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;source-map&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">// 热更新</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">devServer</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//webpack打包之后找不到资源从这找</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//connectBase这个有问题</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//mp3、mp4不想用copyWebpackPlugin复制时</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//可以用这个</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">static</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;./public&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 模块热替换(HMR)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 替换、添加、刷新模块,无需重新刷新整个页面</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 改变部分,就修改部分 而不刷新整个浏览器</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">hot</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 当前网段的ip地址都可以访问</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// host: &#39;0.0.0.0&#39;,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 自动打开浏览器</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// open:true,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 修改端口</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">port</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">8000</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// gzip压缩 前端优化</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">compress</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 跨域问题 代理</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">proxy</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 映射</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #98C379">&#39;/api&#39;</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// 映射地址</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">target</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;http://www.baidu.com&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// 路径重写 地址拼接不要加上api</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">pathRewrite</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #98C379">&#39;^/api&#39;</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        },</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//无证书也正确代理  设置为false 默认为true</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">secure</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">false</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// 修改源  有这个服务器才看不出你是代理的</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">changeOrigin</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>7.2、webpack.prod.config.js</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">// 导入合并环境</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> { </span><span style="color: #E5C07B">merge</span><span style="color: #ABB2BF"> } </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;webpack-merge&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// 引入公共环境</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">commonConfig</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;./webpack.comm.config&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// 生成打包文件前删除原有文件</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> { </span><span style="color: #E5C07B">CleanWebpackPlugin</span><span style="color: #ABB2BF"> } </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;clean-webpack-plugin&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// 复制文件</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">CopyWebpackPlugin</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;copy-webpack-plugin&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E5C07B">module</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">exports</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">merge</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">commonConfig</span><span style="color: #ABB2BF">, {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//生产模式  设置模式  production</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">mode</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;production&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//插件</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">plugins</span><span style="color: #ABB2BF">: [</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 一个个插件对象 一般是类</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">CleanWebpackPlugin</span><span style="color: #ABB2BF">(),</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//复制文件</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">CopyWebpackPlugin</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 匹配</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">patterns</span><span style="color: #ABB2BF">: [</span></span>
<span class="line"><span style="color: #ABB2BF">        {</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #7F848E; font-style: italic">// 从这里来</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #E06C75">from</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;./public&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #7F848E; font-style: italic">// 到那里去</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #E06C75">to</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;./&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #7F848E; font-style: italic">// 配置</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #E06C75">globOptions</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">// 忽略</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E06C75">ignore</span><span style="color: #ABB2BF">: [</span><span style="color: #98C379">&#39;**/index.html&#39;</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">          },</span></span>
<span class="line"><span style="color: #ABB2BF">        },</span></span>
<span class="line"><span style="color: #ABB2BF">      ],</span></span>
<span class="line"><span style="color: #ABB2BF">    }),</span></span>
<span class="line"><span style="color: #ABB2BF">  ],</span></span>
<span class="line"><span style="color: #ABB2BF">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>7.3、webpack.comm.config.js</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">path</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;path&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// 生成index.html文件</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">HtmlWebpackPlugin</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;html-webpack-plugin&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// 定义变量 base_url</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> { </span><span style="color: #E5C07B">DefinePlugin</span><span style="color: #ABB2BF"> } </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;webpack&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// vue解析工具2</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> { </span><span style="color: #E5C07B">VueLoaderPlugin</span><span style="color: #ABB2BF"> } </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;vue-loader/dist/index&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E5C07B">module</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">exports</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//和webpack-dev-server热更新一起使用的</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">target</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;web&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//    输入文件  从这个文件开始打包</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">entry</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;./src/main.js&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//   输出文件</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">output</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//   输出文件路径   路径拼接</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">path</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">path</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">resolve</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">__dirname</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;../build&#39;</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//   输出文件名称</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">filename</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;js/bundle.js&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// assetModuleFilename: &#39;img/[name]_[hash:6][ext]&#39;,</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//查找文件</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">resolve</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//自动加载文件夹下的index文件  resolve.mainFiles的默认值是index</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//默认扩展名  当查找的文件无扩展名时,默认添加,然后再查找</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">extensions</span><span style="color: #ABB2BF">: [</span><span style="color: #98C379">&#39;.js&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;.json&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;.mjs&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;.vue&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;.ts&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;.jsx&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;.tsx&#39;</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 起别名  解决路径关系</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">alias</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 常见起别名  &quot;@&quot; = &quot;./src&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #98C379">&#39;@&#39;</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">path</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">resolve</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">__dirname</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;../src&#39;</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//模块  object</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">module</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 规则 array</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">rules</span><span style="color: #ABB2BF">: [</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// less/css规则</span></span>
<span class="line"><span style="color: #ABB2BF">      {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">test</span><span style="color: #ABB2BF">:</span><span style="color: #E06C75"> /</span><span style="color: #E5C07B">\.</span><span style="color: #E06C75">(less</span><span style="color: #ABB2BF">|</span><span style="color: #E06C75">css)</span><span style="color: #C678DD">$</span><span style="color: #E06C75">/</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">use</span><span style="color: #ABB2BF">: [</span><span style="color: #98C379">&#39;style-loader&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;css-loader&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;less-loader&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;postcss-loader&#39;</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 图片</span></span>
<span class="line"><span style="color: #ABB2BF">      {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">test</span><span style="color: #ABB2BF">:</span><span style="color: #E06C75"> /.</span><span style="color: #E5C07B">\.</span><span style="color: #E06C75">(jpe</span><span style="color: #D19A66">?</span><span style="color: #E06C75">g</span><span style="color: #ABB2BF">|</span><span style="color: #E06C75">png</span><span style="color: #ABB2BF">|</span><span style="color: #E06C75">gif</span><span style="color: #ABB2BF">|</span><span style="color: #E06C75">svg)</span><span style="color: #C678DD">$</span><span style="color: #E06C75">/</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// type: &#39;asset/resource&#39;,     file-loader</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">type</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;asset&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//generator（生成器）是ES6标准引入的新的数据类型。一个generator看上去像一个函数，但可以返回多次。</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">generator</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #7F848E; font-style: italic">// 文件名字  img文件夹下  原文件夹名_哈希值6位+扩展名</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #E06C75">filename</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;img/[name]_[hash:6][ext]&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        },</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// 解析器</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">parser</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #7F848E; font-style: italic">// 数据url条件</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #E06C75">dataUrlCondition</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">// 小于120kb生成base64图片</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E06C75">maxSize</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">120</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1024</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">          },</span></span>
<span class="line"><span style="color: #ABB2BF">        },</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 字体2</span></span>
<span class="line"><span style="color: #ABB2BF">      {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">test</span><span style="color: #ABB2BF">:</span><span style="color: #E06C75"> /</span><span style="color: #E5C07B">\.</span><span style="color: #E06C75">(eot</span><span style="color: #ABB2BF">|</span><span style="color: #E06C75">ttf</span><span style="color: #ABB2BF">|</span><span style="color: #E06C75">woff2</span><span style="color: #D19A66">?</span><span style="color: #E06C75">)</span><span style="color: #C678DD">$</span><span style="color: #E06C75">/</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">type</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;asset/resource&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">generator</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #E06C75">filename</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;font/[name]_[hash:6][ext]&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        },</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// js</span></span>
<span class="line"><span style="color: #ABB2BF">      {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">test</span><span style="color: #ABB2BF">:</span><span style="color: #E06C75"> /</span><span style="color: #E5C07B">\.</span><span style="color: #E06C75">js</span><span style="color: #C678DD">$</span><span style="color: #E06C75">/</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">loader</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;babel-loader&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//vue</span></span>
<span class="line"><span style="color: #ABB2BF">      {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">test</span><span style="color: #ABB2BF">:</span><span style="color: #E06C75"> /</span><span style="color: #E5C07B">\.</span><span style="color: #E06C75">vue</span><span style="color: #C678DD">$</span><span style="color: #E06C75">/</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">loader</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;vue-loader&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">    ],</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">// 插件</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">plugins</span><span style="color: #ABB2BF">: [</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 生成index.html文件</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">HtmlWebpackPlugin</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 依照这个模板生成的index.html(vue)</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;./public/index.html&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// index.html里的标题读的是这个</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">title</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;webpack5&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }),</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 定义变量</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">DefinePlugin</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//const url = &quot;./&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//BASE_URL: &quot;url&quot;,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">BASE_URL</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;&#39;./&#39;&quot;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 是否支持vue2</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">__VUE_OPTIONS_API__</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 是否在生产阶段调试</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">__VUE_PROD_DEVTOOLS__</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">false</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }),</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 加载vue所需要的插件</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">VueLoaderPlugin</span><span style="color: #ABB2BF">(),</span></span>
<span class="line"><span style="color: #ABB2BF">  ],</span></span>
<span class="line"><span style="color: #ABB2BF">};</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>8、package.json 配置</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//npm run build 开发环境</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//npm run server 生产环境</span></span>
<span class="line"><span style="color: #98C379">&quot;scripts&quot;</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #98C379">&quot;build&quot;</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;webpack --config ./config/webpack.prod.config.js&quot;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #98C379">&quot;server&quot;</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;webpack server --config ./config/webpack.dev.config.js&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">  }</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="vuecli" tabindex="-1"><a class="header-anchor" href="#vuecli" aria-hidden="true">#</a> VueCli</h2>
<p>全局安装 vue-cli</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> @</span><span style="color: #E06C75">vue</span><span style="color: #56B6C2">/</span><span style="color: #E06C75">cli</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E06C75">g</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//更新</span></span>
<span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">update</span><span style="color: #ABB2BF"> @</span><span style="color: #E06C75">vue</span><span style="color: #56B6C2">/</span><span style="color: #E06C75">cli</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E06C75">g</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>创建项目</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #E06C75">vue</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">create</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">项目的名称</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>第一步 选择配置</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #E06C75">Vue</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">CLI</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">v4</span><span style="color: #ABB2BF">.</span><span style="color: #D19A66">5.14</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//选择预设</span></span>
<span class="line"><span style="color: #C678DD">?</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">Please</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">pick</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">a</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">preset</span><span style="color: #C678DD">:</span><span style="color: #ABB2BF"> (</span><span style="color: #E06C75">Use</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">arrow</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">keys</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//保存的预设  包括babel(兼容浏览器) router路由 eslint语法检查</span></span>
<span class="line"><span style="color: #56B6C2">&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">my_preset_02</span><span style="color: #ABB2BF"> ([</span><span style="color: #E06C75">Vue</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">] </span><span style="color: #E06C75">babel</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">router</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">eslint</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//默认vue2</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">Default</span><span style="color: #ABB2BF"> ([</span><span style="color: #E06C75">Vue</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">] </span><span style="color: #E06C75">babel</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">eslint</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//默认vue3</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">Default</span><span style="color: #ABB2BF"> (</span><span style="color: #E06C75">Vue</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">) ([</span><span style="color: #E06C75">Vue</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">] </span><span style="color: #E06C75">babel</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">eslint</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//自定义</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">Manually</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">select</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">features</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>第二步 自定义配置</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//自定义选择  空格选中 enter下一步 a全选  *表示选中</span></span>
<span class="line"><span style="color: #C678DD">?</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">Check</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">the</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">features</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">needed</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">for</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">your</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">project</span><span style="color: #C678DD">:</span><span style="color: #ABB2BF"> (</span><span style="color: #E06C75">Press</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">&lt;</span><span style="color: #E06C75">space</span><span style="color: #56B6C2">&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">to</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">select</span><span style="color: #ABB2BF">, &lt;</span><span style="color: #E06C75">a</span><span style="color: #ABB2BF">&gt; to toggle all, &lt;</span><span style="color: #E06C75">i</span><span style="color: #ABB2BF">&gt; to invert selection)</span></span>
<span class="line"><span style="color: #ABB2BF"> //是否选择vue版本</span></span>
<span class="line"><span style="color: #ABB2BF">&gt;(*) Choose Vue version</span></span>
<span class="line"><span style="color: #ABB2BF"> //babel兼容浏览器</span></span>
<span class="line"><span style="color: #ABB2BF"> (*) Babel</span></span>
<span class="line"><span style="color: #ABB2BF"> //是否支持ts</span></span>
<span class="line"><span style="color: #ABB2BF"> (*) TypeScript</span></span>
<span class="line"><span style="color: #ABB2BF"> //是否支持pwa(一般不选)</span></span>
<span class="line"><span style="color: #ABB2BF"> ( ) Progressive Web App (PWA) Support</span></span>
<span class="line"><span style="color: #ABB2BF"> //路由</span></span>
<span class="line"><span style="color: #ABB2BF"> (*) Router</span></span>
<span class="line"><span style="color: #ABB2BF"> //vuex状态管理</span></span>
<span class="line"><span style="color: #ABB2BF"> (*) Vuex</span></span>
<span class="line"><span style="color: #ABB2BF"> //css预处理器</span></span>
<span class="line"><span style="color: #ABB2BF"> (*) CSS Pre-processors</span></span>
<span class="line"><span style="color: #ABB2BF"> //是否选择ESLint对代码进行格式化选择</span></span>
<span class="line"><span style="color: #ABB2BF"> (*) Linter / Formatter</span></span>
<span class="line"><span style="color: #ABB2BF"> //单元测试(一般不选)</span></span>
<span class="line"><span style="color: #ABB2BF"> ( ) Unit Testing</span></span>
<span class="line"><span style="color: #ABB2BF"> //E2E测试(一般不选)</span></span>
<span class="line"><span style="color: #ABB2BF"> ( ) E2E Testing</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>第三步 选择 vue 版本</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #abb2bf">? Choose a version of Vue.js that you want to start the project with (Use arrow keys)</span></span>
<span class="line"><span style="color: #abb2bf">  2.x</span></span>
<span class="line"><span style="color: #abb2bf">&gt; 3.x</span></span>
<span class="line"><span style="color: #abb2bf"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>第四步 是否使用 babel 做转义()</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #C678DD">?</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">Use</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">class</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">style</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">component</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">syntax</span><span style="color: #C678DD">?</span><span style="color: #ABB2BF"> (</span><span style="color: #E06C75">y</span><span style="color: #56B6C2">/</span><span style="color: #E5C07B">N</span><span style="color: #ABB2BF">)  </span><span style="color: #E06C75">y</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>第五步 使用 Babel 与 TypeScript 一起用于自动检测的填充</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #C678DD">?</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">Use</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">Babel</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">alongside</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">TypeScript</span><span style="color: #ABB2BF"> (</span><span style="color: #E06C75">required</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">for</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">modern</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">mode</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">auto</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">detected</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">polyfills</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">transpiling</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">JSX</span><span style="color: #ABB2BF">)</span><span style="color: #C678DD">?</span><span style="color: #ABB2BF"> (</span><span style="color: #E5C07B">Y</span><span style="color: #56B6C2">/</span><span style="color: #E06C75">n</span><span style="color: #ABB2BF">)  </span><span style="color: #E06C75">y</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>第六步 路由模式(<strong>在 url 中 hash 带了一个很丑的 # 而 history 是没有#的</strong>)</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #abb2bf">? Use history mode for router? (Requires proper server setup for index fallback in production) (Y/n) y</span></span>
<span class="line"><span style="color: #abb2bf"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>第七步 选择 css 预处理器</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #C678DD">?</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">Pick</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">a</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">CSS</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">pre</span><span style="color: #56B6C2">-</span><span style="color: #61AFEF">processor</span><span style="color: #ABB2BF"> (</span><span style="color: #E06C75">PostCSS</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">Autoprefixer</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">and</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">CSS</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">Modules</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">are</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">supported</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">by</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">default</span><span style="color: #ABB2BF">)</span><span style="color: #C678DD">:</span><span style="color: #ABB2BF"> (</span><span style="color: #E06C75">Use</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">arrow</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">keys</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">Sass</span><span style="color: #56B6C2">/</span><span style="color: #61AFEF">SCSS</span><span style="color: #ABB2BF"> (</span><span style="color: #E06C75">with</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">dart</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">sass</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">Sass</span><span style="color: #56B6C2">/</span><span style="color: #61AFEF">SCSS</span><span style="color: #ABB2BF"> (</span><span style="color: #E06C75">with</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">node</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">sass</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #56B6C2">&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">Less</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">Stylus</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>第八步 ESLint 选择:提供一个插件化的 javascript 代码检测工具</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #C678DD">?</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">Pick</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">a</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">linter</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">/</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">formatter</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">config</span><span style="color: #C678DD">:</span><span style="color: #ABB2BF"> (</span><span style="color: #E06C75">Use</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">arrow</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">keys</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//只有错误预防</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">ESLint</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">with</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">error</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">prevention</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">only</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//Airbnb 配置</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">ESLint</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">Airbnb</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">config</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//标准配置</span></span>
<span class="line"><span style="color: #56B6C2">&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">ESLint</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">Standard</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">config</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//使用较多  (漂亮的配置)</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">ESLint</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">Prettier</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">TSLint</span><span style="color: #ABB2BF"> (</span><span style="color: #E06C75">deprecated</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>第九步 何时检测</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF"> </span><span style="color: #E06C75">Pick</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">additional</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">lint</span><span style="color: #ABB2BF"> features: (</span><span style="color: #E06C75">Press</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">&lt;</span><span style="color: #E06C75">space</span><span style="color: #56B6C2">&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">to</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">select</span><span style="color: #ABB2BF">, &lt;</span><span style="color: #E06C75">a</span><span style="color: #ABB2BF">&gt; to toggle all, &lt;</span><span style="color: #E06C75">i</span><span style="color: #ABB2BF">&gt; to invert selection)</span></span>
<span class="line"><span style="color: #ABB2BF"> // 保存就检测</span></span>
<span class="line"><span style="color: #ABB2BF">&gt;(*) Lint on save</span></span>
<span class="line"><span style="color: #ABB2BF"> // fix和commit时候检查</span></span>
<span class="line"><span style="color: #ABB2BF"> ( ) Lint and fix on commit</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>第十步 将配置信息放哪</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #abb2bf">? Where do you prefer placing config for Babel, ESLint, etc.? (Use arrow keys)</span></span>
<span class="line"><span style="color: #abb2bf">&gt; In dedicated config files  //放在独立的文件里</span></span>
<span class="line"><span style="color: #abb2bf">  In package.json</span></span>
<span class="line"><span style="color: #abb2bf"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>第十一步 是否保存预设</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #C678DD">?</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">Save</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">as</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">a</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">preset</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">for</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">future</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">projects</span><span style="color: #C678DD">?</span><span style="color: #ABB2BF"> (</span><span style="color: #E06C75">y</span><span style="color: #56B6C2">/</span><span style="color: #E5C07B">N</span><span style="color: #ABB2BF">)  </span><span style="color: #E06C75">n</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>第十二步 目标浏览器</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">.</span><span style="color: #E06C75">browserslistrc</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//浏览器份额要在1%以上 最新两个版本 还在更新</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="vite" tabindex="-1"><a class="header-anchor" href="#vite" aria-hidden="true">#</a> Vite</h2>
<p>安装 vite</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//局部安装</span></span>
<span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">vite</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">D</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//全局安装</span></span>
<span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">vite</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E06C75">g</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>运行</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #E06C75">npx</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">vite</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>配置 vite</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//处理less</span></span>
<span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">less</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">D</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//-------------------------------------------------------------------------------------------</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//处理浏览器前缀</span></span>
<span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">postcss</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">D</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//postcss依赖包</span></span>
<span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">postcss</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">preset</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">env</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">D</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//postcss.config.js配置</span></span>
<span class="line"><span style="color: #E5C07B">module</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">exports</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">plugins</span><span style="color: #ABB2BF">: [</span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;postcss-preset-env&#39;</span><span style="color: #ABB2BF">)],</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//-------------------------------------------------------------------------------------------</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//默认支持ts</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//安装vue3</span></span>
<span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">vue</span><span style="color: #ABB2BF">@</span><span style="color: #E06C75">next</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">D</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>vite 对 vue 的支持</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//vite对vue提供第一优先级支持：</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//Vue 3 单文件组件支持：@vitejs/plugin-vue</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//Vue 3 JSX 支持：@vitejs/plugin-vue-jsx</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//Vue 2 支持：underfin/vite-plugin-vue2</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//-------------------------------------------------------------------------------------------</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//对vue3单文件需要的插件</span></span>
<span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> @</span><span style="color: #E06C75">vitejs</span><span style="color: #56B6C2">/</span><span style="color: #E06C75">plugin</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">vue</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">D</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//vite.config.js配置</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">vue</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">require</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;@vitejs/plugin-vue&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E5C07B">module</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">exports</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">plugins</span><span style="color: #ABB2BF">: [</span><span style="color: #61AFEF">vue</span><span style="color: #ABB2BF">()],</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//-------------------------------------------------------------------------------------------</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//需要依赖该插件</span></span>
<span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> @</span><span style="color: #E06C75">vue</span><span style="color: #56B6C2">/</span><span style="color: #E06C75">compiler</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">sfc</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">D</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>vite 打包</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #abb2bf">npx vite build</span></span>
<span class="line"><span style="color: #abb2bf"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>打包后预览</p>
<div class="language-text ext-text line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #abb2bf">npx vite preview</span></span>
<span class="line"><span style="color: #abb2bf"></span></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>修改 package.json</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #98C379">&quot;scripts&quot;</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//运行 开发阶段</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #98C379">&quot;serve&quot;</span><span style="color: #ABB2BF">:</span><span style="color: #98C379">&quot;vite&quot;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//打包 生产阶段</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #98C379">&quot;build&quot;</span><span style="color: #ABB2BF">:</span><span style="color: #98C379">&quot;vite build&quot;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//预览  打包后预览</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #98C379">&quot;preview&quot;</span><span style="color: #ABB2BF">:</span><span style="color: #98C379">&quot;vite preview&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>vite的安装</p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//全局安装vite脚手架</span></span>
<span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> @</span><span style="color: #E06C75">vitejs</span><span style="color: #56B6C2">/</span><span style="color: #E06C75">create</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">app</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">-</span><span style="color: #E06C75">g</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//创建项目</span></span>
<span class="line"><span style="color: #E06C75">create</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">app</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">项目名</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//官方  省略了脚手架的安装</span></span>
<span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">init</span><span style="color: #ABB2BF"> @</span><span style="color: #E06C75">vitejs</span><span style="color: #56B6C2">/</span><span style="color: #E06C75">app</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="组件化" tabindex="-1"><a class="header-anchor" href="#组件化" aria-hidden="true">#</a> 组件化</h2>
<h3 id="样式穿透小-bug" tabindex="-1"><a class="header-anchor" href="#样式穿透小-bug" aria-hidden="true">#</a> 样式穿透小 bug</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//父组件</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;父亲&lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">/&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">//子组件  根元素都是h2  会出现样式穿透</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;孩子&lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">/&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="父子通信" tabindex="-1"><a class="header-anchor" href="#父子通信" aria-hidden="true">#</a> 父子通信</h3>
<h4 id="父传子" tabindex="-1"><a class="header-anchor" href="#父传子" aria-hidden="true">#</a> 父传子</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">静态通信</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//-----------------------------------</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//父组件</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">son</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">message</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;我是你xx&quot;</span><span style="color: #ABB2BF">&gt;&lt;/</span><span style="color: #E06C75">son</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//子组件</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{</span><span style="color: #E06C75">message</span><span style="color: #ABB2BF">}</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//我是你xx</span></span>
<span class="line"><span style="color: #ABB2BF">props: [</span><span style="color: #98C379">&quot;message&quot;</span><span style="color: #ABB2BF">]</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//-----------------------------------</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">动态通信</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//-----------------------------------</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//父组件</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//这里有个:  v-bind 将数据中的message传给子组件</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">son</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:message=&quot;message&quot;&gt;&lt;/son&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">data()</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">return</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">    	</span><span style="color: #E06C75">message</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;hello world&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//子组件</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//hello world(父组件传过来的)</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;h2&gt;{{message}}&lt;/h2&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//我是你xx</span></span>
<span class="line"><span style="color: #FFFFFF">props:</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">[&quot;message&quot;]</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//-----------------------------------</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="类型验证" tabindex="-1"><a class="header-anchor" href="#类型验证" aria-hidden="true">#</a> 类型验证</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">动态通信</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//-----------------------------------</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//父组件</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//这里有个:  v-bind 将数据中的message传给子组件</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">son</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:message=&quot;message&quot;&gt;&lt;/son&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">data()</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">return</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">    	</span><span style="color: #E06C75">message</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;hello world&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//子组件</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//hello world(父组件传过来的)</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;h2&gt;{{message}}&lt;/h2&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//我是你xx</span></span>
<span class="line"><span style="color: #FFFFFF">props:</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">message</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//类型为字符串</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">type</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">String</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//必须传值</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">require</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//默认为空</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">default</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//require和default二选一就行</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//-----------------------------------</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="细节" tabindex="-1"><a class="header-anchor" href="#细节" aria-hidden="true">#</a> 细节</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">对象钩</span><span style="color: #ABB2BF">  √</span></span>
<span class="line"><span style="color: #ABB2BF">props: {</span></span>
<span class="line"><span style="color: #ABB2BF">    goods: {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//类型为对象</span></span>
<span class="line"><span style="color: #ABB2BF">        type: </span><span style="color: #E5C07B">Object</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//必须返回一个函数 返回空对象的话,引用地址是同一个,一个改则所有的都改了</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//default:()=&gt;({}),</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD">default</span><span style="color: #ABB2BF">(){</span><span style="color: #E06C75">retutn</span><span style="color: #ABB2BF"> {}}</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">验证函数</span></span>
<span class="line"><span style="color: #ABB2BF">props: {</span></span>
<span class="line"><span style="color: #ABB2BF">    gender: {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">validator</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF">){</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">//是否包含在内</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> [</span><span style="color: #98C379">&quot;male&quot;</span><span style="color: #ABB2BF">,</span><span style="color: #98C379">&quot;female&quot;</span><span style="color: #ABB2BF">].</span><span style="color: #61AFEF">includes</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        }</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">传入函数</span></span>
<span class="line"><span style="color: #ABB2BF">props: {</span></span>
<span class="line"><span style="color: #ABB2BF">    fn: {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//类型是函数</span></span>
<span class="line"><span style="color: #ABB2BF">        type:</span><span style="color: #E5C07B">Function</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD">default</span><span style="color: #ABB2BF">(){</span></span>
<span class="line"><span style="color: #ABB2BF">        	</span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&quot;default function&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">        }</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="非-prop-的-attribute" tabindex="-1"><a class="header-anchor" href="#非-prop-的-attribute" aria-hidden="true">#</a> 非 Prop 的 Attribute</h4>
<p><strong>Attribute(属性:类似 class,src)继承</strong></p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">父组件</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">son</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;son&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">id</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;son&quot;</span><span style="color: #ABB2BF">&gt;&lt;/</span><span style="color: #E06C75">son</span><span style="color: #ABB2BF">&gt;   </span><span style="color: #7F848E; font-style: italic">//子组件</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//当组件有单个根节点时，非Prop的Attribute将自动添加到根节点的Attribute中!</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//如果我们不希望组件的根元素继承attribute，可以在子组件中设置</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">子组件</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//inheritAttrs: false;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//禁用attribute继承的常见情况是需要将attribute应用于根元素之外的其他元素；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//我们可以通过 $attrs来访问所有的 非props的attribute</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">子组件</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//绑定单个属性</span></span>
<span class="line"><span style="color: #ABB2BF">:</span><span style="color: #C678DD">class</span><span style="color: #ABB2BF"> = &quot;</span><span style="color: #E5C07B">$attrs</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">class</span><span style="color: #ABB2BF">&quot;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//------------------------------------------------</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//绑定多个属性</span></span>
<span class="line"><span style="color: #E5C07B">v</span><span style="color: #ABB2BF">-</span><span style="color: #E5C07B">bind</span><span style="color: #ABB2BF">=&quot;</span><span style="color: #E5C07B">$attrs</span><span style="color: #ABB2BF">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//多个根节点的attribute</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//多个根节点的attribute如果没有显示的绑定，那么会报警告，我们必须手动的指定要绑定到哪一个属性上</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E5C07B">子组件</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E5C07B">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	 &lt;</span><span style="color: #E5C07B">h2</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">:</span><span style="color: #E5C07B">class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;$attrs.class&quot;</span><span style="color: #ABB2BF">&gt;&lt;/</span><span style="color: #E5C07B">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">     &lt;</span><span style="color: #E5C07B">h2</span><span style="color: #ABB2BF">&gt;&lt;/</span><span style="color: #E5C07B">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">     &lt;</span><span style="color: #E5C07B">h2</span><span style="color: #ABB2BF">&gt;&lt;/</span><span style="color: #E5C07B">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E5C07B">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="子传父" tabindex="-1"><a class="header-anchor" href="#子传父" aria-hidden="true">#</a> 子传父</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">父祖件</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;当前计数:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	//监听子组件传来的函数</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">children</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@add=&quot;add&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@sub=&quot;sub&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@addN=&quot;addN&quot;&gt;&lt;/children&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;/div&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">Children</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./Children.vue&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">components</span><span style="color: #ABB2BF">: { </span><span style="color: #E06C75">Children</span><span style="color: #ABB2BF"> },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">data</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    return {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">methods:</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">add</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">      this.counter++</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">sub</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">      this.counter--</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">addN</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">      this.counter += </span><span style="color: #E06C75">value</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">#子组件</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;template&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;increment&quot;&gt;+1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;decrement&quot;&gt;-1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;input</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;text&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">v-model.number.lazy=&quot;num&quot;</span><span style="color: #ABB2BF"> /&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;incrementN&quot;&gt;+{{</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">num</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">}}&lt;/button&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">// emits: [&#39;add&#39;, &#39;sub&#39;, &#39;addN&#39;],</span></span>
<span class="line"><span style="color: #ABB2BF">  #</span><span style="color: #E06C75">写对象是为了参数验证</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">emits</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">add</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">null</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">sub</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">null</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">addN</span><span style="color: #ABB2BF">: (</span><span style="color: #E06C75; font-style: italic">payload</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #C678DD">if</span><span style="color: #ABB2BF"> (</span><span style="color: #E06C75">payload</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">true</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">false</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">data</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    return {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">num</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">methods:</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">increment</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//子传父 不带参</span></span>
<span class="line"><span style="color: #ABB2BF">      this.$emit(</span><span style="color: #98C379">&#39;add&#39;</span><span style="color: #E06C75">)</span></span>
<span class="line"><span style="color: #E06C75">    },</span></span>
<span class="line"><span style="color: #E06C75">    decrement() {</span></span>
<span class="line"><span style="color: #E06C75">      this.$emit(</span><span style="color: #98C379">&#39;sub&#39;</span><span style="color: #E06C75">)</span></span>
<span class="line"><span style="color: #E06C75">    },</span></span>
<span class="line"><span style="color: #E06C75">    incrementN() {</span></span>
<span class="line"><span style="color: #E06C75">      </span><span style="color: #7F848E; font-style: italic">//子传父 带参数</span></span>
<span class="line"><span style="color: #E06C75">      this.$emit(</span><span style="color: #98C379">&#39;addN&#39;</span><span style="color: #ABB2BF">, this.num)</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="小型案例-tab-栏" tabindex="-1"><a class="header-anchor" href="#小型案例-tab-栏" aria-hidden="true">#</a> 小型案例-tab 栏</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">父组件</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E5C07B">tab-control</span></span>
<span class="line"><span style="color: #ABB2BF">	  </span><span style="color: #7F848E; font-style: italic">//把标题传给子组件</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #FFFFFF">:titles=&quot;titles&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">	  </span><span style="color: #7F848E; font-style: italic">//监听子组件传过来的事件$emit()</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #FFFFFF">@changeCurrent=&quot;currentIndex</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">=</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">$event&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">    &gt;&lt;/</span><span style="color: #E5C07B">tab-control</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ contents[</span><span style="color: #E06C75">currentIndex</span><span style="color: #ABB2BF">]</span><span style="color: #E06C75"> }}&lt;/h2&gt;</span></span>
<span class="line"><span style="color: #E06C75">  &lt;/div&gt;</span></span>
<span class="line"><span style="color: #E06C75">&lt;/template&gt;</span></span>
<span class="line"><span style="color: #E06C75">&lt;script&gt;</span></span>
<span class="line"><span style="color: #E06C75">import tabControl from &#39;./components/tabControl.vue&#39;</span></span>
<span class="line"><span style="color: #E06C75">export default {</span></span>
<span class="line"><span style="color: #E06C75">  components</span><span style="color: #ABB2BF">: { </span><span style="color: #E06C75">tabControl</span><span style="color: #ABB2BF"> },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">data</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">titles</span><span style="color: #ABB2BF">: [</span><span style="color: #98C379">&#39;衣服&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;鞋子&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;裤子&#39;</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">contents</span><span style="color: #ABB2BF">: [</span><span style="color: #98C379">&#39;衣服页面&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;鞋子页面&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;裤子页面&#39;</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">currentIndex</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #56B6C2">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #56B6C2">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">子组件</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;tab-control&quot;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">div</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #D19A66; font-style: italic">class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;tab-control-item&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">	 </span><span style="color: #7F848E; font-style: italic">//循环父组件传的数组</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #D19A66; font-style: italic">v-for</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;(title, index) in titles&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #FFFFFF">:key=&quot;title&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">	  </span><span style="color: #7F848E; font-style: italic">//点击是切换index</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #FFFFFF">@click=&quot;changeCurrent(index)&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">	  </span><span style="color: #7F848E; font-style: italic">//只有index对的上  才有样式</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #FFFFFF">:class=&quot;{</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">current:</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">index</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">===</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">currentIndex</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">}&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">    &gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      &lt;</span><span style="color: #E06C75">span</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">title</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">span</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//接收父组件的数组</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">props</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">titles</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">type</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">Array</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">default</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> []</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">data</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    return {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">currentIndex</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  methods: </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">changeCurrent</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">index</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">      this.</span><span style="color: #E06C75">currentIndex</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">index</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//index改变时,传给父组件</span></span>
<span class="line"><span style="color: #ABB2BF">      this.$emit(</span><span style="color: #98C379">&#39;changeCurrent&#39;</span><span style="color: #ABB2BF">, this.currentIndex)</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">style</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;less&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">scoped</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">/* 样式 */</span></span>
<span class="line"><span style="color: #ABB2BF">.tab-control </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">display</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">flex</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">.tab-control-item </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">flex</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">text</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">align</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">center</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">cursor</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">pointer</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">//样式给span</span></span>
<span class="line"><span style="color: #ABB2BF">.current span </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">padding</span><span style="color: #ABB2BF">: 3</span><span style="color: #E06C75">px</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">border</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">bottom</span><span style="color: #ABB2BF">: 2.5</span><span style="color: #E06C75">px</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">solid</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">skyblue</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">style</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="非父子组件通信" tabindex="-1"><a class="header-anchor" href="#非父子组件通信" aria-hidden="true">#</a> 非父子组件通信</h3>
<h4 id="单向数据流" tabindex="-1"><a class="header-anchor" href="#单向数据流" aria-hidden="true">#</a> 单向数据流</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">父孙传值</span><span style="color: #ABB2BF">  </span><span style="color: #E06C75">provide和inject</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">父组件</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">computed</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue&#39;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//   provide:{}</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//   要用this的话要写成函数 默认写成函数</span></span>
<span class="line"><span style="color: #61AFEF">provide</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// length: this.names.length  非响应式</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">length</span><span style="color: #ABB2BF">: </span><span style="color: #61AFEF">computed</span><span style="color: #ABB2BF">(() </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">names</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">length</span><span style="color: #ABB2BF">) </span><span style="color: #7F848E; font-style: italic">//响应式</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">孙组件</span></span>
<span class="line"><span style="color: #ABB2BF">{{ </span><span style="color: #E5C07B">length</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF"> }}  </span><span style="color: #7F848E; font-style: italic">//使用</span></span>
<span class="line"><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">default</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">inject</span><span style="color: #ABB2BF">: [</span><span style="color: #98C379">&#39;length&#39;</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="双向数据流-eventbus-事件总线" tabindex="-1"><a class="header-anchor" href="#双向数据流-eventbus-事件总线" aria-hidden="true">#</a> 双向数据流(eventBus:事件总线)</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">vue3移除了$on</span><span style="color: #ABB2BF">、</span><span style="color: #E06C75">$off</span><span style="color: #ABB2BF">、</span><span style="color: #E06C75">$once方法</span><span style="color: #ABB2BF">，但是推荐了一些库:</span><span style="color: #E06C75">mitt</span><span style="color: #ABB2BF">、</span><span style="color: #E06C75">tiny</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">emitter</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">兄弟之间也能互相传递</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//安装mitt</span></span>
<span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">mitt</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//eventBus</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">mitt</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;mitt&#39;</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">emitter</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">mitt</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">default</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">emitter</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//兄</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">emitter</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;../utils/eventBus&#39;</span></span>
<span class="line"><span style="color: #61AFEF">btnClick</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;为兄&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">emitter</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">emit</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;love&#39;</span><span style="color: #ABB2BF">, { </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;XiaoZiYan&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">18</span><span style="color: #ABB2BF"> })</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//弟的孩子</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">emitter</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;../utils/eventBus&#39;</span></span>
<span class="line"><span style="color: #61AFEF">created</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">emitter</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">on</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;love&#39;</span><span style="color: #ABB2BF">, (</span><span style="color: #E06C75; font-style: italic">info</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">info</span><span style="color: #ABB2BF">)</span><span style="color: #7F848E; font-style: italic">// { name: &#39;XiaoZiYan&#39;, age: 18 }</span></span>
<span class="line"><span style="color: #ABB2BF">    })</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//监听所有事件  type:love  info: { name: &#39;XiaoZiYan&#39;, age: 18 }</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">emitter</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">on</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;*&#39;</span><span style="color: #ABB2BF">, (</span><span style="color: #E06C75; font-style: italic">type</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">info</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">type</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">info</span><span style="color: #ABB2BF">) </span><span style="color: #7F848E; font-style: italic">//love { name: &#39;XiaoZiYan&#39;, age: 18 }</span></span>
<span class="line"><span style="color: #ABB2BF">    })</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//事件销毁的时候</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//取消所有监听</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">emitter</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">all</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">clear</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//取消某一个监听</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//具体处理逻辑写成一个函数</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">onFoo</span><span style="color: #ABB2BF">() {}</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">emitter</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">on</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;foo&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">onFoo</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">emitter</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">off</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;foo&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">onFoo</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="插槽" tabindex="-1"><a class="header-anchor" href="#插槽" aria-hidden="true">#</a> 插槽</h2>
<h3 id="基本使用" tabindex="-1"><a class="header-anchor" href="#基本使用" aria-hidden="true">#</a> 基本使用</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E5C07B">App</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    Vue2</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E5C07B">my-slot</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF">&gt;我是按钮&lt;/</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;/</span><span style="color: #E5C07B">my-slot</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E5C07B">my-slot</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      &lt;</span><span style="color: #E5C07B">my-button</span><span style="color: #ABB2BF">&gt;&lt;/</span><span style="color: #E5C07B">my-button</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;/</span><span style="color: #E5C07B">my-slot</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E5C07B">my-slot</span><span style="color: #ABB2BF">&gt; &lt;/</span><span style="color: #E5C07B">my-slot</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E5C07B">my-slot</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      //这个会有三份,因为它是默认把这些放在一个插槽,而有三个插槽</span></span>
<span class="line"><span style="color: #ABB2BF">      //如果想要平均分配的话，可以使用具名插槽</span></span>
<span class="line"><span style="color: #ABB2BF">      &lt;</span><span style="color: #E06C75">h1</span><span style="color: #ABB2BF">&gt;肖&lt;/</span><span style="color: #E06C75">h1</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;紫嫣&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	  &lt;</span><span style="color: #E06C75">h3</span><span style="color: #ABB2BF">&gt;我喜欢你&lt;/</span><span style="color: #E06C75">h3</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;/</span><span style="color: #E5C07B">my-slot</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">import MySlot from &#39;./MySlot.vue&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">import MyButton from &#39;./MyButton.vue&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">components</span><span style="color: #ABB2BF">: { </span><span style="color: #E06C75">MySlot</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">MyButton</span><span style="color: #ABB2BF"> },</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">MySlot</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;组件开始&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">slot</span><span style="color: #ABB2BF">&gt;&lt;</span><span style="color: #E06C75">i</span><span style="color: #ABB2BF">&gt;我是默认的i元素&lt;/</span><span style="color: #E06C75">i</span><span style="color: #ABB2BF">&gt; &lt;/</span><span style="color: #E06C75">slot</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">slot</span><span style="color: #ABB2BF">&gt;&lt;</span><span style="color: #E06C75">i</span><span style="color: #ABB2BF">&gt;我是默认的i元素&lt;/</span><span style="color: #E06C75">i</span><span style="color: #ABB2BF">&gt; &lt;/</span><span style="color: #E06C75">slot</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">slot</span><span style="color: #ABB2BF">&gt;&lt;</span><span style="color: #E06C75">i</span><span style="color: #ABB2BF">&gt;我是默认的i元素&lt;/</span><span style="color: #E06C75">i</span><span style="color: #ABB2BF">&gt; &lt;/</span><span style="color: #E06C75">slot</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;组件结束&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">MyButton</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF">&gt;Xiao Button&lt;/</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="具名插槽" tabindex="-1"><a class="header-anchor" href="#具名插槽" aria-hidden="true">#</a> 具名插槽</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">父组件</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    //把name的值传给子组件</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E5C07B">nav-bar</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:name=&quot;name&quot;&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//具名插槽left  v-slot:left</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #FFFFFF">#也可以简写成</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">#left</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #FFFFFF">&lt;template</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">v-slot</span><span style="color: #ABB2BF">:</span><span style="color: #D19A66; font-style: italic">left</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">        &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF">&gt;左边的按钮&lt;/</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      &lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      &lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">#center&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #FFFFFF">&lt;h2&gt;我是标题&lt;/h2&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #FFFFFF">&lt;template</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">v-slot</span><span style="color: #ABB2BF">:</span><span style="color: #D19A66; font-style: italic">right</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">        &lt;</span><span style="color: #E06C75">i</span><span style="color: #ABB2BF">&gt;右边的i元素&lt;/</span><span style="color: #E06C75">i</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      &lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	  //动态插槽  不能#name,只能#[name]或v-slot:[name]</span></span>
<span class="line"><span style="color: #ABB2BF">      &lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">#[name]&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #FFFFFF">&lt;i&gt;额外的元素&lt;/i&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;/nav-bar&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;/div&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">NavBar</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./NavBar.vue&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">components</span><span style="color: #ABB2BF">: { </span><span style="color: #E06C75">NavBar</span><span style="color: #ABB2BF"> },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">data</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    return {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;Xiao&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">#子组件</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;template&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;div</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;nav-bar&quot;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;left&quot;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      &lt;</span><span style="color: #E06C75">slot</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">name</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;left&quot;</span><span style="color: #ABB2BF">&gt;&lt;/</span><span style="color: #E06C75">slot</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;center&quot;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      &lt;</span><span style="color: #E06C75">slot</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">name</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;center&quot;</span><span style="color: #ABB2BF">&gt;&lt;/</span><span style="color: #E06C75">slot</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;right&quot;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      &lt;</span><span style="color: #E06C75">slot</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">name</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;right&quot;</span><span style="color: #ABB2BF">&gt;&lt;/</span><span style="color: #E06C75">slot</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;addition&quot;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      //动态读取父组件传来的name</span></span>
<span class="line"><span style="color: #ABB2BF">      &lt;</span><span style="color: #E06C75">slot</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:name=&quot;name&quot;&gt;&lt;/slot&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;/div&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;/div&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">props</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">String</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;style</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;less&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">scoped</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">/* 样式 */</span></span>
<span class="line"><span style="color: #ABB2BF">.nav-bar </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">display</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">flex</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">height</span><span style="color: #ABB2BF">: 44</span><span style="color: #E06C75">px</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">line</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">height</span><span style="color: #ABB2BF">: 44</span><span style="color: #E06C75">px</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">.left,</span></span>
<span class="line"><span style="color: #ABB2BF">.right,</span></span>
<span class="line"><span style="color: #ABB2BF">.addition </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">width</span><span style="color: #ABB2BF">: 80</span><span style="color: #E06C75">px</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">background</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">color</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">red</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">.center </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">flex</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">background</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">color</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">skyblue</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">style</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="渲染作用域" tabindex="-1"><a class="header-anchor" href="#渲染作用域" aria-hidden="true">#</a> 渲染作用域</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">父组件</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//父级模板里的所有内容都是在父级作用域中编译的</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//子级模板里的所有内容都是在子级作用域中编译的</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;Vue2&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">children</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    //父元素没有，子元素有；但是也是渲染不出来的</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">message</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;/</span><span style="color: #E06C75">children</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">import children from &#39;./ChildrenSlot.vue&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">components</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">children</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">子组件</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">slot</span><span style="color: #ABB2BF">&gt;&lt;/</span><span style="color: #E06C75">slot</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">data</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    return {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//子元素有，但是也是渲染不出来的</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//因为父级模板里的所有内容都是在父级作用域中编译的</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">message</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;hello world&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="作用域插槽" tabindex="-1"><a class="header-anchor" href="#作用域插槽" aria-hidden="true">#</a> 作用域插槽</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#https:</span><span style="color: #7F848E; font-style: italic">//v3.cn.vuejs.org/guide/component-slots.html#%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//父组件</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;Vue2&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  //传值给子组件</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E5C07B">children-slot</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:names=&quot;names&quot;&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//父组件 拿到子组件传来的属性</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">#具名插槽</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">v-slot</span><span style="color: #ABB2BF">:</span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;slotProps&quot;</span><span style="color: #ABB2BF">  </span><span style="color: #D19A66; font-style: italic">default可以改</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;template</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-slot</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;slotProps&quot;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      //渲染子组件传回来的每一个值</span></span>
<span class="line"><span style="color: #ABB2BF">      &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ slotProps.</span><span style="color: #E06C75">item</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;/</span><span style="color: #E5C07B">children-slot</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">独占默认插槽的缩写语法</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//参考地址:https://v3.cn.vuejs.org/guide/component-slots.html#%E7%8B%AC%E5%8D%A0%E9%BB%98%E8%AE%A4%E6%8F%92%E6%A7%BD%E7%9A%84%E7%BC%A9%E5%86%99%E8%AF%AD%E6%B3%95</span></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #7F848E; font-style: italic">//独占默认插槽  子组件的slot没有name(具名插槽和独占默认插槽不能共用)</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E5C07B">children-slot</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:names=&quot;names&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-slot</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;slotProps&quot;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">        //渲染子组件传回来的每一个值</span></span>
<span class="line"><span style="color: #ABB2BF">        &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ slotProps.</span><span style="color: #E06C75">item</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;/</span><span style="color: #E5C07B">children-slot</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #56B6C2">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #56B6C2">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">import ChildrenSlot from &#39;./ChildrenSlot.vue&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">components</span><span style="color: #ABB2BF">: { </span><span style="color: #E06C75">ChildrenSlot</span><span style="color: #ABB2BF"> },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">data</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    return {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">names</span><span style="color: #ABB2BF">: [</span><span style="color: #98C379">&#39;why&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;kobe&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;james&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;curry&#39;</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//---------------------------------------------------------------------------------------------</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//子组件</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    //子组件遍历数组</span></span>
<span class="line"><span style="color: #ABB2BF">    #切记不要用name 莫名其妙报错</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-for</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;item in names&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:key=&quot;item&quot;&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//子组件把遍历的每一个数据 传回给父组件</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #FFFFFF">&lt;slot</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:item=&quot;item&quot;&gt;&lt;/slot&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;/div&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//子组件接收值</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">props</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">names</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">type</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">Array</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">default</span><span style="color: #ABB2BF">: () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> [],</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">data</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    return {}</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="切换组件" tabindex="-1"><a class="header-anchor" href="#切换组件" aria-hidden="true">#</a> 切换组件</h2>
<h3 id="v-if" tabindex="-1"><a class="header-anchor" href="#v-if" aria-hidden="true">#</a> v-if</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E5C07B">App</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">button</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #FFFFFF">@click=&quot;current</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">=</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">tab&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #FFFFFF">:class=&quot;{</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">active:</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">current</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">===</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">tab</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">}&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #D19A66; font-style: italic">v-for</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;tab in tabs&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #FFFFFF">:key=&quot;tab&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">    &gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">tab</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;/</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	//通过v-if切换组件</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-if</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;current === &#39;home&#39;&quot;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      &lt;</span><span style="color: #E06C75">home</span><span style="color: #ABB2BF">&gt;&lt;/</span><span style="color: #E06C75">home</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-else-if</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;current === &#39;about&#39;&quot;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      &lt;</span><span style="color: #E06C75">about</span><span style="color: #ABB2BF">&gt;&lt;/</span><span style="color: #E06C75">about</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-else</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      &lt;</span><span style="color: #E06C75">category</span><span style="color: #ABB2BF">&gt;&lt;/</span><span style="color: #E06C75">category</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">import Home from &#39;./pages/home.vue&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">import About from &#39;./pages/about.vue&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">import Category from &#39;./pages/category.vue&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">components</span><span style="color: #ABB2BF">: { </span><span style="color: #E06C75">Home</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">About</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">Category</span><span style="color: #ABB2BF"> },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">data</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    return {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">tabs</span><span style="color: #ABB2BF">: [</span><span style="color: #98C379">&#39;home&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;about&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;category&#39;</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">current</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;home&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">style</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;less&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">scoped</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">/* 样式 */</span></span>
<span class="line"><span style="color: #ABB2BF">button </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">cursor</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">pointer</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">.active </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">background</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">color</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">red</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">style</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//home.vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;Home&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//about.vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;About&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//category</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;Category&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="动态组件-component-组件" tabindex="-1"><a class="header-anchor" href="#动态组件-component-组件" aria-hidden="true">#</a> 动态组件(component 组件)</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">将上面三个template换成这个</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">component</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:is=&quot;current&quot;&gt;&lt;/component&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="动态路由传值" tabindex="-1"><a class="header-anchor" href="#动态路由传值" aria-hidden="true">#</a> 动态路由传值</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//App.vue</span></span>
<span class="line"><span style="color: #56B6C2">&lt;!--</span><span style="color: #ABB2BF"> age带了:</span><span style="color: #E06C75">所以一定是number</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">--&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">component</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:is=&quot;current&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">name</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;Xiao&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:age=&quot;18&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@pageClick=&quot;pageClick&quot;&gt;&lt;/component&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">methods:</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">pageClick</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">        console.log(</span><span style="color: #98C379">&#39;page内部发生了点击&#39;</span><span style="color: #E06C75">)</span></span>
<span class="line"><span style="color: #E06C75">    }</span></span>
<span class="line"><span style="color: #E06C75">}</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//Home.vue</span></span>
<span class="line"><span style="color: #E06C75">&lt;template&gt;</span></span>
<span class="line"><span style="color: #E06C75">  &lt;div @click=</span><span style="color: #98C379">&quot;btnClick&quot;</span><span style="color: #E06C75">&gt;</span></span>
<span class="line"><span style="color: #E06C75">    Home</span></span>
<span class="line"><span style="color: #E06C75">    &lt;br /&gt;</span></span>
<span class="line"><span style="color: #E06C75">    &lt;span&gt;name</span><span style="color: #ABB2BF">:{{ </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF"> }}</span><span style="color: #56B6C2">&lt;/</span><span style="color: #E06C75">span</span><span style="color: #56B6C2">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">br</span><span style="color: #ABB2BF"> /&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">span</span><span style="color: #ABB2BF">&gt;age:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">span</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #56B6C2">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #56B6C2">&gt;</span></span>
<span class="line"><span style="color: #56B6C2">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #56B6C2">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #E06C75">props</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">type</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">String</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">default</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">type</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">Number</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">default</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">},</span></span>
<span class="line"><span style="color: #E06C75">emits</span><span style="color: #ABB2BF">: [</span><span style="color: #98C379">&#39;pageClick&#39;</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #E06C75">methods</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">btnClick</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    	</span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">$emit</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;pageClick&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="keep-alive" tabindex="-1"><a class="header-anchor" href="#keep-alive" aria-hidden="true">#</a> keep-alive</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//include - string | RegExp | Array。只有名称匹配的组件会被缓存；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//exclude - string | RegExp | Array。任何名称匹配的组件都不会被缓存；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//max - number | string。最多可以缓存多少组件实例，一旦达到这个数字，那么缓存组件中最近没有被访问的实例会被销毁</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//include 和 exclude prop 允许组件有条件地缓存：</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//    二者都可以用逗号分隔字符串、正则表达式或一个数组来表示；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//    匹配首先检查组件自身的 name 选项；</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">如果写数组或者正则的时候include和exclude前面都要加冒号</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E5C07B">keep-alive</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">include</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;home,about&quot;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">component</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #FFFFFF">:is=&quot;current&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #D19A66; font-style: italic">name</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;Xiao&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #FFFFFF">:age=&quot;18&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #FFFFFF">@pageClick=&quot;pageClick&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">    &gt;&lt;/</span><span style="color: #E06C75">component</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E5C07B">keep-alive</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="异步组件" tabindex="-1"><a class="header-anchor" href="#异步组件" aria-hidden="true">#</a> 异步组件</h2>
<h3 id="webpack-分包" tabindex="-1"><a class="header-anchor" href="#webpack-分包" aria-hidden="true">#</a> webpack 分包</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//通过import函数导入的模块，后续webpack对其进行打包的时候就会进行分包的操作</span></span>
<span class="line"><span style="color: #61AFEF">import</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;./utils/math&#39;</span><span style="color: #ABB2BF">).</span><span style="color: #61AFEF">then</span><span style="color: #ABB2BF">((</span><span style="color: #E06C75; font-style: italic">res</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">res</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">sum</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">20</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">30</span><span style="color: #ABB2BF">));</span></span>
<span class="line"><span style="color: #ABB2BF">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="异步组件-1" tabindex="-1"><a class="header-anchor" href="#异步组件-1" aria-hidden="true">#</a> 异步组件</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#参考链接:https:</span><span style="color: #7F848E; font-style: italic">//v3.cn.vuejs.org/api/global-api.html#defineasynccomponent</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">defineAsyncComponent</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue&#39;</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">Loading</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./loading.vue&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">类型一</span><span style="color: #ABB2BF">：</span><span style="color: #E06C75">工厂函数</span><span style="color: #ABB2BF">，</span><span style="color: #E06C75">该工厂函数需要返回一个Promise对象</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// const AsyncCate = defineAsyncComponent(() =&gt; import(&#39;./asyncCate.vue&#39;))</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">类型二</span><span style="color: #ABB2BF">：</span><span style="color: #E06C75">接受一个对象类型</span><span style="color: #ABB2BF">，</span><span style="color: #E06C75">对异步函数进行配置</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">AsyncCate</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">defineAsyncComponent</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">loader</span><span style="color: #ABB2BF">: () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">import</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;./asyncCate.vue&#39;</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//未加载出来时，用来占位的</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">loadingComponent</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">Loading</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//在显示loadingComponent组件之前,等待多久</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">delay</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">2000</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">/**</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">   *</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">   * </span><span style="color: #C678DD; font-style: italic">@param</span><span style="color: #7F848E; font-style: italic"> </span><span style="color: #E5C07B; font-style: italic">{*}</span><span style="color: #7F848E; font-style: italic"> </span><span style="color: #E06C75; font-style: italic">error</span><span style="color: #7F848E; font-style: italic"> 错误信息对象</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">   * </span><span style="color: #C678DD; font-style: italic">@param</span><span style="color: #7F848E; font-style: italic"> </span><span style="color: #E5C07B; font-style: italic">{*}</span><span style="color: #7F848E; font-style: italic"> </span><span style="color: #E06C75; font-style: italic">retry</span><span style="color: #7F848E; font-style: italic"> 一个函数，用于指示当 promise 加载器 reject 时，加载器是否应该重试</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">   * </span><span style="color: #C678DD; font-style: italic">@param</span><span style="color: #7F848E; font-style: italic"> </span><span style="color: #E5C07B; font-style: italic">{*}</span><span style="color: #7F848E; font-style: italic"> </span><span style="color: #E06C75; font-style: italic">fail</span><span style="color: #7F848E; font-style: italic">  一个函数，指示加载程序结束退出</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">   * </span><span style="color: #C678DD; font-style: italic">@param</span><span style="color: #7F848E; font-style: italic"> </span><span style="color: #E5C07B; font-style: italic">{*}</span><span style="color: #7F848E; font-style: italic"> </span><span style="color: #E06C75; font-style: italic">attempts</span><span style="color: #7F848E; font-style: italic"> 允许的最大重试次数</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">   */</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">onError</span><span style="color: #ABB2BF">: </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">err</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">retry</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75; font-style: italic">fail</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">attempts</span><span style="color: #ABB2BF">) {},</span></span>
<span class="line"><span style="color: #ABB2BF">})</span></span>
<span class="line"><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">default</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">components</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">AsyncCate</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">Loading</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #56B6C2">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #56B6C2">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="异步组件与-suspense" tabindex="-1"><a class="header-anchor" href="#异步组件与-suspense" aria-hidden="true">#</a> 异步组件与 suspense</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//Suspense是一个内置的全局组件，该组件有两个插槽：</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//    default：如果default可以显示，那么显示default的内容；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//    fallback：如果default无法显示，那么会显示fallback插槽的内容</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">suspense</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">#default&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    	</span><span style="color: #FFFFFF">&lt;async-cate&gt;&lt;/async-cate&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;template</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">#fallback&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    	</span><span style="color: #FFFFFF">&lt;loading&gt;&lt;/loading&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/suspense&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="torefs" tabindex="-1"><a class="header-anchor" href="#torefs" aria-hidden="true">#</a> $toRefs</h2>
<ul>
<li>获取元素或组件</li>
</ul>
<h3 id="refs-的使用" tabindex="-1"><a class="header-anchor" href="#refs-的使用" aria-hidden="true">#</a> refs 的使用</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">相当于操作dom元素</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    //ref=&quot;name&quot;  引用时,this.$refs.name可以得到该元素</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">ref</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;title&quot;</span><span style="color: #ABB2BF">&gt;标题&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;btnClick&quot;&gt;获取元素&lt;/button&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;nav-bar-app</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">ref</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;nav&quot;</span><span style="color: #ABB2BF">&gt;&lt;/</span><span style="color: #E5C07B">nav-bar-app</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;btnClickNav&quot;&gt;获取组件&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;/div&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">NavBarApp</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./NavBarApp.vue&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">components</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">NavBarApp</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">methods</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">btnClick</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//获取元素</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">$refs</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">title</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">btnClickNav</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//获取组件  并调用组件的方法  还可以得到组件的数据</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">$refs</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">nav</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">sayHello</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="parent和-root" tabindex="-1"><a class="header-anchor" href="#parent和-root" aria-hidden="true">#</a> $parent和$root</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">$parent访问父元素</span><span style="color: #ABB2BF">  </span><span style="color: #E06C75">$root访问根元素</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">$children在vue3已经没有了</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;NavBarApp&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;getParent&quot;&gt;获取父组件或根组件&lt;/button&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//耦合性太强,父元素必须要有names</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;div</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-for</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;item in $parent.names&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:key=&quot;item&quot;&gt;&lt;/div&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;NavBarApp&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">methods</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">getParent</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">$parent</span><span style="color: #ABB2BF">) </span><span style="color: #7F848E; font-style: italic">//获取父组件</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">$root</span><span style="color: #ABB2BF">) </span><span style="color: #7F848E; font-style: italic">//获取根组件</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="el" tabindex="-1"><a class="header-anchor" href="#el" aria-hidden="true">#</a> $el</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">$el获取组件根元素</span></span>
<span class="line"><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">$refs</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">nav</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">$el</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="生命周期" tabindex="-1"><a class="header-anchor" href="#生命周期" aria-hidden="true">#</a> 生命周期</h2>
<p><strong>创建、挂载、更新、卸载</strong></p>
<h3 id="钩子函数" tabindex="-1"><a class="header-anchor" href="#钩子函数" aria-hidden="true">#</a> 钩子函数</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">父组件</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    //切换的时候才有子组件的卸载</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;isShow</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">=</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">!isShow&quot;&gt;切换&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;template</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-if</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;isShow&quot;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      &lt;</span><span style="color: #E06C75">home</span><span style="color: #ABB2BF">&gt;&lt;/</span><span style="color: #E06C75">home</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">import Home from &#39;./Home.vue&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">components</span><span style="color: #ABB2BF">: { </span><span style="color: #E06C75">Home</span><span style="color: #ABB2BF"> },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">data</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    return {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">isShow</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">子组件</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">ref</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;title&quot;</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">message</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;btnClick&quot;&gt;修改message&lt;/button&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;Home&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">data</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    return {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">message</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;hello world&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">methods:</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">btnClick</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">      this.</span><span style="color: #E06C75">message</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;你好啊,李银河&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">beforeCreate()</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;home beforeCreate&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">created()</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;home created&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">beforeMount()</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;home beforeMount&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">mounted()</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;home mounted&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">beforeUnmount()</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;home beforeUnmount&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//取消事件的监听,比如说  事件总线的监听</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">unmounted()</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;home unmounted&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//dom更新前</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">beforeUpdate()</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;beforeUpdate:&#39;</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">$refs</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">title</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">innerHTML</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//dom更新后</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">updated()</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;updated:&#39;</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">$refs</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">title</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">innerHTML</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="keep-alive-特有的钩子函数" tabindex="-1"><a class="header-anchor" href="#keep-alive-特有的钩子函数" aria-hidden="true">#</a> keep-alive 特有的钩子函数</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">keep</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">alive组件</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//执行一次</span></span>
<span class="line"><span style="color: #61AFEF">created</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;about create&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">},</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//不执行</span></span>
<span class="line"><span style="color: #61AFEF">unmounted</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;about unmounted&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">},</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//进入时执行</span></span>
<span class="line"><span style="color: #61AFEF">activated</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;about activated&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">},</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//离开时执行</span></span>
<span class="line"><span style="color: #61AFEF">deactivated</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;about deactivated&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">},</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="组件的-v-model" tabindex="-1"><a class="header-anchor" href="#组件的-v-model" aria-hidden="true">#</a> 组件的 v-model</h2>
<p><strong>父组件</strong></p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    //显示数据</span></span>
<span class="line"><span style="color: #ABB2BF">    message:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">message</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">    title:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">title</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">input</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;text&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-model</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;message&quot;</span><span style="color: #ABB2BF"> /&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    //input里的双向绑定  具体做了这些事</span></span>
<span class="line"><span style="color: #ABB2BF">    //&lt;</span><span style="color: #E06C75">input</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;text&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:value=&quot;message&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@input=&quot;message=$event.target.value&quot;/&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;xiao-input</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-model</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;message&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">v-model</span><span style="color: #ABB2BF">:</span><span style="color: #D19A66; font-style: italic">title</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;title&quot;</span><span style="color: #ABB2BF">&gt;&lt;/</span><span style="color: #E5C07B">xiao-input</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	//组件的v-model:把modelValue传给子组件  并且监听子组件的update:model-value事件</span></span>
<span class="line"><span style="color: #ABB2BF">    //&lt;</span><span style="color: #E5C07B">xiao-input</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:modelValue=&quot;message&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@update:model-value=&quot;message=$event&quot;&gt;&lt;/xiao-input&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;/div&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">XiaoInput</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./XiaoInput.vue&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">components</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">XiaoInput</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">data</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    return {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">message</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;hello world&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">title</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;标题&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>子组件</strong></p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    //1、默认绑定和事件处理</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;btnClick&quot;&gt;修改&lt;/button&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//2、通过input</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;input</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;text&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:value=&quot;modelValue&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@input=&quot;inputClick&quot;</span><span style="color: #ABB2BF"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    #3、不对,不应该直接改props</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">input</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-model</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;modelValue&quot;</span><span style="color: #ABB2BF"> /&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    #4.计算属性(推荐这种，更优雅)  v-model绑定的是计算属性</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">input</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;text&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-model</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;value&quot;</span><span style="color: #ABB2BF"> /&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">input</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;text&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-model</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;titleValue&quot;</span><span style="color: #ABB2BF"> /&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//emits列表</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">emits</span><span style="color: #ABB2BF">: [</span><span style="color: #98C379">&#39;update:modelValue&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;update:title&#39;</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">props</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">modelValue</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">type</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">String</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">default</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">title</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">type</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">String</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">default</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">computed</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">value</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//将修改的值  通过update:modelValue传给父组件</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">set</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">value</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">$emit</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;update:modelValue&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">value</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//将props返回</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">modelValue</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">titleValue</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">set</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">value</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">$emit</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;update:title&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">value</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">title</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">methods</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//默认绑定和事件处理</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">btnClick</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">$emit</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;update:modelValue&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;你好,李银河&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//通过input  input本身的事件</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">inputClick</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">event</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">$emit</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;update:modelValue&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">event</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">target</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="mixin-混入-代码共享" tabindex="-1"><a class="header-anchor" href="#mixin-混入-代码共享" aria-hidden="true">#</a> Mixin(混入:代码共享)</h2>
<h3 id="基本使用-1" tabindex="-1"><a class="header-anchor" href="#基本使用-1" aria-hidden="true">#</a> 基本使用</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E5C07B">mixin</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">js</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">mixin</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">created</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">sayLove</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">methods</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">sayLove</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;肖紫嫣,我喜欢你&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">default</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">mixin</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E5C07B">App</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;Vue2&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">//引入混合的js代码</span></span>
<span class="line"><span style="color: #ABB2BF">import mixin from &#39;./mixin&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//注册混入的js代码</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">mixins</span><span style="color: #ABB2BF">: [</span><span style="color: #E06C75">mixin</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="冲突" tabindex="-1"><a class="header-anchor" href="#冲突" aria-hidden="true">#</a> 冲突</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//如果Mixin对象中的选项和组件对象中的选项发生了冲突，那么Vue会如何操作呢？</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//这里分成不同的情况来进行处理；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//情况一：如果是data函数的返回值对象</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//返回值对象默认情况下会进行合并；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//如果data返回值对象的属性发生了冲突，那么会保留组件自身的数据；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//情况二：如何生命周期钩子函数</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//生命周期的钩子函数会被合并到数组中，都会被调用；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//情况三：值为对象的选项，例如 methods、components 和 directives，将被合并为同一个对象。</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//比如都有methods选项，并且都定义了方法，那么它们都会生效；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//但是如果对象的key相同，那么会取组件对象的键值对</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="全局混入" tabindex="-1"><a class="header-anchor" href="#全局混入" aria-hidden="true">#</a> 全局混入</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//这个App是App.vue</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">app</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">createApp</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">App</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//全局混入</span></span>
<span class="line"><span style="color: #E5C07B">app</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">mixin</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">created</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;global mixin created&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">});</span></span>
<span class="line"><span style="color: #E5C07B">app</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">mount</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;#app&#39;</span><span style="color: #ABB2BF">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="extends" tabindex="-1"><a class="header-anchor" href="#extends" aria-hidden="true">#</a> extends</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//basePage.vue   这个了解即可  因为可以用mixin代替</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//template不会被继承</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;basePage&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//这里的会被继承</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">data</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    return {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">title</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;hello world&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  methods: </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">sayHello</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">      console.log(</span><span style="color: #98C379">&#39;hello world&#39;</span><span style="color: #E06C75">)</span></span>
<span class="line"><span style="color: #E06C75">    },</span></span>
<span class="line"><span style="color: #E06C75">  },</span></span>
<span class="line"><span style="color: #E06C75">}</span></span>
<span class="line"><span style="color: #E06C75">&lt;/script&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//在其他组件引用</span></span>
<span class="line"><span style="color: #E06C75">&lt;script&gt;</span></span>
<span class="line"><span style="color: #E06C75">import BasePage from </span><span style="color: #98C379">&#39;./basePage.vue&#39;</span></span>
<span class="line"><span style="color: #E06C75">export default {</span></span>
<span class="line"><span style="color: #E06C75">  extends</span><span style="color: #ABB2BF">: [</span><span style="color: #E06C75">BasePage</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #56B6C2">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #56B6C2">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="transition-动画" tabindex="-1"><a class="header-anchor" href="#transition-动画" aria-hidden="true">#</a> Transition 动画</h2>
<h3 id="_1、过渡效果" tabindex="-1"><a class="header-anchor" href="#_1、过渡效果" aria-hidden="true">#</a> 1、过渡效果</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;isShow</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">=</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">!isShow&quot;&gt;显示/隐藏&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #7F848E; font-style: italic">//Transition组件</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;transition</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">name</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;Xiao&quot;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-if</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;isShow&quot;</span><span style="color: #ABB2BF">&gt;hello world&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;/</span><span style="color: #E06C75">transition</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">data</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    return {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">isShow</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">style</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;less&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">scoped</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">/* 样式 */</span></span>
<span class="line"><span style="color: #ABB2BF">#如果transition没有name,那么就是v-entry-from等等</span></span>
<span class="line"><span style="color: #ABB2BF">//进入开始 退出结束</span></span>
<span class="line"><span style="color: #ABB2BF">.Xiao-enter-from,</span></span>
<span class="line"><span style="color: #ABB2BF">.Xiao-leave-to </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">opacity</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">//进入结束 退出开始</span></span>
<span class="line"><span style="color: #ABB2BF">#这里可以省略</span></span>
<span class="line"><span style="color: #ABB2BF">.Xiao-enter-to,</span></span>
<span class="line"><span style="color: #ABB2BF">.Xiao-leave-from </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">opacity</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">//进入中 退出中</span></span>
<span class="line"><span style="color: #ABB2BF">.Xiao-enter-active,</span></span>
<span class="line"><span style="color: #ABB2BF">.Xiao-leave-active </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  #</span><span style="color: #E06C75">过渡动画</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">transition</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">opacity</span><span style="color: #ABB2BF"> 2</span><span style="color: #E06C75">s</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">ease</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">style</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2、原理" tabindex="-1"><a class="header-anchor" href="#_2、原理" aria-hidden="true">#</a> 2、原理</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//当插入或删除包含在 transition 组件中的元素时，Vue 将会做以下处理：</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//自动嗅探目标元素是否应用了CSS过渡或者动画，如果有，那么在恰当的时机添加/删除 CSS类名；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//如果 transition 组件提供了JavaScript钩子函数，这些钩子函数将在恰当的时机被调用；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//如果没有找到JavaScript钩子并且也没有检测到CSS过渡/动画，DOM插入、删除操作将会立即执行</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3、动画效果" tabindex="-1"><a class="header-anchor" href="#_3、动画效果" aria-hidden="true">#</a> 3、动画效果</h3>
<div class="language-css ext-css line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #D19A66">.Xiao-enter-active</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  animation: bounce </span><span style="color: #D19A66">1</span><span style="color: #E06C75">s</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">ease</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #D19A66">.Xiao-leave-active</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">/* reverse:反转 */</span></span>
<span class="line"><span style="color: #ABB2BF">  animation: bounce </span><span style="color: #D19A66">1</span><span style="color: #E06C75">s</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">ease</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">reverse</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">/* 帧动画 */</span></span>
<span class="line"><span style="color: #C678DD">@keyframes</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75; font-style: italic">bounce</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  0% {</span></span>
<span class="line"><span style="color: #ABB2BF">    transform: </span><span style="color: #56B6C2">scale</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">  }</span></span>
<span class="line"><span style="color: #ABB2BF">  50% {</span></span>
<span class="line"><span style="color: #ABB2BF">    transform: </span><span style="color: #56B6C2">scale</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">1.2</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">  }</span></span>
<span class="line"><span style="color: #ABB2BF">  100% {</span></span>
<span class="line"><span style="color: #ABB2BF">    transform: </span><span style="color: #56B6C2">scale</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">  }</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4、过渡-动画效果-动画组件属性" tabindex="-1"><a class="header-anchor" href="#_4、过渡-动画效果-动画组件属性" aria-hidden="true">#</a> 4、过渡+动画效果(动画组件属性)</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">存在个问题</span><span style="color: #ABB2BF">  </span><span style="color: #E06C75">animation和transition结束时间不一致</span><span style="color: #ABB2BF">，</span><span style="color: #E06C75">以谁为准</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">所以建议</span><span style="color: #ABB2BF">  </span><span style="color: #56B6C2">&lt;</span><span style="color: #E06C75">transition</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;transition&quot;</span><span style="color: #56B6C2">&gt;&lt;/</span><span style="color: #E06C75">transition</span><span style="color: #56B6C2">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">type指定以谁的事件为准</span><span style="color: #ABB2BF">  可以为:</span><span style="color: #E06C75">transition和animation</span></span>
<span class="line"><span style="color: #ABB2BF">#:</span><span style="color: #E06C75">duration</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;1000&quot;</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75">执行时间</span></span>
<span class="line"><span style="color: #ABB2BF">#:</span><span style="color: #E06C75">duration</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;{enter:800,leave:1000}&quot;</span><span style="color: #E06C75">进入和离开时间</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">/* 进入开始 退出结束 */</span></span>
<span class="line"><span style="color: #ABB2BF">.</span><span style="color: #E06C75">Xiao</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">enter</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">from</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">.</span><span style="color: #E06C75">Xiao</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">leave</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">to</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  opacity: </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">/* 进入中 退出中 */</span></span>
<span class="line"><span style="color: #ABB2BF">.</span><span style="color: #E06C75">Xiao</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">enter</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">active</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">.</span><span style="color: #E06C75">Xiao</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">leave</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">active</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">/* 过渡动画  */</span></span>
<span class="line"><span style="color: #ABB2BF">  transition: </span><span style="color: #E06C75">opacity</span><span style="color: #ABB2BF"> 1</span><span style="color: #E06C75">s</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">ease</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">.</span><span style="color: #E06C75">Xiao</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">enter</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">active</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  animation: </span><span style="color: #E06C75">bounce</span><span style="color: #ABB2BF"> 1</span><span style="color: #E06C75">s</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">ease</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">.</span><span style="color: #E06C75">Xiao</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">leave</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">active</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">/* reverse:反转 */</span></span>
<span class="line"><span style="color: #ABB2BF">  animation: </span><span style="color: #E06C75">bounce</span><span style="color: #ABB2BF"> 1</span><span style="color: #E06C75">s</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">ease</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">reverse</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">/* 帧动画 */</span></span>
<span class="line"><span style="color: #ABB2BF">@</span><span style="color: #E06C75">keyframes</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">bounce</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #D19A66">0</span><span style="color: #56B6C2">%</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">    transform: </span><span style="color: #61AFEF">scale</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">  }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #D19A66">50</span><span style="color: #56B6C2">%</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">    transform: </span><span style="color: #61AFEF">scale</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">1.2</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">  }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #D19A66">100</span><span style="color: #56B6C2">%</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">    transform: </span><span style="color: #61AFEF">scale</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">  }</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5、mode-属性" tabindex="-1"><a class="header-anchor" href="#_5、mode-属性" aria-hidden="true">#</a> **5、mode 属性</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//两个元素进行切换 out-in是先出后进，in-out是先进后出</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">transition</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">name</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&#39;Xiao&#39;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">mode</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&#39;out-in&#39;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-if</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&#39;isShow&#39;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&#39;title&#39;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    hello world</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-else</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&#39;title&#39;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    你好啊,李银河</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">transition</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6、动画中放组件" tabindex="-1"><a class="header-anchor" href="#_6、动画中放组件" aria-hidden="true">#</a> **6、动画中放组件</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;&lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;isShow</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">=</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">!isShow&quot;&gt;显示/隐藏&lt;/button&gt;&lt;/div&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;!--</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:appear=&quot;true&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">--&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//:appear=&quot;true&quot; 或者直接写appear   初始化时就有动画</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;transition</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">name</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;Xiao&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">mode</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;out-in&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">appear</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      &lt;</span><span style="color: #E06C75">component</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;title&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:is=&quot;isShow</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">?</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;home&#39;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;about&#39;&quot;&gt;&lt;/component&gt;</span></span>
<span class="line"><span style="color: #98C379">    &lt;/transition&gt;</span></span>
<span class="line"><span style="color: #98C379">  &lt;/div&gt;</span></span>
<span class="line"><span style="color: #98C379">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #98C379">&lt;script&gt;</span></span>
<span class="line"><span style="color: #98C379">#注意:组件需要有根元素</span></span>
<span class="line"><span style="color: #98C379">import Home from &#39;./page/Home.vue&#39;</span></span>
<span class="line"><span style="color: #98C379">import About from &#39;./page/About.vue&#39;</span></span>
<span class="line"><span style="color: #98C379">export default {</span></span>
<span class="line"><span style="color: #98C379">  components: { Home, About },</span></span>
<span class="line"><span style="color: #98C379">  data() {</span></span>
<span class="line"><span style="color: #98C379">    return {</span></span>
<span class="line"><span style="color: #98C379">      isShow: true,</span></span>
<span class="line"><span style="color: #98C379">    }</span></span>
<span class="line"><span style="color: #98C379">  },</span></span>
<span class="line"><span style="color: #98C379">}</span></span>
<span class="line"><span style="color: #98C379">&lt;/script&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #98C379">&lt;style type=&quot;</span><span style="color: #FFFFFF">less&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">scoped</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">/* 样式 */</span></span>
<span class="line"><span style="color: #ABB2BF">.title </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">display</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">inline</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">block</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">/* 进入开始 退出结束 */</span></span>
<span class="line"><span style="color: #ABB2BF">.Xiao-enter-from,</span></span>
<span class="line"><span style="color: #ABB2BF">.Xiao-leave-to </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">opacity</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">/* 进入中 退出中 */</span></span>
<span class="line"><span style="color: #ABB2BF">.Xiao-enter-active,</span></span>
<span class="line"><span style="color: #ABB2BF">.Xiao-leave-active </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">/* 过渡动画  */</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">transition</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">opacity</span><span style="color: #ABB2BF"> 1</span><span style="color: #E06C75">s</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">ease</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">.Xiao-enter-active </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">animation</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">bounce</span><span style="color: #ABB2BF"> 1</span><span style="color: #E06C75">s</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">ease</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">.Xiao-leave-active </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">/* reverse:反转 */</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">animation</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">bounce</span><span style="color: #ABB2BF"> 1</span><span style="color: #E06C75">s</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">ease</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">reverse</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">/* 帧动画 */</span></span>
<span class="line"><span style="color: #ABB2BF">@keyframes bounce </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #D19A66">0</span><span style="color: #56B6C2">%</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">transform</span><span style="color: #ABB2BF">: </span><span style="color: #61AFEF">scale</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">  }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #D19A66">50</span><span style="color: #56B6C2">%</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">transform</span><span style="color: #ABB2BF">: </span><span style="color: #61AFEF">scale</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">1.2</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">  }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #D19A66">100</span><span style="color: #56B6C2">%</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">transform</span><span style="color: #ABB2BF">: </span><span style="color: #61AFEF">scale</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">  }</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">style</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7、使用-animate-css" tabindex="-1"><a class="header-anchor" href="#_7、使用-animate-css" aria-hidden="true">#</a> 7、使用 animate.css</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#官网:https:</span><span style="color: #7F848E; font-style: italic">//animate.style/</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//安装第三方动画库</span></span>
<span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">animate</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">css</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//在main.js全局引入</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;animate.css&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">使用</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">/* 进入中 退出中 */</span></span>
<span class="line"><span style="color: #ABB2BF">.</span><span style="color: #E06C75">Xiao</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">enter</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">active</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//fadeIn是animate网站上复制的</span></span>
<span class="line"><span style="color: #ABB2BF">  animation: </span><span style="color: #E06C75">fadeIn</span><span style="color: #ABB2BF"> 1</span><span style="color: #E06C75">s</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">ease</span><span style="color: #56B6C2">-</span><span style="color: #C678DD">in</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">.</span><span style="color: #E06C75">Xiao</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">leave</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">active</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  animation: </span><span style="color: #E06C75">fadeIn</span><span style="color: #ABB2BF"> 1</span><span style="color: #E06C75">s</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">ease</span><span style="color: #56B6C2">-</span><span style="color: #C678DD">in</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">reverse</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8、自定义过渡-class" tabindex="-1"><a class="header-anchor" href="#_8、自定义过渡-class" aria-hidden="true">#</a> 8、自定义过渡 class</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">transition</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//animate__animated这个一定要加  animate.css第三方库的内容</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #D19A66; font-style: italic">enter-active-class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&#39;animate__animated animate__fadeIn&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #D19A66; font-style: italic">leave-active-class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&#39;animate__animated animate__fadeOut&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  //body</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">transition</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9、javascript-钩子" tabindex="-1"><a class="header-anchor" href="#_9、javascript-钩子" aria-hidden="true">#</a> 9、javascript 钩子</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF"> &lt;</span><span style="color: #E06C75">transition</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #D19A66; font-style: italic">name</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;Xiao&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #D19A66; font-style: italic">mode</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;out-in&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #D19A66; font-style: italic">appear</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #FFFFFF">@before-enter=&quot;beforeEnter&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #FFFFFF">@enter=&quot;enter&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #FFFFFF">@after-enter=&quot;afterEnter&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #FFFFFF">@before-leave=&quot;beforeLeave&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #FFFFFF">@leave=&quot;leave&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #FFFFFF">@after-leave=&quot;afterLeave&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #FFFFFF">:css=&quot;false&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">    &gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  	//body</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">transition</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #61AFEF">beforeEnter</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;beforeEnter&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">},</span></span>
<span class="line"><span style="color: #61AFEF">enter</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">el</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">done</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;enter&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">},</span></span>
<span class="line"><span style="color: #61AFEF">afterEnter</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;afterEnter&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">},</span></span>
<span class="line"><span style="color: #61AFEF">beforeLeave</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;beforeLeave&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">},</span></span>
<span class="line"><span style="color: #61AFEF">leave</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">el</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">done</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;leave&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">},</span></span>
<span class="line"><span style="color: #61AFEF">afterLeave</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;afterLeave&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//当我们使用JavaScript来执行过渡动画时，需要进行 done 回调，否则它们将会被同步调用，过渡会立即完成。</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//添加 :css=&quot;false&quot;,也会让Vue会跳过CSS的检测,除了性能略高之外,这可以避免过渡过程中 CSS 规则的影响。</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10、gsap-库-第三方-js-动画库" tabindex="-1"><a class="header-anchor" href="#_10、gsap-库-第三方-js-动画库" aria-hidden="true">#</a> 10、gsap 库(第三方 js 动画库)</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//安装</span></span>
<span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">gsap</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//使用</span></span>
<span class="line"><span style="color: #61AFEF">enter</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">el</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">done</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;enter&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//from:从哪来</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//从距离我200px的地方来，并且来的时候缩放为0</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">gsap</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">from</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">el</span><span style="color: #ABB2BF">, {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">scale</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">x</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">distance</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">onComplete</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">done</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    })</span></span>
<span class="line"><span style="color: #ABB2BF">},</span></span>
<span class="line"><span style="color: #61AFEF">leave</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">el</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">done</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;leave&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//to:到哪去</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//到距离我200px的地方，并且到达的时候缩放为0</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">gsap</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">to</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">el</span><span style="color: #ABB2BF">, {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">scale</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">x</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">distance</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">onComplete</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">done</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    })</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_11、数字缓慢变化-结合-gsap" tabindex="-1"><a class="header-anchor" href="#_11、数字缓慢变化-结合-gsap" aria-hidden="true">#</a> 11、数字缓慢变化(结合 gsap)</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    //step步数100</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">input</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;number&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">step</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;100&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-model</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;counter&quot;</span><span style="color: #ABB2BF"> /&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;当前计数:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">showCounter</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">import gsap from &#39;gsap&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">data</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    return {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">showNumber</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  computed: </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">showCounter</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//不保存小数</span></span>
<span class="line"><span style="color: #ABB2BF">      return this.showNumber.toFixed(</span><span style="color: #D19A66">0</span><span style="color: #E06C75">)</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  watch: </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">counter</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">newVal</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//跟this  后面的showNumer拼接起来</span></span>
<span class="line"><span style="color: #ABB2BF">      gsap.to(</span><span style="color: #E06C75">this</span><span style="color: #ABB2BF">, { </span><span style="color: #E06C75">duration</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">showNumber</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">newVal</span><span style="color: #ABB2BF"> })</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="transition-group" tabindex="-1"><a class="header-anchor" href="#transition-group" aria-hidden="true">#</a> Transition-Group</h2>
<h3 id="_1、介绍" tabindex="-1"><a class="header-anchor" href="#_1、介绍" aria-hidden="true">#</a> 1、介绍</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//默认情况下，它不会渲染一个元素的包裹器，但是你可以指定一个元素并以 tag attribute 进行渲染；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//过渡模式不可用，因为我们不再相互切换特有的元素；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//内部元素总是需要提供唯一的 key attribute 值；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//CSS 过渡的类将会应用在内部的元素中，而不是这个组/容器本身；</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2、简单使用" tabindex="-1"><a class="header-anchor" href="#_2、简单使用" aria-hidden="true">#</a> 2、简单使用</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;addNumber&quot;&gt;添加数字&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;delNumber&quot;&gt;删除数字&lt;/button&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #7F848E; font-style: italic">//用p标签包含它们</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;transition-group</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">tag</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;p&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">name</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;Xiao&quot;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      &lt;</span><span style="color: #E06C75">span</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-for</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;item in numbers&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:key=&quot;item&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;item&quot;</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">item</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">span</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;/</span><span style="color: #E5C07B">transition-group</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">data</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    return {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">numbers</span><span style="color: #ABB2BF">: [</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">6</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">7</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">8</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">9</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">numCounter</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  methods: </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">addNumber</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//随机位置插入一个  0表示插入</span></span>
<span class="line"><span style="color: #ABB2BF">      this.numbers.splice(this.randomIndex(), </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, this.numCounter++)</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">delNumber</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//随机位置删除一个  1表示删除</span></span>
<span class="line"><span style="color: #ABB2BF">      this.numbers.splice(this.randomIndex(), </span><span style="color: #D19A66">1</span><span style="color: #E06C75">)</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">randomIndex</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//生成随机位置</span></span>
<span class="line"><span style="color: #ABB2BF">      return Math.floor(Math.random() * this.numbers.length)</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">style</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;less&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">scoped</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">/* 样式 */</span></span>
<span class="line"><span style="color: #ABB2BF">.item </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">margin</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">right</span><span style="color: #ABB2BF">: 10</span><span style="color: #E06C75">px</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">display</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">inline</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">block</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">.Xiao-enter-from,</span></span>
<span class="line"><span style="color: #ABB2BF">.Xiao-leave-to </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">opacity</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//来:从下到上  去:从上到下</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">transform</span><span style="color: #ABB2BF">: </span><span style="color: #61AFEF">translateY</span><span style="color: #ABB2BF">(30</span><span style="color: #E06C75">px</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">.Xiao-enter-active,</span></span>
<span class="line"><span style="color: #ABB2BF">.Xiao-leave-active </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">transition</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">all</span><span style="color: #ABB2BF"> 1</span><span style="color: #E06C75">s</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">ease</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">style</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3、改进" tabindex="-1"><a class="header-anchor" href="#_3、改进" aria-hidden="true">#</a> 3、改进</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">在上面的案例中虽然新增的或者删除的节点是有动画的</span><span style="color: #ABB2BF">，</span><span style="color: #E06C75">但是对于哪些其他需要移动的节点是没有动画的</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//安装lodash  用于数字洗牌</span></span>
<span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">lodash</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;addNumber&quot;&gt;添加数字&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;delNumber&quot;&gt;删除数字&lt;/button&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">#</span><span style="color: #ABB2BF">   </span><span style="color: #FFFFFF">&lt;button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;shuffleNumber&quot;&gt;数字洗牌&lt;/button&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;transition-group</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">tag</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;p&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">name</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;Xiao&quot;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      &lt;</span><span style="color: #E06C75">span</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-for</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;item in numbers&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:key=&quot;item&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;item&quot;</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">item</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">span</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;/</span><span style="color: #E5C07B">transition-group</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">//引用lodash</span></span>
<span class="line"><span style="color: #ABB2BF">#import _ from &#39;lodash&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">data</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    return {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">numbers</span><span style="color: #ABB2BF">: [</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">3</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">4</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">5</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">6</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">7</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">8</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">9</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">numCounter</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  methods: </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">addNumber</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">      this.numbers.splice(this.randomIndex(), </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">, this.numCounter++)</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">delNumber</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">      this.numbers.splice(this.randomIndex(), </span><span style="color: #D19A66">1</span><span style="color: #E06C75">)</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">     </span><span style="color: #7F848E; font-style: italic">//洗牌函数  调用lodash的shuffle函数</span></span>
<span class="line"><span style="color: #ABB2BF">#    </span><span style="color: #61AFEF">shuffleNumber</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">#      this.</span><span style="color: #E06C75">numbers</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">_</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">shuffle</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">numbers</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">#    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">randomIndex</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">      return Math.floor(Math.random() * this.numbers.length)</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">style</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;less&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">scoped</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">/* 样式 */</span></span>
<span class="line"><span style="color: #ABB2BF">.item </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">margin</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">right</span><span style="color: #ABB2BF">: 10</span><span style="color: #E06C75">px</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">display</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">inline</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">block</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">.Xiao-enter-from,</span></span>
<span class="line"><span style="color: #ABB2BF">.Xiao-leave-to </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">opacity</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">transform</span><span style="color: #ABB2BF">: </span><span style="color: #61AFEF">translateY</span><span style="color: #ABB2BF">(30</span><span style="color: #E06C75">px</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">.Xiao-enter-active,</span></span>
<span class="line"><span style="color: #ABB2BF">.Xiao-leave-active </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">transition</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">all</span><span style="color: #ABB2BF"> 1</span><span style="color: #E06C75">s</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">ease</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">//不加这个浮动的话  移除的元素占着位置  后面往前移的元素要等待它移除完才能往前走  还是会有卡顿</span></span>
<span class="line"><span style="color: #ABB2BF">#.Xiao-leave-active </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">#  </span><span style="color: #E06C75">position</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">absolute</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">//加了这个属性  添加和删除时其他的数字也会有移动的动画</span></span>
<span class="line"><span style="color: #ABB2BF">#.Xiao-move </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">#  </span><span style="color: #E06C75">transition</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">transform</span><span style="color: #ABB2BF"> 1</span><span style="color: #E06C75">s</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">ease</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">style</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4、列表的交错过渡案例" tabindex="-1"><a class="header-anchor" href="#_4、列表的交错过渡案例" aria-hidden="true">#</a> 4、列表的交错过渡案例</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">input</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;text&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-model</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;keyword&quot;</span><span style="color: #ABB2BF"> /&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E5C07B">transition-group</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #D19A66; font-style: italic">tag</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;ul&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #D19A66; font-style: italic">name</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;Xiao&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">	  </span><span style="color: #7F848E; font-style: italic">//取消使用css</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #FFFFFF">:css=&quot;false&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #FFFFFF">@before-enter=&quot;beforeEnter&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #FFFFFF">@enter=&quot;enter&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #FFFFFF">@leave=&quot;leave&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">    &gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      //:data-index=&quot;index&quot;   将index传入动画函数中</span></span>
<span class="line"><span style="color: #ABB2BF">      &lt;</span><span style="color: #E06C75">li</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-for</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;(item, index) in showNames&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:key=&quot;item&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:data-index=&quot;index&quot;&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">item</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #FFFFFF">&lt;/li&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;/transition-group&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;/div&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">gsap</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;gsap&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">data</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    return {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">names</span><span style="color: #ABB2BF">: [</span><span style="color: #98C379">&#39;abc&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;cba&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;nba&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;why&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;lilei&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;hmm&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;kobe&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;james&#39;</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">keyword</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">computed:</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">showNames</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//indexOf查找字符串有没有符合要求的，没有返回-1  返回符合要求的</span></span>
<span class="line"><span style="color: #ABB2BF">      return this.names.filter((item) =&gt; item.indexOf(this.keyword) !== -</span><span style="color: #D19A66">1</span><span style="color: #E06C75">)</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">methods:</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">beforeEnter</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">el</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//进入前高度和透明度都没有</span></span>
<span class="line"><span style="color: #ABB2BF">      el.style.</span><span style="color: #E06C75">opacity</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">      el.style.</span><span style="color: #E06C75">height</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">enter</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">el</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">done</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//到哪去:透明度1,高度4.5em,延迟时间 index*0.5</span></span>
<span class="line"><span style="color: #ABB2BF">      gsap.to(</span><span style="color: #E06C75">el</span><span style="color: #ABB2BF">, {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">opacity</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">height</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;1.5em&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        #el.dataset可以得到元素所有data-</span><span style="color: #E06C75">开头的属性</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">delay</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">el</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">dataset</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">index</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0.5</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">onComplete</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">done</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      })</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">leave(el,</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">done)</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">gsap</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">to</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">el</span><span style="color: #ABB2BF">, {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">opacity</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">height</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;0&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">delay</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">el</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">dataset</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">index</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0.5</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">onComplete</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">done</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      })</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">},</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;style</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;less&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">scoped</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">/* 样式 */</span></span>
<span class="line"><span style="color: #ABB2BF">#css样式太生硬了  不用</span></span>
<span class="line"><span style="color: #ABB2BF">.Xiao-enter-from,</span></span>
<span class="line"><span style="color: #ABB2BF">.Xiao-leave-to </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">opacity</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">.Xiao-enter-active,</span></span>
<span class="line"><span style="color: #ABB2BF">.Xiao-leave-active </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">transition</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">opacity</span><span style="color: #ABB2BF"> 1</span><span style="color: #E06C75">s</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">ease</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">style</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="setup" tabindex="-1"><a class="header-anchor" href="#setup" aria-hidden="true">#</a> setup</h2>
<h3 id="_1、基础-context" tabindex="-1"><a class="header-anchor" href="#_1、基础-context" aria-hidden="true">#</a> 1、基础(context)</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">   </span><span style="color: #7F848E; font-style: italic">/**</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">   *  参数一:props父组件传递过来的属性</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">   *  setup里面不能写this</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">   *  参数二:context也可以解构出来{emit,attrs,slots}</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">   *  如果不解构的话，就是context.emit,context.attrs,context.slots</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">   */</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//单纯用emit的话可以这样写:setup(_,{emit});_可以占位</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">props</span><span style="color: #ABB2BF">, { </span><span style="color: #E06C75">emit</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">attrs</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">slots</span><span style="color: #ABB2BF"> }) {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">props</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">message</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">attrs</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">id</span><span style="color: #ABB2BF">)  </span><span style="color: #7F848E; font-style: italic">//attrs：所有的非prop的attribute</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">slots</span><span style="color: #ABB2BF">)   </span><span style="color: #7F848E; font-style: italic">//slots：父组件传递过来的插槽,这个在以渲染函数返回时会有作用</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">emit</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//emit：当我们组件内部需要发出事件时会用到emit（因为我们不能访问this，所以不可以通过 this.$emit发出事件）</span></span>
<span class="line"><span style="color: #ABB2BF">  }</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2、响应式数据-reactive-api" tabindex="-1"><a class="header-anchor" href="#_2、响应式数据-reactive-api" aria-hidden="true">#</a> 2、响应式数据(reactive Api)</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;当前计数:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ state.</span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;addCounter&quot;&gt;+1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//引入reactive</span></span>
<span class="line"><span style="color: #FFFFFF">#reactive</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">API对传入的类型是有限制的，它要求我们必须传入的是一个对象或者数组类型</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">reactive</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//把数据定义为响应式</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">state</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">reactive</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">100</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    })</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #61AFEF">addCounter</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">state</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">counter</span><span style="color: #56B6C2">++</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">    return {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">state</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">addCounter</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3、响应式数据-ref-api" tabindex="-1"><a class="header-anchor" href="#_3、响应式数据-ref-api" aria-hidden="true">#</a> 3、响应式数据(ref Api)</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  //为什么这里不用加.value</span></span>
<span class="line"><span style="color: #ABB2BF">  #这是因为当我们在template中使用ref时，它会自动进行解包</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;当前计数:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;addCounter&quot;&gt;+1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">ref</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//counter变成一个ref的可响应式的引用</span></span>
<span class="line"><span style="color: #ABB2BF">    #</span><span style="color: #E06C75">变成对象了</span></span>
<span class="line"><span style="color: #ABB2BF">    let </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ref</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">100</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//局部函数</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #61AFEF">addCounter</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      #</span><span style="color: #E06C75">它内部的值是在ref的</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">value</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">属性中被维护的</span><span style="color: #ABB2BF">，</span><span style="color: #E5C07B">所以使用时要加</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//这里的counter是ref对象</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">counter</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #56B6C2">++</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">    return {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">addCounter</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4、ref-解包" tabindex="-1"><a class="header-anchor" href="#_4、ref-解包" aria-hidden="true">#</a> 4、ref 解包</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;当前计数:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  //ref解包是浅层解包(info是一个简单的JavaScript对象)</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ info.counter.</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  //如果最外层包裹的是一个reactive可响应式对象,那么ref可以解包</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ reactiveInfo.</span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;addCounter&quot;&gt;+1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">ref</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75">reactive</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ref</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">100</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">info</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">reactiveInfo</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">reactive</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    })</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #61AFEF">addCounter</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">counter</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #56B6C2">++</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">    return {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">info</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">reactiveInfo</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">addCounter</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5、readonly" tabindex="-1"><a class="header-anchor" href="#_5、readonly" aria-hidden="true">#</a> 5、readonly</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">readonly只读不可修改</span><span style="color: #ABB2BF">  </span><span style="color: #E06C75">适合传给子组件</span><span style="color: #ABB2BF">   </span><span style="color: #E06C75">但也要是reactive或者ref响应对象</span><span style="color: #ABB2BF">   </span><span style="color: #E06C75">否则子组件不能同步更新</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;updateState&quot;&gt;readonly&lt;/button&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">reactive</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">readonly</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">ref</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//1、普通对象</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">info</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;Xiao&#39;</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">readonlyInfo</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">readonly</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">info</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//2、响应式对象reactive  传给子组件,子组件才能响应式</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">info</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">reactive</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;Xiao&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    })</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">readonlyInfo</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">readonly</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">info</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//3、响应式对象ref</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">info</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ref</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;Xiao&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">readonlyInfo</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">readonly</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">info</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #61AFEF">updateState</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//1、2使用</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">readonlyInfo</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">name</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;ZiYan&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//3、使用</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">readonlyInfo</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;ZiYan&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">    return {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">updateState</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6、reactive-判断的-api" tabindex="-1"><a class="header-anchor" href="#_6、reactive-判断的-api" aria-hidden="true">#</a> 6、Reactive 判断的 API</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">isProxy</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//检查对象是否是由 reactive 或 readonly创建的 proxy。</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">isReactive</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//检查对象是否是由 reactive创建的响应式代理：</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//如果该代理是 readonly 建的，但包裹了由 reactive 创建的另一个代理，它也会返回 true；</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">isReadonly</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//检查对象是否是由 readonly 创建的只读代理。</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">toRaw</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//返回 reactive 或 readonly 代理的原始对象（不建议保留对原始对象的持久引用。请谨慎使用）。</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">shallowReactive</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//创建一个响应式代理，它跟踪其自身 property 的响应性，但不执行嵌套对象的深层响应式转换 (深层还是原生对象)。</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">shallowReadonly</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//创建一个 proxy，使其自身的 property 为只读，但不执行嵌套对象的深度只读转换（深层还是可读、可写的）。</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7、torefs-和-toref" tabindex="-1"><a class="header-anchor" href="#_7、torefs-和-toref" aria-hidden="true">#</a> 7、toRefs 和 toRef</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">toRefs和toRef里面必须是reactive对象</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ info.</span><span style="color: #E06C75">name</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">-</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ info.</span><span style="color: #E06C75">age</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">-</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;changeAge&quot;&gt;修改年龄&lt;/button&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">reactive</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">toRef</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">toRefs</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">info</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">reactive</span><span style="color: #ABB2BF">({ </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;Xiao&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">16</span><span style="color: #ABB2BF"> })</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//普通解构</span></span>
<span class="line"><span style="color: #ABB2BF">    let { </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF"> } </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">info</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//相当于:</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">let</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&quot;Xiao&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">let</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">16</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//1、toRefs:将reactive对象中的所有属性都转成ref,建立链接</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">let</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF"> } </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">toRefs</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">info</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    #</span><span style="color: #E5C07B">info</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">name与name</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value建立了链接</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75">任何一个修改都会引起另外一个变化</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//相当于</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">let</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ref</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;Xiao&quot;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">let</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ref</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">16</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//2、toRef:将reactive对象中的一个属性转成ref,建立链接</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">let</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF"> } </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">info</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//toRef(对象,key)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">let</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">toRef</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">info</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;age&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">const</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">changeAge</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">info</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">age</span><span style="color: #56B6C2">++</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">age</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #56B6C2">++</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">return</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">info</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">changeAge</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8、ref-其他的-api" tabindex="-1"><a class="header-anchor" href="#_8、ref-其他的-api" aria-hidden="true">#</a> --8、ref 其他的 API</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">unref</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//案例</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">name</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #61AFEF">ref</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;Xiao&quot;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #61AFEF">foo</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">foo</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">bar</span><span style="color: #ABB2BF">){</span></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #61AFEF">unref</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">bar</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//如果我们想要获取一个ref引用中的value，那么也可以通过unref方法：</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//如果参数是一个 ref，则返回内部值，否则返回参数本身；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//这是 val = isRef(val) ? val.value : val 的语法糖函数；</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">isRef</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//判断值是否是一个ref对象。</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">shallowRef</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//创建一个浅层的ref对象；</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">triggerRef</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//手动触发和 shallowRef 相关联的副作用</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">案例</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ info.</span><span style="color: #E06C75">name</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;changeInfo&quot;&gt;修改&lt;/button&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">ref</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">shallowRef</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">triggerRef</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//ref对象默认是深层的，即可以直接修改对象中的属性</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">info</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ref</span><span style="color: #ABB2BF">({ </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;Xiao&#39;</span><span style="color: #ABB2BF"> })</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//shallowRef:创建一个浅层的ref对象，不可以直接修改对象中的属性</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">info</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">shallowRef</span><span style="color: #ABB2BF">({ </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;Xiao&#39;</span><span style="color: #ABB2BF"> })</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #61AFEF">changeInfo</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// info.value = { name: &#39;james&#39; }</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 如果是ref对象，直接修改就行</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 如果是shallowRef创建的ref浅层对象,必须搭配triggerRef使用</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">info</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">value</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">name</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;james&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">triggerRef</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">info</span><span style="color: #ABB2BF">) </span><span style="color: #7F848E; font-style: italic">//副作用:强制性刷新info</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">    return { </span><span style="color: #E06C75">info</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">changeInfo</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9、自定义-ref-防抖函数" tabindex="-1"><a class="header-anchor" href="#_9、自定义-ref-防抖函数" aria-hidden="true">#</a> **9、自定义 ref(防抖函数)</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">customRef</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//创建一个自定义的ref，并对其依赖项跟踪和更新触发进行显示控制：</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//它需要一个工厂函数，该函数接受 track 和 trigger 函数作为参数；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//并且应该返回一个带有 get 和 set 的对象；</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E5C07B">bounce</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">js</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">customRef</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue&#39;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//自定义ref delay:默认延时时间</span></span>
<span class="line"><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">value</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75; font-style: italic">delay</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">300</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">let</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">timer</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">null</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">customRef</span><span style="color: #ABB2BF">((</span><span style="color: #E06C75; font-style: italic">track</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">trigger</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//收集依赖 对其依赖项跟踪</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">track</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">value</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">set</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">newVal</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//如果在1000ms继续输入时,清除原有防抖函数,重新计时</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">clearTimeout</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">timer</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//延时1000ms执行</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">timer</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">setTimeout</span><span style="color: #ABB2BF">(() </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #E06C75">value</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">newVal</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #7F848E; font-style: italic">//依赖更新触发进行显示控制</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #61AFEF">trigger</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        }, </span><span style="color: #E06C75">delay</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  })</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E5C07B">App</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  //这个就是依赖</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">message</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">input</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;text&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-model</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;message&quot;</span><span style="color: #ABB2BF"> /&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">import useRef from &#39;./bounce&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//也可以传一个延时时间进去</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">message</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useRef</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;hello world&#39;</span><span style="color: #ABB2BF">,</span><span style="color: #D19A66">1000</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    return {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">message</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10、computed-计算属性" tabindex="-1"><a class="header-anchor" href="#_10、computed-计算属性" aria-hidden="true">#</a> 10、computed(计算属性)</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">fullName</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;changeName&quot;&gt;修改&lt;/button&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">ref</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">computed</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">firstName</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ref</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;Xiao&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">lastName</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ref</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;ZiYan&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 1、不是响应式</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// const fullName = firstName.value + lastName.value</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    #  方式一：接收一个getter函数，并为 getter 函数返回的值，返回一个不变的 ref 对象；</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 2、计算属性 用法一:传入一个getter函数 computed返回值是一个ref对象</span></span>
<span class="line"><span style="color: #ABB2BF">    #computed value is readonly  指的是fullName不可修改  </span><span style="color: #E06C75">可以通过修改firstName来修改fullName</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// const fullName = computed(() =&gt; firstName.value + lastName.value)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    #  方式二：接收一个具有 get 和 set 的对象，返回一个可变的（可读写）ref 对象；</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 3、计算属性 用法二:传入一个对象  包含getter/setter</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">fullName</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">computed</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">: () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">firstName</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">lastName</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">set</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">newVal</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//将字符串用空格进行切割  切割成数组</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">names</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">newVal</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">split</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39; &#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//给firstName和lastName赋值</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">firstName</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">names</span><span style="color: #ABB2BF">[</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">]</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">lastName</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">names</span><span style="color: #ABB2BF">[</span><span style="color: #D19A66">1</span><span style="color: #ABB2BF">]</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">    })</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #61AFEF">changeName</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 配合计算属性,用法一使用的</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// firstName.value = &#39;Liu&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// 配合计算属性,用法二使用的</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">fullName</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;Liu ZiYan&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">    return { </span><span style="color: #E06C75">fullName</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">changeName</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_11、watcheffect-侦听数据" tabindex="-1"><a class="header-anchor" href="#_11、watcheffect-侦听数据" aria-hidden="true">#</a> 11、watchEffect(侦听数据)</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">watchEffect用于自动收集响应式数据的依赖</span><span style="color: #ABB2BF">  </span><span style="color: #E06C75">拿不到原来的值</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//首先，watchEffect传入的函数会被立即执行一次，并且在执行的过程中会收集依赖；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//其次，只有收集的依赖发生变化时，watchEffect传入的函数才会再次执行</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">-</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;changeName&quot;&gt;修改name&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;changeAge&quot;&gt;修改age&lt;/button&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">ref</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">watchEffect</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ref</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;Xiao&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ref</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">18</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #61AFEF">changeName</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">name</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;XiaoZiYan&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #61AFEF">changeAge</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">age</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #56B6C2">++</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//当大于25岁时,停止侦听</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #C678DD">if</span><span style="color: #ABB2BF"> (</span><span style="color: #E5C07B">age</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">25</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">stop</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">      }</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//默认立即执行一次 onInvalidate是形参  stop是返回值</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">stop</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">watchEffect</span><span style="color: #ABB2BF">((</span><span style="color: #E06C75; font-style: italic">onInvalidate</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//模拟网络请求</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">timer</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">setTimeout</span><span style="color: #ABB2BF">(() </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;网络请求成功~&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">      }, </span><span style="color: #D19A66">2000</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//在这个函数中清除额外的副作用</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">onInvalidate</span><span style="color: #ABB2BF">(() </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//根据name和age发送网络请求 当进行网络请求时，name和age发生改变，取消之前的网络请求</span></span>
<span class="line"><span style="color: #ABB2BF">      	#</span><span style="color: #E5C07B">request</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">cancel</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//模拟网络请求</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #56B6C2">clearTimeout</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">timer</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">      })</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//收集依赖  当依赖发生改变时执行</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;name:&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">name</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;age:&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">age</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    })</span></span>
<span class="line"><span style="color: #ABB2BF">    return { </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">changeName</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">changeAge</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_12、ref" tabindex="-1"><a class="header-anchor" href="#_12、ref" aria-hidden="true">#</a> 12、ref</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">ref</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;title&quot;</span><span style="color: #ABB2BF">&gt;Xiao&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">import </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">ref</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">watchEffect</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> from &#39;vue&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">title</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ref</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">null</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">watchEffect</span><span style="color: #ABB2BF">(</span></span>
<span class="line"><span style="color: #ABB2BF">      () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">log</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">title</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">value</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">      {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//这个是立即执行  所以第一次是null 第二次是正确的值</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// flush:&quot;pre&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//挂载完之后拿   这个第一次就是正确的值</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">flush</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;post&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      }</span></span>
<span class="line"><span style="color: #ABB2BF">    )</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">return</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">title</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_13、watch-的使用" tabindex="-1"><a class="header-anchor" href="#_13、watch-的使用" aria-hidden="true">#</a> 13、watch 的使用</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">watch允许我们</span><span style="color: #ABB2BF">：</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//	懒执行副作用（第一次不会直接执行）</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//    访问侦听状态变化前后的值</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">watch侦听函数的数据源有两种类型</span><span style="color: #ABB2BF">：</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//	一个getter函数：但是该getter函数必须引用可响应式的对象（比如reactive或者ref）；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//	直接写入一个可响应式的对象，reactive或者ref（比较常用的是ref）</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;change&quot;&gt;修改&lt;/button&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">reactive</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">ref</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">watch</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">info</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">reactive</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;Xiao&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">18</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    })</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//1、侦听watch时,传入一个getter函数  新值、旧值不一样</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">watch</span><span style="color: #ABB2BF">(</span></span>
<span class="line"><span style="color: #ABB2BF">      () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">info</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">name</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      (</span><span style="color: #E06C75">newVal</span><span style="color: #ABB2BF">, oldVal) =&gt; {</span></span>
<span class="line"><span style="color: #ABB2BF">        console.log(</span><span style="color: #98C379">&#39;newVal:&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">newVal</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;oldVal:&#39;</span><span style="color: #ABB2BF">, oldVal)</span></span>
<span class="line"><span style="color: #ABB2BF">      }</span></span>
<span class="line"><span style="color: #ABB2BF">    )</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//2、传入一个可响应式对象:reactive对象/ref对象</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//情况一:reactive对象获取到的newVal和oldVal本身都是reactive对象  值是一样的</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">watch</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">info</span><span style="color: #ABB2BF">, (</span><span style="color: #E06C75; font-style: italic">newVal</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">oldVal</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;newVal:&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">newVal</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;oldVal:&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">oldVal</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    })</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//情况一的修改   返回值为普通的对象   浅层的新值、旧值不一样；深层的都一样</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// watch(()=&gt;({...info}))是简写</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">watch</span><span style="color: #ABB2BF">(</span></span>
<span class="line"><span style="color: #ABB2BF">      () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> { ...</span><span style="color: #E06C75">info</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">      (</span><span style="color: #E06C75; font-style: italic">newVal</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">oldVal</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;newVal:&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">newVal</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;oldVal:&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">oldVal</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">      }</span></span>
<span class="line"><span style="color: #ABB2BF">    )</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//情况二:ref对象获取newVal和oldVal是value值的本身 新值旧值不同</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">const</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ref</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;Xiao&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">watch</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">, (</span><span style="color: #E06C75; font-style: italic">newVal</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">oldVal</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;newVal:&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">newVal</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;oldVal:&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">oldVal</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    })</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">const</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">change</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">info</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">name</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;XiaoZiYan&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">name</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&quot;XiaoZiYan&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">return</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">change</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_14、侦听多个数据源" tabindex="-1"><a class="header-anchor" href="#_14、侦听多个数据源" aria-hidden="true">#</a> 14、侦听多个数据源</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;change&quot;&gt;修改&lt;/button&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">ref</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">reactive</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">watch</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">info</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">reactive</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;Xiao&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">18</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    })</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ref</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;XiaoZiYan&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//侦听多个数据源</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">watch</span><span style="color: #ABB2BF">(</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//将info解构  可以得到普通对象</span></span>
<span class="line"><span style="color: #ABB2BF">      [() </span><span style="color: #56B6C2">=&gt;</span><span style="color: #ABB2BF"> ({ ...</span><span style="color: #E06C75">info</span><span style="color: #ABB2BF"> }), </span><span style="color: #E06C75; font-style: italic">name</span><span style="color: #ABB2BF">],</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//让它们一 一入坑</span></span>
<span class="line"><span style="color: #ABB2BF">      ([</span><span style="color: #E06C75; font-style: italic">newInfo</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">newName</span><span style="color: #ABB2BF">], [</span><span style="color: #E06C75; font-style: italic">oldInfo</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">oldName</span><span style="color: #ABB2BF">]) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">log</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">newInfo</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">oldInfo</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">log</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">newName</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">oldName</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">      }</span></span>
<span class="line"><span style="color: #ABB2BF">    )</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #61AFEF">change</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">info</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">name</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;XiaoZiYan&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">name</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;LiuZiYan&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">    return { </span><span style="color: #E06C75">change</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_15、watch-的深度侦听" tabindex="-1"><a class="header-anchor" href="#_15、watch-的深度侦听" aria-hidden="true">#</a> 15、watch 的深度侦听</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;change&quot;&gt;修改&lt;/button&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">ref</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">reactive</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">watch</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">computed</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">info</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">reactive</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;Xiao&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">18</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">love</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;Liu&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">18</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">    })</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    #计算属性  保留深度监听的旧值 详见010-</span><span style="color: #E06C75">深度侦听</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">infoComputed</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">computed</span><span style="color: #ABB2BF">(() </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">JSON</span><span style="color: #ABB2BF">.</span><span style="color: #56B6C2">parse</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">JSON</span><span style="color: #ABB2BF">.</span><span style="color: #56B6C2">stringify</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">info</span><span style="color: #ABB2BF">)))</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//默认深度侦听 info是reactive对象  infoComputed是普通对象</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//info 新旧值一样  infoComputed新旧值不一样</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//监听infoComputed,浅层、深层的值改变都可以保留旧值</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">watch</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">infoComputed</span><span style="color: #ABB2BF">, (</span><span style="color: #E06C75; font-style: italic">newInfo</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">oldInfo</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;默认的深度监听&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">newInfo</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">oldInfo</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    })</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//自定义深度监听 监听不了计算属性(infoComputed) 监听info是普通对象,但是新旧值一致</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//监听info,浅层的值改变可以保留旧值；深层的值保留不了旧值</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">watch</span><span style="color: #ABB2BF">(</span></span>
<span class="line"><span style="color: #ABB2BF">      #() </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> ({ ...</span><span style="color: #E5C07B">info</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">love</span><span style="color: #ABB2BF"> })  </span><span style="color: #E5C07B">解构出来可以监听深层的值</span></span>
<span class="line"><span style="color: #ABB2BF">      #() </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">info</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">love</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">name</span><span style="color: #ABB2BF">  </span><span style="color: #E5C07B">还可以给一个getter函数</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">指定要监听的某一个值</span></span>
<span class="line"><span style="color: #ABB2BF">      () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> ({ ...</span><span style="color: #E5C07B">info</span><span style="color: #ABB2BF"> }),</span></span>
<span class="line"><span style="color: #ABB2BF">      (</span><span style="color: #E06C75">newInfo</span><span style="color: #ABB2BF">, oldInfo) =&gt; {</span></span>
<span class="line"><span style="color: #ABB2BF">        console.log(</span><span style="color: #98C379">&#39;自定义的深度监听&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">newInfo</span><span style="color: #ABB2BF">, oldInfo)</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">      { </span><span style="color: #E06C75">deep</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">immediate</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">    )</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">const</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">change</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">info</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">love</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">name</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;LiuZhiHui&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">info</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">name</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;XiaoZiYan&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">return</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">change</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_16、生命周期" tabindex="-1"><a class="header-anchor" href="#_16、生命周期" aria-hidden="true">#</a> 16、生命周期</h3>
<p><strong>选项 ApI</strong></p>
<p>beforeCreate、created、beforeMount、mounted、beforeUpdate、updated、beforeUnmount、unmounted、activated、deactivated</p>
<p><strong>组合 API</strong></p>
<p>not needed、not needed、onBeforeMount、onMounted、onBeforeUpdate、onUpdated、onBeforeUnmount、onUnmounted、onActivated、onDeactivated</p>
<p>因为 setup 是围绕 beforeCreate 和 created 生命钩子运行的，所以这两个生命钩子函数被取消了。</p>
<h3 id="_17、provide-与-inject" tabindex="-1"><a class="header-anchor" href="#_17、provide-与-inject" aria-hidden="true">#</a> 17、provide 与 inject</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">provide与readonly结合使用</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75">形成单向数据流</span><span style="color: #ABB2BF">，</span><span style="color: #E06C75">只有在父组件才可以修改值</span><span style="color: #ABB2BF">；</span><span style="color: #E06C75">子组件只能读而不能写</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//App.vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">home</span><span style="color: #ABB2BF">&gt;&lt;/</span><span style="color: #E06C75">home</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  //父组件进行 counter++操作</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;counter++&quot;&gt;App:{{</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">counter</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">}}&lt;/button&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">provide</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">readonly</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">ref</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">Home</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./Home.vue&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">components</span><span style="color: #ABB2BF">: { </span><span style="color: #E06C75">Home</span><span style="color: #ABB2BF"> },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    let </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ref</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">100</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//provide和readonly结合使用比较好  子组件只可读，不可写</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">provide</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;counter&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">readonly</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">counter</span><span style="color: #ABB2BF">))</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    return {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//Home.vue</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;template&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//在子组件展示counter</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;h2&gt;{{</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">counter</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">}}&lt;/h2&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//这里会报警告,因为在proviede设置了readonly仅读</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;counter++&quot;&gt;Home:{{</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">counter</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">}}&lt;/button&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">inject</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//用inject接收provide的值   如果provied没有的话,显示&quot;默认值&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">inject</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;counter&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;默认值&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    return { </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_18、hook-抽取公共代码" tabindex="-1"><a class="header-anchor" href="#_18、hook-抽取公共代码" aria-hidden="true">#</a> 18、hook(抽取公共代码)</h3>
<h4 id="_1、usecounter" tabindex="-1"><a class="header-anchor" href="#_1、usecounter" aria-hidden="true">#</a> 1、useCounter</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//App.vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;counter:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;counter*2:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">dobuleCounter</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;addCounter&quot;&gt;+1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;delCounter&quot;&gt;-1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">useCounter</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./hooks/useCounter&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//推荐这种  逻辑清除</span></span>
<span class="line"><span style="color: #ABB2BF">    const { </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">dobuleCounter</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">addCounter</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">delCounter</span><span style="color: #ABB2BF"> } </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useCounter</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">return</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">dobuleCounter</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">addCounter</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">delCounter</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// return {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//   ...useCounter(),</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//hooks/useCounter</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">computed</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">ref</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">function()</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">const</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ref</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">const</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">dobuleCounter</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">computed</span><span style="color: #ABB2BF">(() </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">counter</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">const</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">addCounter</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">counter</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #56B6C2">++</span></span>
<span class="line"><span style="color: #ABB2BF">  }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">const</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">delCounter</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">counter</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #56B6C2">--</span></span>
<span class="line"><span style="color: #ABB2BF">  }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">return</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">dobuleCounter</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">addCounter</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">delCounter</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2、usetitle" tabindex="-1"><a class="header-anchor" href="#_2、usetitle" aria-hidden="true">#</a> 2、useTitle</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//App.vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">import useTitle from &#39;./hooks/useTitle&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//传入一个默认值</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">titleRef</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useTitle</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;我是默认值&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">setTimeout</span><span style="color: #ABB2BF">(() </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//修改响应式对象</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">titleRef</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue3学习&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">    }, </span><span style="color: #D19A66">3000</span><span style="color: #E06C75">)</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//hooks/useTitle</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">ref</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">watch</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue&#39;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//定义一个默认的title</span></span>
<span class="line"><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">title</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;默认的title&#39;</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//定义一个响应式对象</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">titleRef</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ref</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">title</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//因为是响应式对象  所以引用组件改变的话  这边可以监听到</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">watch</span><span style="color: #ABB2BF">(</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">titleRef</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    (</span><span style="color: #E06C75; font-style: italic">newVal</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//将修改的响应式对象赋值给title</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">document</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">title</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">newVal</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//立即执行一次</span></span>
<span class="line"><span style="color: #ABB2BF">    { </span><span style="color: #E06C75">immediate</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">  )</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//将响应式对象  return出去</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">titleRef</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3、usescroll" tabindex="-1"><a class="header-anchor" href="#_3、usescroll" aria-hidden="true">#</a> 3、useScroll</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//App.vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">p</span><span style="color: #ABB2BF">&gt;&lt;/</span><span style="color: #E06C75">p</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;scroll&quot;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;scroll-x&quot;</span><span style="color: #ABB2BF">&gt;scrollX:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">scrollX</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;scroll-y&quot;</span><span style="color: #ABB2BF">&gt;scrollY:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">scrolly</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">import useScrollPosition from &#39;./hooks/useScrollPosition&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    const { </span><span style="color: #E06C75">scrollX</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">scrolly</span><span style="color: #ABB2BF"> } </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useScrollPosition</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">return</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">scrollX</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">scrolly</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">style</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;less&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">scoped</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">/* 样式 */</span></span>
<span class="line"><span style="color: #ABB2BF">p </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">width</span><span style="color: #ABB2BF">: 3000</span><span style="color: #E06C75">px</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">height</span><span style="color: #ABB2BF">: 5000</span><span style="color: #E06C75">px</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">.scroll </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">position</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">fixed</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">right</span><span style="color: #ABB2BF">: 60</span><span style="color: #E06C75">px</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">bottom</span><span style="color: #ABB2BF">: 30</span><span style="color: #E06C75">px</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">style</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//hooks/useScrollPosition.js</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">ref</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">scrollX</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ref</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">scrolly</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ref</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">document</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">addEventListener</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;scroll&#39;</span><span style="color: #ABB2BF">, () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">scrollX</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">window</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">scrollX</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">toFixed</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">scrolly</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">window</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">scrollY</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">toFixed</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    })</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">scrollX</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">scrolly</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4、usemouse" tabindex="-1"><a class="header-anchor" href="#_4、usemouse" aria-hidden="true">#</a> 4、useMouse</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//App.vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;mouse&quot;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;mouse-x&quot;</span><span style="color: #ABB2BF">&gt;mousex:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">mousex</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;mouse-y&quot;</span><span style="color: #ABB2BF">&gt;mousey:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">mousey</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">import useMouse from &#39;./hooks/useMouse&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    const { </span><span style="color: #E06C75">mousex</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">mousey</span><span style="color: #ABB2BF"> } </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useMouse</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">return</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">mousex</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">mousey</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">style</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;less&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">scoped</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">/* 样式 */</span></span>
<span class="line"><span style="color: #ABB2BF">.mouse </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">position</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">fixed</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">right</span><span style="color: #ABB2BF">: 60</span><span style="color: #E06C75">px</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">bottom</span><span style="color: #ABB2BF">: 30</span><span style="color: #E06C75">px</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">style</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//hooks/useMouse.js</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">ref</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">mousex</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ref</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">mousey</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ref</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E5C07B">document</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">addEventListener</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;mousemove&#39;</span><span style="color: #ABB2BF">, (</span><span style="color: #E06C75; font-style: italic">event</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">mousex</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">event</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">pageX</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">mousey</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">event</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">pageY</span></span>
<span class="line"><span style="color: #ABB2BF">  })</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">mousex</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">mousey</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_5、uselocalstorage" tabindex="-1"><a class="header-anchor" href="#_5、uselocalstorage" aria-hidden="true">#</a> 5、useLocalStorage</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//App.vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">data</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;changeData&quot;&gt;修改data&lt;/button&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">useLocalStorage</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./hooks/useLocalStorage&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//设置localStorage</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">data</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useLocalStorage</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;wife&#39;</span><span style="color: #ABB2BF">, { </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;XiaoZiYan&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">18</span><span style="color: #ABB2BF"> })</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//获取localStorage</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//const data = useLocalStorage(&#39;wife&#39;)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #61AFEF">changeData</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//修改值  响应式数据   useLocalStorage能监听到并作出修改</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">data</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;XiaoZiYan&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">21</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">    return { </span><span style="color: #E06C75">data</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">changeData</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//hooks/useLocalStorage.js</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">ref</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">watch</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">function(key,</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">value)</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//把value设置响应式数据</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">const</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">data</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ref</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">if</span><span style="color: #ABB2BF"> (</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//保存</span></span>
<span class="line"><span style="color: #ABB2BF">    window.localStorage.setItem(</span><span style="color: #E06C75">key</span><span style="color: #ABB2BF">, JSON.stringify(value))</span></span>
<span class="line"><span style="color: #ABB2BF">  } </span><span style="color: #E06C75">else</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//取值</span></span>
<span class="line"><span style="color: #ABB2BF">    data.</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">JSON</span><span style="color: #ABB2BF">.</span><span style="color: #56B6C2">parse</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">window</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">localStorage</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getItem</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">key</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">  }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//因为data是响应式数据  所以当data修改时能监听到 并重新保存</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">watch</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">data</span><span style="color: #ABB2BF">, (</span><span style="color: #E06C75; font-style: italic">newVal</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//保存</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">window</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">localStorage</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setItem</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">key</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">JSON</span><span style="color: #ABB2BF">.</span><span style="color: #56B6C2">stringify</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">newVal</span><span style="color: #ABB2BF">))</span></span>
<span class="line"><span style="color: #ABB2BF">  })</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">return</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">data</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_6、代码的再抽取" tabindex="-1"><a class="header-anchor" href="#_6、代码的再抽取" aria-hidden="true">#</a> 6、代码的再抽取</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">hooks</span><span style="color: #56B6C2">/</span><span style="color: #E5C07B">index</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">js</span><span style="color: #ABB2BF">  </span><span style="color: #E06C75">hooks代码的统一出口</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">useCounter</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./useCounter&#39;</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">useTitle</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./useTitle&#39;</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">useScrollPosition</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./useScrollPosition&#39;</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">useMouse</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./useMouse&#39;</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">useLocalStorage</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./useLocalStorage&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">useCounter</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">useTitle</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">useScrollPosition</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">useMouse</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">useLocalStorage</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E5C07B">App</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">vue</span><span style="color: #ABB2BF">  </span><span style="color: #E5C07B">App</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">vue需要什么就导入什么</span><span style="color: #ABB2BF">  </span><span style="color: #E06C75">让代码更简洁</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> {</span><span style="color: #E06C75">useCounter</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75">useTitle</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75">useScrollPosition</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75">useMouse</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75">useLocalStorage</span><span style="color: #ABB2BF">} </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./hooks/index&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_7、vue3-的顶层写法" tabindex="-1"><a class="header-anchor" href="#_7、vue3-的顶层写法" aria-hidden="true">#</a> 7、vue3 的顶层写法</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//App.vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;当前计数:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;addCounter&quot;&gt;+1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;hello-world</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">message</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;呵呵呵&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@increment=&quot;increment&quot;&gt;&lt;/hello-world&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">#setup</span><span style="color: #ABB2BF">  </span><span style="color: #D19A66; font-style: italic">这个是实验功能</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;script</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">setup</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">import </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">ref</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> from &#39;vue&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">import HelloWorld from &#39;./HelloWorld.vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">const counter = ref(0)</span></span>
<span class="line"><span style="color: #ABB2BF">const addCounter = () =&gt; counter.value++</span></span>
<span class="line"><span style="color: #ABB2BF">const increment = (payload) =&gt; </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E5C07B">counter</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">payload</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">//Home.vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  Hello World</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">message</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;emitEvent&quot;&gt;发射事件&lt;/button&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">setup</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">import </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">defineProps</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> from &#39;vue&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">//默认props</span></span>
<span class="line"><span style="color: #ABB2BF">const props = defineProps(</span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">message</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">type</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">String</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">default</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;hhhh&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #C678DD">}</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">//默认emit</span></span>
<span class="line"><span style="color: #ABB2BF">const emit = defineEmits([&#39;increment&#39;, &#39;decrement&#39;])</span></span>
<span class="line"><span style="color: #ABB2BF">const emitEvent = () =&gt; </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">emit</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;increment&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;100000&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_19、h-函数" tabindex="-1"><a class="header-anchor" href="#_19、h-函数" aria-hidden="true">#</a> 19、h 函数</h3>
<h4 id="_1、简单的-render-函数" tabindex="-1"><a class="header-anchor" href="#_1、简单的-render-函数" aria-hidden="true">#</a> 1、简单的 render 函数</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #61AFEF">h</span><span style="color: #ABB2BF">()</span><span style="color: #E06C75">函数接受三个参数</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//第一个参数:</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//{String | Object | Function } tag</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//一个html标签名  一个组件 一个异步组件 或一个函数式组件</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//必需的</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//&quot;div&quot;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//第二个参数:</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//{object} props</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//与attribute(属性)、prop和事件相对应的对象</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//可选的</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//{}</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//第三个参数</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//{String | Array | Object} children</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//子VNodes,使用`h()构建`</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//或使用字符串获取&quot;文本Vnode&quot;或者有插槽的对象</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//可选的</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//[</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//    &quot;some text&quot;,</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//    h(&quot;h1&quot;,&quot;A HEADLINE&quot;),</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//    h(MyComponent,{</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//        sommeProp:&quot;foobar&quot;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//    })</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//]</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">注意事项</span><span style="color: #ABB2BF">：</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//如果没有props，那么通常可以将children作为第二个参数传入；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//如果会产生歧义，可以将null作为第二个参数传入，将children作为第三个参数传入；</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">import </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">h</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> from &#39;vue&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    return </span><span style="color: #61AFEF">h</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;h2&#39;</span><span style="color: #ABB2BF">, { </span><span style="color: #E06C75">class</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;title&#39;</span><span style="color: #ABB2BF"> }, </span><span style="color: #98C379">&#39;hello render&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2、计数器案例" tabindex="-1"><a class="header-anchor" href="#_2、计数器案例" aria-hidden="true">#</a> 2、计数器案例</h4>
<p><strong>第一种写法</strong></p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">import </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">ref</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">h</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> from &#39;vue&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">// data() {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//   return {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//     counter: 0,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//   }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">// },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ref</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    return { </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  render() </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">return</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">h</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;div&#39;</span><span style="color: #ABB2BF">, { </span><span style="color: #E06C75">class</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;app&#39;</span><span style="color: #ABB2BF"> }, [</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">h</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;h2&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">null</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">`当前计数:</span><span style="color: #C678DD">${</span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">counter</span><span style="color: #C678DD">}</span><span style="color: #98C379">`</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">h</span><span style="color: #ABB2BF">(</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">&#39;button&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        {</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #61AFEF">onClick</span><span style="color: #ABB2BF">: () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">counter</span><span style="color: #56B6C2">++</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        },</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">&#39;+1&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">      ),</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">h</span><span style="color: #ABB2BF">(</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">&#39;button&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        {</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #61AFEF">onClick</span><span style="color: #ABB2BF">: () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">counter</span><span style="color: #56B6C2">--</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        },</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #98C379">&#39;-1&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">      ),</span></span>
<span class="line"><span style="color: #ABB2BF">    ])</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>第二种写法</strong></p>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">import </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">ref</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">h</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> from &#39;vue&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ref</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">return</span><span style="color: #ABB2BF"> () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">return</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">h</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;div&#39;</span><span style="color: #ABB2BF">, { </span><span style="color: #E06C75">class</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;app&#39;</span><span style="color: #ABB2BF"> }, [</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75; font-style: italic">h</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;h2&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">null</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">`当前计数:</span><span style="color: #C678DD">${</span><span style="color: #E5C07B">counter</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #C678DD">}</span><span style="color: #98C379">`</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75; font-style: italic">h</span><span style="color: #ABB2BF">(</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #98C379">&#39;button&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">          {</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E06C75">onClick</span><span style="color: #ABB2BF">: () </span><span style="color: #56B6C2">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">counter</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #56B6C2">++</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">          },</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #98C379">&#39;+1&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">        ),</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75; font-style: italic">h</span><span style="color: #ABB2BF">(</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #98C379">&#39;button&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">          {</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E06C75">onClick</span><span style="color: #ABB2BF">: () </span><span style="color: #56B6C2">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">counter</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #56B6C2">--</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">          },</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #98C379">&#39;-1&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">        ),</span></span>
<span class="line"><span style="color: #ABB2BF">      ])</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3、函数组件与插槽的使用" tabindex="-1"><a class="header-anchor" href="#_3、函数组件与插槽的使用" aria-hidden="true">#</a> 3、函数组件与插槽的使用</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//App.vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">import </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">ref</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">h</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> from &#39;vue&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">import HelloWorld from &#39;./HelloWorld.vue&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    return </span><span style="color: #61AFEF">h</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">HelloWorld</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">null</span><span style="color: #ABB2BF">, {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//这个default是插槽</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">default</span><span style="color: #ABB2BF">:</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//将这个内容传给子组件</span></span>
<span class="line"><span style="color: #ABB2BF">        (</span><span style="color: #E06C75; font-style: italic">props</span><span style="color: #ABB2BF">) </span><span style="color: #56B6C2">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">h</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;span&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">null</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">`app传入到HelloWorld中的内容:</span><span style="color: #C678DD">${</span><span style="color: #E5C07B">props</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">name</span><span style="color: #C678DD">}</span><span style="color: #98C379">`</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">    })</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//HelloWorld.vue组件</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">import </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">h</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> from &#39;vue&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    return </span><span style="color: #61AFEF">h</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;h2&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">null</span><span style="color: #ABB2BF">, [</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75; font-style: italic">h</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;h2&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">null</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;HelloWorld&#39;</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//取到default插槽</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75; font-style: italic">this</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75; font-style: italic">$slots</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75; font-style: italic">default</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//如果有就调用这个函数 (props) =&gt; h(&#39;span&#39;, null, `app传入到HelloWorld中的内容:${props.name}`)</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//执行的时候还可以传参数进去 {name:&quot;XiaoZiYan&quot;}=&gt;props</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//相当于父传子 (props) =&gt; h(&#39;span&#39;, null, `app传入到HelloWorld中的内容:${props.name}`)</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//子再传父 {name:&quot;XiaoZiYan&quot;}=&gt;props  传参进去</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//父再读取值 结果就是return h(&#39;span&#39;, null, `app传入到HelloWorld中的内容:XiaoZiYan`)</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//就是这样 &lt;span&gt;app传入到HelloWorld中的内容:XiaoZiYan&lt;/span&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">        ? </span><span style="color: #E06C75; font-style: italic">this</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75; font-style: italic">$slots</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75; font-style: italic">default</span><span style="color: #ABB2BF">({ </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;XiaoZiYan&#39;</span><span style="color: #ABB2BF"> })</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//如果没有  则显示默认值</span></span>
<span class="line"><span style="color: #ABB2BF">        : </span><span style="color: #E06C75; font-style: italic">h</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;span&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">null</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;我是HelloWorld的默认值&#39;</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">    ])</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_4、jsx" tabindex="-1"><a class="header-anchor" href="#_4、jsx" aria-hidden="true">#</a> 4、jsx</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//App.vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">import Home from &#39;./Home.vue&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">data</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    return {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  render() </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">const</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">increment</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">counter</span><span style="color: #56B6C2">++</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">const</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">decrement</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">counter</span><span style="color: #56B6C2">--</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">return</span><span style="color: #ABB2BF"> (</span></span>
<span class="line"><span style="color: #ABB2BF">      &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">        //单花括号表示</span></span>
<span class="line"><span style="color: #ABB2BF">        &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;当前计数:</span><span style="color: #C678DD">{</span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">counter</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">        &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">onClick</span><span style="color: #56B6C2">=</span><span style="color: #C678DD">{</span><span style="color: #E06C75">increment</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&gt;+1&lt;/</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">        &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">onClick</span><span style="color: #56B6C2">=</span><span style="color: #C678DD">{</span><span style="color: #E06C75">decrement</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&gt;-1&lt;/</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	   //插槽  默认插槽</span></span>
<span class="line"><span style="color: #ABB2BF">	   //1、父传子 default: (props) =&gt; &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #E5C07B">props</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">name</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">        &lt;</span><span style="color: #E5C07B">Home</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #61AFEF">default</span><span style="color: #ABB2BF">: (</span><span style="color: #E06C75; font-style: italic">props</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #E5C07B">props</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">name</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF">&gt; }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E5C07B">Home</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      &lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    )</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//Home.vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">render</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">return</span><span style="color: #ABB2BF"> (</span></span>
<span class="line"><span style="color: #ABB2BF">      &lt;</span><span style="color: #E06C75; font-style: italic">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">        &lt;</span><span style="color: #E06C75; font-style: italic">h2</span><span style="color: #ABB2BF">&gt;</span><span style="color: #E06C75; font-style: italic">HelloWorld</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75; font-style: italic">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//判断是否有默认插槽</span></span>
<span class="line"><span style="color: #ABB2BF">        {</span><span style="color: #E06C75; font-style: italic">this</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75; font-style: italic">$slots</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75; font-style: italic">default</span><span style="color: #ABB2BF"> ? (</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #7F848E; font-style: italic">//有的话就执行  并把{name:&quot;XiaoZiYan&quot;}传进去再执行</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #7F848E; font-style: italic">//2、default: (name:&quot;XiaoZiYan&quot;) =&gt; &lt;button&gt;XiaoZiYan&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #7F848E; font-style: italic">//3、执行default &lt;button&gt;XiaoZiYan&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #E06C75; font-style: italic">this</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75; font-style: italic">$slots</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75; font-style: italic">default</span><span style="color: #ABB2BF">({ </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;XiaoZiYan&#39;</span><span style="color: #ABB2BF"> })</span></span>
<span class="line"><span style="color: #ABB2BF">        ):(</span></span>
<span class="line"><span style="color: #ABB2BF">          &lt;</span><span style="color: #E06C75; font-style: italic">span</span><span style="color: #ABB2BF">&gt;</span><span style="color: #E06C75; font-style: italic">哈哈哈哈</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75; font-style: italic">span</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">        )}</span></span>
<span class="line"><span style="color: #ABB2BF">      &lt;/</span><span style="color: #E06C75; font-style: italic">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    )</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="自定义指令" tabindex="-1"><a class="header-anchor" href="#自定义指令" aria-hidden="true">#</a> 自定义指令</h2>
<h3 id="_1、基本使用" tabindex="-1"><a class="header-anchor" href="#_1、基本使用" aria-hidden="true">#</a> 1、基本使用</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//默认实现  自动获取焦点</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">input</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;text&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">name</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">id</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">ref</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;input&quot;</span><span style="color: #ABB2BF"> /&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">import </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">onMounted</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">ref</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> from &#39;vue&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">input</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ref</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">null</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//挂载完之后</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">onMounted</span><span style="color: #ABB2BF">(() </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">input</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">value</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">focus</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    })</span></span>
<span class="line"><span style="color: #ABB2BF">    return {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">input</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//局部指令</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">directives</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">input</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;text&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-focus</span><span style="color: #ABB2BF"> /&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">directives</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">focus</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//对象中的一个属性  到时候会被执行回调</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">mounted</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">el</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">bindings</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">vnode</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">preVnode</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">el</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">focus</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//全局指令</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//App.vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">input</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;text&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-focus</span><span style="color: #ABB2BF"> /&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//main.js</span></span>
<span class="line"><span style="color: #E5C07B">app</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">directive</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;focus&#39;</span><span style="color: #ABB2BF">, {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//对象中的一个属性  到时候会被执行回调</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">mounted</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">el</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">bindings</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">vnode</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">preVnode</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">el</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">focus</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">})</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2、生命周期" tabindex="-1"><a class="header-anchor" href="#_2、生命周期" aria-hidden="true">#</a> 2、生命周期</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//created：在绑定元素的 attribute 或事件监听器被应用之前调用；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//beforeMount：当指令第一次绑定到元素并且在挂载父组件之前调用；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//mounted：在绑定元素的父组件被挂载后调用；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//beforeUpdate：在更新包含组件的 VNode 之前调用；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//updated：在包含组件的 VNode 及其子组件的 VNode 更新后调用；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//beforeUnmount：在卸载绑定元素的父组件之前调用；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//unmounted：当指令与元素解除绑定且父组件已卸载时，只调用一次</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-if</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;counter &lt; 2&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;increment&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">v-xiao.lazy=&quot;&#39;Xiao&#39;&quot;&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">当前计数:{{</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">counter</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">}}</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;/button&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">ref</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">directives</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">xiao</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//el是元素</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">created</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">el</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">bindings</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;created&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">bindings</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF">)   </span><span style="color: #7F848E; font-style: italic">// Xiao   修饰符</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">bindings</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">modifiers</span><span style="color: #ABB2BF">)   </span><span style="color: #7F848E; font-style: italic">// {lazy: true}  值</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">beforeMount</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;beforeMount&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">mounted</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;mounted&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">beforeUpdate</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;beforeUpdate&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">updated</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;updated&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">beforeUnmount</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;beforeUnmount&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">unmounted</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;unmounted&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">      },</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ref</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #61AFEF">increment</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">counter</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #56B6C2">++</span></span>
<span class="line"><span style="color: #ABB2BF">    return {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">increment</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3、案例-格式化时间" tabindex="-1"><a class="header-anchor" href="#_3、案例-格式化时间" aria-hidden="true">#</a> 3、案例-格式化时间</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//App.vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  //v-format-time自定义指令  &#39;YYYY/MM/DD&#39;是参数</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-format-time</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;&#39;YYYY/MM/DD&#39;&quot;</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">timeStamp</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">timeStamp</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1624452193</span></span>
<span class="line"><span style="color: #ABB2BF">    return { </span><span style="color: #E06C75">timeStamp</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//全局定义指令 main.js</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">registerDireactives</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./direactives&#39;</span></span>
<span class="line"><span style="color: #61AFEF">registerDireactives</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">app</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//  direactives/index.js  定义一个函数  做所有自定义指令的出口</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">registerFormatTime</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./format-time&#39;</span></span>
<span class="line"><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">registerDireactives</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">app</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">registerFormatTime</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">app</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//  direactives/format-time.js  格式化时间的具体函数</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">dayjs</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;dayjs&#39;</span></span>
<span class="line"><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">app</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">  #</span><span style="color: #E06C75">默认参数</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">这里有问题</span><span style="color: #ABB2BF">  </span><span style="color: #E06C75">形成了闭包</span></span>
<span class="line"><span style="color: #ABB2BF">  #</span><span style="color: #7F848E; font-style: italic">//let formatString = &#39;YYYY-MM-DD HH:mm:ss&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//注册全局自定义指令</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E5C07B">app</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">directive</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;format-time&#39;</span><span style="color: #ABB2BF">, {</span></span>
<span class="line"><span style="color: #ABB2BF">    #</span><span style="color: #E06C75">默认参数放这</span></span>
<span class="line"><span style="color: #ABB2BF">    #bindings.</span><span style="color: #E06C75">formatString</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;YYYY-MM-DD HH:mm:ss&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//数据挂载放在created</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">created</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">el</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">bindings</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//如果传入了参数</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #C678DD">if</span><span style="color: #ABB2BF"> (</span><span style="color: #E5C07B">bindings</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//formatString=参数</span></span>
<span class="line"><span style="color: #ABB2BF">        #</span><span style="color: #E06C75">修改</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//formatString = bindings.value</span></span>
<span class="line"><span style="color: #ABB2BF">        #</span><span style="color: #E06C75">换成这个</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">bindings</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">formatString</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">bindings</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span></span>
<span class="line"><span style="color: #ABB2BF">      }</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">mounted</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">el</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">bindings</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//获取元素的文本  时间戳</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">text</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">el</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">textContent</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//将字符串变成整数</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #C678DD">let</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">timeStamp</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">parseInt</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">text</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//如果字符串长度为10位  秒</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #C678DD">if</span><span style="color: #ABB2BF"> (</span><span style="color: #E5C07B">text</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">length</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">===</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">// 毫秒转秒</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">timeStamp</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">timeStamp</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">1000</span></span>
<span class="line"><span style="color: #ABB2BF">      }</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//给元素的文本赋值  利用dayjs格式化时间</span></span>
<span class="line"><span style="color: #ABB2BF">      #</span><span style="color: #E06C75">修改</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//el.textContent = dayjs(timeStamp).format(formatString)</span></span>
<span class="line"><span style="color: #ABB2BF">      #</span><span style="color: #E06C75">换成这个</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">el</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">textContent</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">dayjs</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">timeStamp</span><span style="color: #ABB2BF">).</span><span style="color: #61AFEF">format</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">bindings</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">formatString</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  })</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="teleport" tabindex="-1"><a class="header-anchor" href="#teleport" aria-hidden="true">#</a> Teleport</h2>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">to</span><span style="color: #ABB2BF">：</span><span style="color: #E06C75">指定将其中的内容移动到的目标元素</span><span style="color: #ABB2BF">，</span><span style="color: #E06C75">可以使用选择器</span><span style="color: #ABB2BF">；</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">disabled</span><span style="color: #ABB2BF">：</span><span style="color: #E06C75">是否禁用</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">teleport</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">的功能</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//index.html</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">id</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;Xiao&quot;</span><span style="color: #ABB2BF">&gt;&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//App.vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  //会挂载到这里去  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">id</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;Xiao&quot;</span><span style="color: #ABB2BF">&gt;&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">teleport</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">to</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;#Xiao&quot;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;当前计数&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF">&gt;+1&lt;/</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E5C07B">hello-world</span><span style="color: #ABB2BF">&gt;&lt;/</span><span style="color: #E5C07B">hello-world</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;/</span><span style="color: #E06C75">teleport</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">import HelloWorld from &#39;./HelloWorld.vue&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">components</span><span style="color: #ABB2BF">: { </span><span style="color: #E06C75">HelloWorld</span><span style="color: #ABB2BF"> },</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="vue-插件" tabindex="-1"><a class="header-anchor" href="#vue-插件" aria-hidden="true">#</a> Vue 插件</h2>
<h3 id="_1、认识" tabindex="-1"><a class="header-anchor" href="#_1、认识" aria-hidden="true">#</a> 1、认识</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//通常我们向Vue全局添加一些功能时，会采用插件的模式，它有两种编写方式：</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//对象类型：一个对象，但是必须包含一个 install 的函数，该函数会在安装插件时执行；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//函数类型：一个function，这个函数会在安装插件时自动执行；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//插件可以完成的功能没有限制，比如下面的几种都是可以的：</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//添加全局方法或者 property，通过把它们添加到 config.globalProperties 上实现；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//添加全局资源：指令/过滤器/过渡等；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//通过全局 mixin 来添加一些组件选项；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//一个库，提供自己的 API，同时提供上面提到的一个或多个功能</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2、对象类型-插件" tabindex="-1"><a class="header-anchor" href="#_2、对象类型-插件" aria-hidden="true">#</a> 2、对象类型-插件</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//  plugins/plugins_object.js</span></span>
<span class="line"><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">default</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//一定要有install</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">install</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">app</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//一般插件都是  $开头</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E5C07B">app</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">config</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">globalProperties</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">$name</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;Xiao&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//  main.js  注册插件</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">plugins_object</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./plugins/plugins_object&#39;</span></span>
<span class="line"><span style="color: #E5C07B">app</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">use</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">plugins_object</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//  App.vue  使用插件</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">import </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">getCurrentInstance</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> from &#39;vue&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//vue3使用</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//实例</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">instance</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">getCurrentInstance</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    console.log(instance.appContext.config.globalProperties.$name)</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//vue2使用  this.$name即可</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">mounted</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    console.log(this.$name)</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3、函数类型-插件" tabindex="-1"><a class="header-anchor" href="#_3、函数类型-插件" aria-hidden="true">#</a> 3、函数类型-插件</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//  plugins/plugins_function.js</span></span>
<span class="line"><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> (</span><span style="color: #E06C75; font-style: italic">app</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;function app&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">app</span><span style="color: #ABB2BF">);</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//   main.js 注册插件</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">plugins_function</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./plugins/plugins_function&#39;</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #E5C07B">app</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">use</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">plugins_function</span><span style="color: #ABB2BF">);</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="vue-router-前端路由" tabindex="-1"><a class="header-anchor" href="#vue-router-前端路由" aria-hidden="true">#</a> vue-router(前端路由)</h2>
<h3 id="_1、hash-模式" tabindex="-1"><a class="header-anchor" href="#_1、hash-模式" aria-hidden="true">#</a> 1、hash 模式</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">id</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;app&quot;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">a</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">href</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;#/home&quot;</span><span style="color: #ABB2BF">&gt;home&lt;/</span><span style="color: #E06C75">a</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">a</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">href</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;#/about&quot;</span><span style="color: #ABB2BF">&gt;about&lt;/</span><span style="color: #E06C75">a</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;content&quot;</span><span style="color: #ABB2BF">&gt;&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    const content = document.querySelector(&quot;.content&quot;)</span></span>
<span class="line"><span style="color: #ABB2BF">    window.addEventListener(&quot;hashchange&quot;, () =&gt; </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">switch</span><span style="color: #ABB2BF"> (</span><span style="color: #E5C07B">location</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">hash</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">            case </span><span style="color: #98C379">&quot;#/home&quot;</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">content</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">innerHTML</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&quot;home&quot;</span><span style="color: #ABB2BF">; </span><span style="color: #E06C75">break</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E06C75">case</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&quot;#/about&quot;</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">content</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">innerHTML</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&quot;about&quot;</span><span style="color: #ABB2BF">; </span><span style="color: #E06C75">break</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E06C75">default</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">content</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">innerHTML</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&quot;404&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">        }</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2、history-模式" tabindex="-1"><a class="header-anchor" href="#_2、history-模式" aria-hidden="true">#</a> 2、history 模式</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">六种模式</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//replaceState：替换原来的路径；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//pushState：使用新的路径；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//popState：路径的回退；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//go：向前或向后改变路径；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//forward：向前改变路径；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//back：向后改变路径；</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">id</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;app&quot;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">a</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">href</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;/home&quot;</span><span style="color: #ABB2BF">&gt;home&lt;/</span><span style="color: #E06C75">a</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	&lt;</span><span style="color: #E06C75">a</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">href</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;/about&quot;</span><span style="color: #ABB2BF">&gt;about&lt;/</span><span style="color: #E06C75">a</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	&lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;content&quot;</span><span style="color: #ABB2BF">&gt;&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    const content = document.querySelector(&quot;.content&quot;)</span></span>
<span class="line"><span style="color: #ABB2BF">	//替换内容</span></span>
<span class="line"><span style="color: #ABB2BF">    const changeContent = () =&gt; </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">switch</span><span style="color: #ABB2BF"> (</span><span style="color: #E5C07B">location</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">pathname</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">            case </span><span style="color: #98C379">&quot;/home&quot;</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">content</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">innerHTML</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&quot;Home&quot;</span><span style="color: #ABB2BF">; </span><span style="color: #E06C75">break</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E06C75">case</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&quot;/about&quot;</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">content</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">innerHTML</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&quot;About&quot;</span><span style="color: #ABB2BF">; </span><span style="color: #E06C75">break</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E06C75">default</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">content</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">innerHTML</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&quot;default&quot;</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #ABB2BF">        }</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">    const aEls = document.getElementsByTagName(&quot;a&quot;)</span></span>
<span class="line"><span style="color: #ABB2BF">    for (let aEl of aEls) </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">aEl</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">addEventListener</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;click&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">e</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">//阻止a的默认事件</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">e</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">preventDefault</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">//得到a的href</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">href</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">aEl</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getAttribute</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;href&quot;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">//pushState是进栈操作</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">history</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">pushState</span><span style="color: #ABB2BF">({}, </span><span style="color: #98C379">&quot;&quot;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">href</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">//替换 不能前进后退</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">// history.replaceState({}, &quot;&quot;, href)</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">//改变内容</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">changeContent</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">        })</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">	//出栈的时候也要改变内容</span></span>
<span class="line"><span style="color: #ABB2BF">    window.addEventListener(&quot;popstate&quot;, changeContent)</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3、基本使用" tabindex="-1"><a class="header-anchor" href="#_3、基本使用" aria-hidden="true">#</a> 3、基本使用</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//安装</span></span>
<span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">vue</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">router</span><span style="color: #ABB2BF">@</span><span style="color: #D19A66">4</span></span>
<span class="line"><span style="color: #ABB2BF">#   </span><span style="color: #E06C75">router</span><span style="color: #56B6C2">/</span><span style="color: #E5C07B">index</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">js</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//导入路由相关的api</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//创建路由</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">createRouter</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//路由模式 hash history</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">createWebHashHistory</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">createWebHistory</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">} </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue-router&#39;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//导入路由相关页面</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">Home</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;../pages/Home.vue&#39;</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">About</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;../pages/About.vue&#39;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//将路由路径与组件绑定</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">routes</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [</span></span>
<span class="line"><span style="color: #ABB2BF">  #</span><span style="color: #E06C75">重定向</span><span style="color: #ABB2BF">  </span><span style="color: #E06C75">默认home页</span></span>
<span class="line"><span style="color: #ABB2BF">  { </span><span style="color: #E06C75">path</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;/&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">redirect</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;/home&#39;</span><span style="color: #ABB2BF"> },</span></span>
<span class="line"><span style="color: #ABB2BF">  { </span><span style="color: #E06C75">path</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;/home&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">component</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">Home</span><span style="color: #ABB2BF"> },</span></span>
<span class="line"><span style="color: #ABB2BF">  { </span><span style="color: #E06C75">path</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;/about&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">component</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">About</span><span style="color: #ABB2BF"> },</span></span>
<span class="line"><span style="color: #ABB2BF">]</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//创建一个路由对象router</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">router</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">createRouter</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//路由关系</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">routes</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//选择路由模式</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">history</span><span style="color: #ABB2BF">: </span><span style="color: #61AFEF">createWebHashHistory</span><span style="color: #ABB2BF">(),</span></span>
<span class="line"><span style="color: #ABB2BF">})</span></span>
<span class="line"><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">default</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">router</span></span>
<span class="line"><span style="color: #ABB2BF">#   </span><span style="color: #E5C07B">main</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">js</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">router</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./router&#39;</span></span>
<span class="line"><span style="color: #E5C07B">app</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">use</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">router</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">#    </span><span style="color: #E5C07B">App</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    //to跳至哪个组件 router-link内置方法</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E5C07B">router-link</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">to</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;/home&quot;</span><span style="color: #ABB2BF">&gt;首页&lt;/</span><span style="color: #E5C07B">router-link</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E5C07B">router-link</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">to</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;/about&quot;</span><span style="color: #ABB2BF">&gt;关于&lt;/</span><span style="color: #E5C07B">router-link</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    //路由出口:显示组件内容</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E5C07B">router-view</span><span style="color: #ABB2BF">&gt;&lt;/</span><span style="color: #E5C07B">router-view</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4、router-link" tabindex="-1"><a class="header-anchor" href="#_4、router-link" aria-hidden="true">#</a> 4、router-link</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//to属性：</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//是一个字符串，或者是一个对象</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//replace属性：</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//设置 replace 属性的话，当点击时，会调用 router.replace()，而不是 router.push()；</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">active</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">class属性</span><span style="color: #ABB2BF">：</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//设置激活a元素后应用的class，默认是router-link-active</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">可以通过active</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">class将其改名</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E5C07B">router-link</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">to</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;/home&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">active-class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;Xiao-active&quot;</span><span style="color: #ABB2BF">&gt;首页&lt;/</span><span style="color: #E5C07B">router-link</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E5C07B">router-link</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">to</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;/about&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">active-class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;Xiao-active&quot;</span><span style="color: #ABB2BF">&gt;关于&lt;/</span><span style="color: #E5C07B">router-link</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">style</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">type</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;less&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">scoped</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">/* 样式 */</span></span>
<span class="line"><span style="color: #ABB2BF">.router-link-active </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">color</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">skyblue</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">.Xiao-active </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">color</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">red</span><span style="color: #ABB2BF">;</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">style</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//------------------------------------------------------------------------------------------------</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">exact</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">active</span><span style="color: #56B6C2">-</span><span style="color: #E06C75">class属性</span><span style="color: #ABB2BF">：</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//链接精准激活时，应用于渲染的 &lt;a&gt; 的 class，默认是router-link-exact-active</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">区别</span><span style="color: #ABB2BF">  假设路径是http:</span><span style="color: #7F848E; font-style: italic">//localhost:8080/home/message</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//那么 &lt;router-link to=&quot;/home&quot;&gt;首页&lt;/router-link&gt;   这里会加上router-link-active</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//&lt;router-link to=&quot;/home/message&quot;&gt;消息&lt;/router-link&gt;  会加上router-link-active和router-link-exact-active</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5、路由懒加载" tabindex="-1"><a class="header-anchor" href="#_5、路由懒加载" aria-hidden="true">#</a> 5、路由懒加载</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//   index.js</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">createRouter</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">createWebHashHistory</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">createWebHistory</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">} </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue-router&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">把这个给注释了</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// import Home from &#39;../pages/Home.vue&#39;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// import About from &#39;../pages/About.vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">routes</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//路由重定向</span></span>
<span class="line"><span style="color: #ABB2BF">  { </span><span style="color: #E06C75">path</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;/&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">redirect</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;/home&#39;</span><span style="color: #ABB2BF"> },</span></span>
<span class="line"><span style="color: #ABB2BF">  #</span><span style="color: #E06C75">magic</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">comment</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">魔法注释</span><span style="color: #ABB2BF">  </span><span style="color: #E06C75">webpack内容</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">// /* webpackChunkName: &quot;home-chunk&quot; */ :npm run build打包时会用这个名字</span></span>
<span class="line"><span style="color: #ABB2BF">  {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">path</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;/home&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">component</span><span style="color: #ABB2BF">: () </span><span style="color: #C678DD">=&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//利用import路由懒加载</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">import</span><span style="color: #ABB2BF">(</span><span style="color: #7F848E; font-style: italic">/* webpackChunkName: &quot;home-chunk&quot; */</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;../pages/Home.vue&#39;</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">path</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;/about&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">component</span><span style="color: #ABB2BF">: () </span><span style="color: #C678DD">=&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//利用import路由懒加载</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">import</span><span style="color: #ABB2BF">(</span><span style="color: #7F848E; font-style: italic">/* webpackChunkName: &quot;about-chunk&quot; */</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;../pages/About.vue&#39;</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//创建一个路由对象router</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">router</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">createRouter</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">routes</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">history</span><span style="color: #ABB2BF">: </span><span style="color: #61AFEF">createWebHistory</span><span style="color: #ABB2BF">(),</span></span>
<span class="line"><span style="color: #ABB2BF">})</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">default</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">router</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6、路由的其他属性" tabindex="-1"><a class="header-anchor" href="#_6、路由的其他属性" aria-hidden="true">#</a> 6、路由的其他属性</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">routes</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [</span></span>
<span class="line"><span style="color: #ABB2BF">  { </span><span style="color: #E06C75">path</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;/&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">redirect</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;/home&#39;</span><span style="color: #ABB2BF"> },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//magic comment</span></span>
<span class="line"><span style="color: #ABB2BF">  {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">path</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;/home&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//name属性</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;home&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">component</span><span style="color: #ABB2BF">: () </span><span style="color: #C678DD">=&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">import</span><span style="color: #ABB2BF">(</span><span style="color: #7F848E; font-style: italic">/* webpackChunkName: &quot;home-chunk&quot; */</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;../pages/Home.vue&#39;</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//meta属性</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">meta</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;XiaoZiYan&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">];</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7、动态路由基本匹配" tabindex="-1"><a class="header-anchor" href="#_7、动态路由基本匹配" aria-hidden="true">#</a> 7、动态路由基本匹配</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//App.vue</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//因为动态路由匹配  所以路径上要加上username和id</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E5C07B">router-link</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:to=&quot;&#39;/user/&#39;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">+</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">username</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">+</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;/id/&#39;</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">+</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">id&quot;&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">用户</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">&lt;/router-link&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">ref</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">username</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ref</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;XiaoZiYan&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">id</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ref</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;0&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    return { </span><span style="color: #E06C75">username</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">id</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//------------------------------------------------------------------------------------------------</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//index.js</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">createRouter</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">createWebHashHistory</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">createWebHistory</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue-router&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D19A66; font-style: italic">const</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">routes</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">=</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">[</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//默认路由</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">path</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;/&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">redirect</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;/home&#39;</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//magic comment</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">    #</span><span style="color: #E06C75">动态路由</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">path</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;/user/:username/id/:id&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;user&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//分包  分包名字是:user-chunk</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">component</span><span style="color: #ABB2BF">: () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">import</span><span style="color: #ABB2BF">(</span><span style="color: #7F848E; font-style: italic">/* webpackChunkName: &quot;user-chunk&quot; */</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;../pages/User.vue&#39;</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">meta</span><span style="color: #ABB2BF">:{</span></span>
<span class="line"><span style="color: #ABB2BF">         </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">:</span><span style="color: #98C379">&quot;XiaoZiYan&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">]</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//创建一个路由对象router</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">const</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">router</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">=</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">createRouter({</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">routes,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">history:</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">createWebHistory(),</span></span>
<span class="line"><span style="color: #FFFFFF">})</span></span>
<span class="line"></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">router</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8、获取动态路由的值" tabindex="-1"><a class="header-anchor" href="#_8、获取动态路由的值" aria-hidden="true">#</a> 8、获取动态路由的值</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  //这里不用写this</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;userName:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ $route.params.</span><span style="color: #E06C75">username</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;id:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ $route.params.</span><span style="color: #E06C75">id</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">//vue3专门为route写的api</span></span>
<span class="line"><span style="color: #ABB2BF">import </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">useRoute</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> from &#39;vue-router&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//vue2</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">created</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    console.log(this.$route.username)</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//vue3</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//route是一个个的路由对象</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//router是负责路由跳转的</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">route</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useRoute</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    console.log(route.params.username)</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9、404-notfound" tabindex="-1"><a class="header-anchor" href="#_9、404-notfound" aria-hidden="true">#</a> 9、404-NotFound</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//   pages/NotFound.vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;404 NotFound </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ $route.params.</span><span style="color: #E06C75">pathMatch</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//index.js</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">routes</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//这个切记写在最后</span></span>
<span class="line"><span style="color: #ABB2BF">  {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//path: &#39;/:pathMatch(.*)*&#39;,  匹配所有路径,以&quot;/&quot;切割成一个个数组元素存储在($)route.params.pathMatch</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">path</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;/:pathMatch(.*)&#39;</span><span style="color: #ABB2BF">,   </span><span style="color: #7F848E; font-style: italic">//匹配所有路径,直接将字符串存储在($)route.params.pathMatch</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">component</span><span style="color: #ABB2BF">: () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">import</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;../pages/NotFound.vue&#39;</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10、路由的嵌套" tabindex="-1"><a class="header-anchor" href="#_10、路由的嵌套" aria-hidden="true">#</a> 10、路由的嵌套</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//home.vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;home&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	//这里写路径要写全</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E5C07B">router-link</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">to</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;/home/message&quot;</span><span style="color: #ABB2BF">&gt;消息&lt;/</span><span style="color: #E5C07B">router-link</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E5C07B">router-link</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">to</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;/home/good&quot;</span><span style="color: #ABB2BF">&gt;商品&lt;/</span><span style="color: #E5C07B">router-link</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	//路由出口</span></span>
<span class="line"><span style="color: #ABB2BF">	&lt;</span><span style="color: #E5C07B">router-view</span><span style="color: #ABB2BF">&gt;&lt;/</span><span style="color: #E5C07B">router-view</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//   router/index.js</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">routes</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> [</span></span>
<span class="line"><span style="color: #ABB2BF">  { </span><span style="color: #E06C75">path</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;/&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">redirect</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;/home&#39;</span><span style="color: #ABB2BF"> },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//magic comment</span></span>
<span class="line"><span style="color: #ABB2BF">  {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">path</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;/home&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;home&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">component</span><span style="color: #ABB2BF">: () </span><span style="color: #C678DD">=&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">import</span><span style="color: #ABB2BF">(</span><span style="color: #7F848E; font-style: italic">/* webpackChunkName: &quot;home-chunk&quot; */</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;../pages/Home.vue&#39;</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">meta</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;XiaoZiYan&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">children</span><span style="color: #ABB2BF">: [</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//注意:这里的path不要加&quot;/&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">      #</span><span style="color: #E06C75">二级路由重定向</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">要写全</span></span>
<span class="line"><span style="color: #ABB2BF">      { </span><span style="color: #E06C75">path</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&quot;&quot;</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75">redirect</span><span style="color: #ABB2BF">:</span><span style="color: #98C379">&quot;/home/message&quot;</span><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">      { </span><span style="color: #E06C75">path</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;message&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #61AFEF">component</span><span style="color: #ABB2BF">: () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">import</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;../pages/homeMessage.vue&#39;</span><span style="color: #ABB2BF">) },</span></span>
<span class="line"><span style="color: #ABB2BF">      { </span><span style="color: #E06C75">path</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;good&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #61AFEF">component</span><span style="color: #ABB2BF">: () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">import</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;../pages/homeGood.vue&#39;</span><span style="color: #ABB2BF">) },</span></span>
<span class="line"><span style="color: #ABB2BF">    ],</span></span>
<span class="line"><span style="color: #ABB2BF">  }</span></span>
<span class="line"><span style="color: #ABB2BF">]</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_11、代码的页面跳转" tabindex="-1"><a class="header-anchor" href="#_11、代码的页面跳转" aria-hidden="true">#</a> 11、代码的页面跳转</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//App.vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;jumpToAbout&quot;&gt;关于&lt;/button&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//vue提供了hook</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">useRouter</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue-router&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//vue2</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">methods</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">jumpToAbout</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">$router</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">push</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;/about&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//vue3</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">router</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useRouter</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #61AFEF">jumpToAbout</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">router</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">push</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;/about&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">    return { </span><span style="color: #E06C75">jumpToAbout</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_12、router-push-补充" tabindex="-1"><a class="header-anchor" href="#_12、router-push-补充" aria-hidden="true">#</a> 12、router.push 补充</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E5C07B">router</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">push</span><span style="color: #ABB2BF">()</span><span style="color: #E06C75">还可以传对象</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//App.vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;jumpToAbout&quot;&gt;关于&lt;/button&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//vue提供了hook</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">useRouter</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue-router&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//vue2</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">methods</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">jumpToAbout</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">$router</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">push</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;/about&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//vue3</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">router</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useRouter</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #61AFEF">jumpToAbout</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      #</span><span style="color: #E06C75">传入对象</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">query会拼接到</span><span style="color: #ABB2BF">  </span><span style="color: #E06C75">地址上</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">router</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">push</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #E06C75">path</span><span style="color: #ABB2BF">:</span><span style="color: #98C379">&quot;/about&quot;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #E06C75">query</span><span style="color: #ABB2BF">:{</span></span>
<span class="line"><span style="color: #ABB2BF">              </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">:</span><span style="color: #98C379">&quot;XiaoZiYan&quot;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">              </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF">:</span><span style="color: #D19A66">18</span></span>
<span class="line"><span style="color: #ABB2BF">          }</span></span>
<span class="line"><span style="color: #ABB2BF">      })</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//还可以写router.replace(&quot;/about&quot;)  替换页面</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">    return { </span><span style="color: #E06C75">jumpToAbout</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//在about页面获取query的内容</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;template&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;div&gt;name:{{</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">query.name</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">}}&lt;/div&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;div&gt;age:{{</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">query.age</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">}}&lt;/div&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">useRoute</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue-router&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">route</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useRoute</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//获取query的内容</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">query</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">route</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">query</span></span>
<span class="line"><span style="color: #ABB2BF">    return { </span><span style="color: #E06C75">query</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_13、修改-router-link-active" tabindex="-1"><a class="header-anchor" href="#_13、修改-router-link-active" aria-hidden="true">#</a> 13、修改 router-link-active</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//创建一个路由对象router</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">router</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">createRouter</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">routes</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">history</span><span style="color: #ABB2BF">: </span><span style="color: #61AFEF">createWebHistory</span><span style="color: #ABB2BF">(),</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">linkActiveClass</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;Xiao-active&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #7F848E; font-style: italic">//将router-link-active重命名为Xiao-active</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">linkExactActiveClass</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;xiao-exact-active&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #7F848E; font-style: italic">//将router-link-exact-active重命名为xiao-exact-active</span></span>
<span class="line"><span style="color: #ABB2BF">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_14、router-link-的-v-slot" tabindex="-1"><a class="header-anchor" href="#_14、router-link-的-v-slot" aria-hidden="true">#</a> 14、router-link 的 v-slot</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">vue</span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">router4</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">x才有</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    //to跳至哪个路由 props相当于slot插槽的作用域插槽 子组件传上来的</span></span>
<span class="line"><span style="color: #ABB2BF">    //custom表示自定义 router-link不再用a标签包裹 需要自定义跳转函数</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E5C07B">router-link</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">to</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;/home&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-slot</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;props&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">custom</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      //props:href跳转的链接  解析后的 URL</span></span>
<span class="line"><span style="color: #ABB2BF">      &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ props.</span><span style="color: #E06C75">href</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	  //props:route对象  解析后的规范化的route对象</span></span>
<span class="line"><span style="color: #ABB2BF">	  &lt;</span><span style="color: #E06C75">p</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ props.</span><span style="color: #E06C75">route</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">p</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	  //props:navigate导航 触发导航的函数</span></span>
<span class="line"><span style="color: #ABB2BF">      &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;props.navigate&quot;&gt;回到Home&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//props:isActive当前是否处于匹配状态  相当于router-link-active</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #FFFFFF">&lt;span&gt;{{</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">props.isActive</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">}}&lt;/span&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">	  </span><span style="color: #7F848E; font-style: italic">//props:isExactActive当前是否处于精确匹配的状态 相当于router-link-eaxct-active</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #FFFFFF">&lt;span&gt;{{</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">props.isExactActive</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">}}&lt;/span&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;/router-link&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;!--</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">路由出口</span><span style="color: #ABB2BF">:</span><span style="color: #D19A66; font-style: italic">显示内容</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">--&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;router-view&gt;&lt;/router-view&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;/div&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_15、router-view-的-v-slot" tabindex="-1"><a class="header-anchor" href="#_15、router-view-的-v-slot" aria-hidden="true">#</a> 15、router-view 的 v-slot</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">vue</span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">router4</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">x</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E5C07B">router-view</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">v-slot</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;props&quot;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    //动画</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">transition</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">name</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;xiao&quot;</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">        &lt;</span><span style="color: #E5C07B">keep-alive</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">        	 //动态组件</span></span>
<span class="line"><span style="color: #ABB2BF">        	 //参数一、Component：要渲染的组件；</span></span>
<span class="line"><span style="color: #ABB2BF">			//参数二、route：解析出的标准化路由对象</span></span>
<span class="line"><span style="color: #ABB2BF">        	&lt;</span><span style="color: #E06C75">component</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">:is=&quot;props.Component&quot;&gt;&lt;/component&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #FFFFFF">&lt;/keep-alive&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;/transition&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/router-view&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_16、动态添加路由" tabindex="-1"><a class="header-anchor" href="#_16、动态添加路由" aria-hidden="true">#</a> 16、动态添加路由</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//创建一个路由对象router</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">router</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">createRouter</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">routes</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">history</span><span style="color: #ABB2BF">: </span><span style="color: #61AFEF">createWebHistory</span><span style="color: #ABB2BF">(),</span></span>
<span class="line"><span style="color: #ABB2BF">});</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//动态添加路由</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">categoryRoute</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">path</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;/category&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">component</span><span style="color: #ABB2BF">: () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">import</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;../pages/Category.vue&#39;</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">};</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//addRoute：动态添加路由</span></span>
<span class="line"><span style="color: #E5C07B">router</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">addRoute</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">categoryRoute</span><span style="color: #ABB2BF">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//添加二级路由对象  这个home是对应的name</span></span>
<span class="line"><span style="color: #E5C07B">router</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">addRoute</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;home&#39;</span><span style="color: #ABB2BF">, {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">path</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;moment&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;moment&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">component</span><span style="color: #ABB2BF">: () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">import</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;../pages/HomeMoment.vue&#39;</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//这里还可以写children</span></span>
<span class="line"><span style="color: #ABB2BF">});</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_17、动态删除路由" tabindex="-1"><a class="header-anchor" href="#_17、动态删除路由" aria-hidden="true">#</a> 17、动态删除路由</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #E06C75">方式一</span><span style="color: #ABB2BF">：</span><span style="color: #E06C75">添加一个name相同的路由</span><span style="color: #ABB2BF">；</span></span>
<span class="line"><span style="color: #E5C07B">router</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">addRoute</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">path</span><span style="color: #ABB2BF">:</span><span style="color: #98C379">&quot;/about&quot;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">:</span><span style="color: #98C379">&quot;about&quot;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">component</span><span style="color: #ABB2BF">:()</span><span style="color: #C678DD">=&gt;</span><span style="color: #61AFEF">import</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;../pages/About.vue&quot;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">})</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//这将会删除之前已经添加的路由，因为他们具有相同的名字且名字必须是唯一的</span></span>
<span class="line"><span style="color: #E5C07B">router</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">addRoute</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">path</span><span style="color: #ABB2BF">:</span><span style="color: #98C379">&quot;/other&quot;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">:</span><span style="color: #98C379">&quot;about&quot;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">component</span><span style="color: #ABB2BF">:()</span><span style="color: #C678DD">=&gt;</span><span style="color: #61AFEF">import</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;../pages/Home.vue&quot;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">})</span></span>
<span class="line"><span style="color: #E06C75">方式二</span><span style="color: #ABB2BF">：</span><span style="color: #E06C75">通过removeRoute方法</span><span style="color: #ABB2BF">，</span><span style="color: #E06C75">传入路由的名称</span><span style="color: #ABB2BF">；</span></span>
<span class="line"><span style="color: #E5C07B">router</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">addRoute</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">path</span><span style="color: #ABB2BF">:</span><span style="color: #98C379">&quot;/about&quot;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">:</span><span style="color: #98C379">&quot;about&quot;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">component</span><span style="color: #ABB2BF">:()</span><span style="color: #C678DD">=&gt;</span><span style="color: #61AFEF">import</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;../pages/About.vue&quot;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">})</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//删除路由</span></span>
<span class="line"><span style="color: #E5C07B">router</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">removeRoute</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&quot;about&quot;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #E06C75">方式三</span><span style="color: #ABB2BF">：</span><span style="color: #E06C75">通过addRoute方法的返回值回调</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">removeRoute</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">router</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">addRoute</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">routeRecord</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #61AFEF">removeRoute</span><span style="color: #ABB2BF">() </span><span style="color: #7F848E; font-style: italic">//如果存在的话 删除路由</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">路由的其他补充</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//router.hasRoute()：检查路由是否存在。</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//router.getRoutes()：获取一个包含所有路由记录的数组</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_18、路由导航守卫" tabindex="-1"><a class="header-anchor" href="#_18、路由导航守卫" aria-hidden="true">#</a> 18、路由导航守卫</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF"># </span><span style="color: #E06C75">其他路由守卫</span><span style="color: #ABB2BF">  https:</span><span style="color: #7F848E; font-style: italic">//next.router.vuejs.org/zh/guide/advanced/navigation-guards.html</span></span>
<span class="line"><span style="color: #ABB2BF"># </span><span style="color: #E06C75">router</span><span style="color: #56B6C2">/</span><span style="color: #E5C07B">index</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">js</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//to:route对象 即将跳转到的路由对象</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//from:route对象 从哪一个路由对象导航过来的</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">/**</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic"> * 返回值</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic"> *  1、false 不进行导航</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic"> *  2、undefined或者不写返回值:进行默认导航</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic"> *  3、字符串:路径,跳转到对应的路径中</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic"> *  4、对象:router.push({path:&quot;/login&quot;,component:()=&gt;import(&quot;../xxxx.vue&quot;)})</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic"> *</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic"> */</span></span>
<span class="line"><span style="color: #E5C07B">router</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">beforeEach</span><span style="color: #ABB2BF">((</span><span style="color: #E06C75; font-style: italic">to</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">from</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//如果去往的不是登录页面</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">if</span><span style="color: #ABB2BF"> (</span><span style="color: #E5C07B">to</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">path</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">!==</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;/login&#39;</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//获取token</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">token</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">window</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">localStorage</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">getItem</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;token&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//如果没有token 返回登录页面</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">if</span><span style="color: #ABB2BF"> (</span><span style="color: #56B6C2">!</span><span style="color: #E06C75">token</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;/login&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  }</span></span>
<span class="line"><span style="color: #ABB2BF">})</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//login.vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;btnClick&quot;&gt;登录&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;/div&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">useRouter</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue-router&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">router</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useRouter</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #61AFEF">btnClick</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//设置token</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">window</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">localStorage</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">setItem</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;token&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;xiao&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//跳转路由</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">router</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">push</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;/home&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">    return { </span><span style="color: #E06C75">btnClick</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="vuex-状态管理" tabindex="-1"><a class="header-anchor" href="#vuex-状态管理" aria-hidden="true">#</a> vuex 状态管理</h2>
<h3 id="_1、安装-vuex" tabindex="-1"><a class="header-anchor" href="#_1、安装-vuex" aria-hidden="true">#</a> 1、安装 vuex</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">使用前记得去浏览器的扩展程序页面添加vue</span><span style="color: #56B6C2">/</span><span style="color: #E06C75">devtool</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//vuex4.x  需要添加next指定版本</span></span>
<span class="line"><span style="color: #E06C75">npm</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">install</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">vuex</span><span style="color: #ABB2BF">@</span><span style="color: #E06C75">next</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2、state-和-mutations-的基本使用" tabindex="-1"><a class="header-anchor" href="#_2、state-和-mutations-的基本使用" aria-hidden="true">#</a> 2、state 和 mutations 的基本使用</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//   store/index.js</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">createStore</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vuex&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">store</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">createStore</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">state</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">100</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">相当于methods函数</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">mutations</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">increment</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">state</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">state</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">counter</span><span style="color: #56B6C2">++</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">decrement</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">state</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">state</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">counter</span><span style="color: #56B6C2">--</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">})</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">default</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">store</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// main.js</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">store</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./store&#39;</span></span>
<span class="line"><span style="color: #E5C07B">app</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">use</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">store</span><span style="color: #ABB2BF">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// App.vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    //这个$store是app.use(store)注册的 知识属于vue插件 install时添加全局$store</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ $store.state.</span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;increment&quot;&gt;+1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;decrement&quot;&gt;-1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;/div&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">methods</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">increment</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">$store</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">commit</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;increment&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">decrement</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">$store</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">commit</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;decrement&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3、state-在模板中使用" tabindex="-1"><a class="header-anchor" href="#_3、state-在模板中使用" aria-hidden="true">#</a> 3、state 在模板中使用</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ $store.state.</span><span style="color: #E06C75">name</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4、mapstate-在-optionsapi-使用-vue2" tabindex="-1"><a class="header-anchor" href="#_4、mapstate-在-optionsapi-使用-vue2" aria-hidden="true">#</a> 4、mapState 在 optionsAPI 使用(vue2)</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #7F848E; font-style: italic">//利用计算属性</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">computed</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//得到vuex中的counter 并且重命名为sCounter  使用{{sCounter}}</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #61AFEF">sCounter</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">        	</span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">$store</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">state</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">counter</span></span>
<span class="line"><span style="color: #ABB2BF">        },</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">##</span><span style="color: #E06C75">改进</span><span style="color: #ABB2BF">  </span><span style="color: #E06C75">如果vuex中的state很多时</span><span style="color: #ABB2BF">，</span><span style="color: #E06C75">利用computed引入代码太多了</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">所以引入mapState</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">import </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">mapState</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> from &#39;vuex&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//   mapState返回的是一个对象 使用{{counter}}</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//   computed: mapState([&quot;counter&quot;,&quot;age&quot;]),</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">  #</span><span style="color: #E06C75">computed能用</span><span style="color: #ABB2BF">...</span><span style="color: #E06C75">mapState</span><span style="color: #ABB2BF">，</span><span style="color: #E06C75">然后使用说明里面mapState里面的对象是这样的</span><span style="color: #ABB2BF">{ </span><span style="color: #61AFEF">counter</span><span style="color: #ABB2BF">:</span><span style="color: #C678DD">function</span><span style="color: #ABB2BF">(){} }</span></span>
<span class="line"><span style="color: #ABB2BF">  #</span><span style="color: #E06C75">返回的都是函数</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">computed</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    #因为mapState返回是一个对象 所以需要用展开运算符  这个算按需导入吧  数组表示法  使用{{</span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF">}</span><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">    // 使用对象展开运算符将此对象混入到外部对象中</span></span>
<span class="line"><span style="color: #ABB2BF">    // ...mapState([&#39;counter&#39;, &#39;name&#39;, &#39;age&#39;, &#39;height&#39;]),</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    #对象表示法  可以重命名  使用</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{</span><span style="color: #E06C75">sCounter</span><span style="color: #ABB2BF">}</span><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">    ...mapState(</span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">sCounter</span><span style="color: #ABB2BF">: (</span><span style="color: #E06C75; font-style: italic">state</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">state</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">),</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5、state-在-setup-使用-vue3" tabindex="-1"><a class="header-anchor" href="#_5、state-在-setup-使用-vue3" aria-hidden="true">#</a> 5、state 在 setup 使用(vue3)</h3>
<h4 id="_1、基本使用-1" tabindex="-1"><a class="header-anchor" href="#_1、基本使用-1" aria-hidden="true">#</a> 1、基本使用</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">import </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">computed</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> from &#39;vue&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">import </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">useStore</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> from &#39;vuex&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//引入store</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">store</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useStore</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//使用计算属性 得到counter</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">computed</span><span style="color: #ABB2BF">(() </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">store</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">state</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    return {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2、mapstate" tabindex="-1"><a class="header-anchor" href="#_2、mapstate" aria-hidden="true">#</a> 2、mapState</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">封装hook函数</span></span>
<span class="line"><span style="color: #ABB2BF">#    </span><span style="color: #E06C75">hooks</span><span style="color: #56B6C2">/</span><span style="color: #E5C07B">useState</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">js</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">mapState</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">useStore</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vuex&#39;</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">computed</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//mapper可以传入数组或者对象</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//因为mapState可以解析数组与对象  返回值都一样</span></span>
<span class="line"><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useState</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">mapper</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//hook</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">store</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useStore</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//storeStateFns = {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//    counter:function(){}</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//    age:()=&gt;store.state.age</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//}</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//counter-&gt;&gt;function  利用computed(counter)-&gt;&gt;counter  相当于computed((state) =&gt; store.state.counter)</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">storeStateFns</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">mapState</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">mapper</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">storeState</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {}</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//{counter:function,name:function,age:function...}</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E5C07B">Object</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">keys</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">storeStateFns</span><span style="color: #ABB2BF">).</span><span style="color: #61AFEF">forEach</span><span style="color: #ABB2BF">((</span><span style="color: #E06C75; font-style: italic">key</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//storeStateFns[key] = function = (state) =&gt; store.state.counter</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//计算属性读...mapState[&quot;name&quot;]的执行过程其实是:this.$store.state.name</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//这里没有this 所以就是 undefined.$store</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//所以这里利用bind重新绑定this   .bind({$store:store})</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//this.$store = store</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">fn</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">storeStateFns</span><span style="color: #ABB2BF">[</span><span style="color: #E06C75">key</span><span style="color: #ABB2BF">].</span><span style="color: #61AFEF">bind</span><span style="color: #ABB2BF">({ </span><span style="color: #E06C75">$store</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">store</span><span style="color: #ABB2BF"> })</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//storeState = {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//   counter:computed((state) =&gt; store.state.counter) ===&gt;&gt;这是一个ref,是值而不是函数了</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// }</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">storeState</span><span style="color: #ABB2BF">[</span><span style="color: #E06C75">key</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">computed</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">fn</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">  })</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">storeState</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF"># </span><span style="color: #E06C75">使用</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Home</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;home:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;home:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">sCounter</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;home:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">sName</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">//引入hook函数</span></span>
<span class="line"><span style="color: #ABB2BF">import </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">useState</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> from &#39;../hooks/useState&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//传入数组</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">storeState</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useState</span><span style="color: #ABB2BF">([</span><span style="color: #98C379">&#39;counter&#39;</span><span style="color: #ABB2BF">])</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">storeState2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useState</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//传入对象  重命名</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">sCounter</span><span style="color: #ABB2BF">: (</span><span style="color: #E06C75; font-style: italic">state</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">state</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">sName</span><span style="color: #ABB2BF">: (</span><span style="color: #E06C75; font-style: italic">state</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">state</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    })</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//返回使用</span></span>
<span class="line"><span style="color: #ABB2BF">    return {</span></span>
<span class="line"><span style="color: #ABB2BF">      ...</span><span style="color: #E06C75">storeState</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      ...</span><span style="color: #E06C75">storeState2</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_6、getters-的基本使用" tabindex="-1"><a class="header-anchor" href="#_6、getters-的基本使用" aria-hidden="true">#</a> 6、getters 的基本使用</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">// store/index.js</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #61AFEF">getters相当于计算属性</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">某些属性我们可能需要经过变化后来使用</span><span style="color: #ABB2BF">）</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//只能有两个参数 参数一:state 参数二:getters</span></span>
<span class="line"><span style="color: #E06C75">getters</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//使用:this.$store.getters.totalPrice</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">totalPrice</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">state</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">getters</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> (</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">state</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">books</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">reduce</span><span style="color: #ABB2BF">((</span><span style="color: #E06C75; font-style: italic">p</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">c</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">p</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">c</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">price</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">c</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">) </span><span style="color: #56B6C2">*</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">//调用另一个getters  需要在参数二写getters</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">getters</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">currentDiscount</span></span>
<span class="line"><span style="color: #ABB2BF">        )</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">currentDiscount</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">state</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">state</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">discount</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0.9</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">countGreaterThreeN</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">state</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//使用:this.$store.getters.countGreaterThreeN(3)</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//返回的是函数 使用时只需要加()即可 如果要传参数在()中写就可以</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> (</span><span style="color: #E06C75; font-style: italic">n</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">book</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">state</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">books</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">filter</span><span style="color: #ABB2BF">((</span><span style="color: #E06C75; font-style: italic">item</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">item</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">&gt;=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">n</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">book</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">reduce</span><span style="color: #ABB2BF">((</span><span style="color: #E06C75; font-style: italic">p</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">c</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">p</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">c</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">price</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">c</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        }</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">},</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_7、mapgetters-的使用-vue2" tabindex="-1"><a class="header-anchor" href="#_7、mapgetters-的使用-vue2" aria-hidden="true">#</a> 7、mapGetters 的使用(vue2)</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">nameInfo</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">ageInfo</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">hr</span><span style="color: #ABB2BF"> /&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">gNameInfo</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">gAgeInfo</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">import </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">mapGetters</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> from &#39;vuex&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">computed</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">     </span><span style="color: #7F848E; font-style: italic">//传入数组 使用...展开运算符  使用:{{ nameInfo }}</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// ...mapGetters([&#39;nameInfo&#39;, &#39;ageInfo&#39;]),</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//传入对象 为了重命名</span></span>
<span class="line"><span style="color: #ABB2BF">    ...</span><span style="color: #61AFEF">mapGetters</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//重命名  :  原名</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">gNameInfo</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;nameInfo&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">gAgeInfo</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;ageInfo&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }),</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_8、mapgetters-的使用-vue3" tabindex="-1"><a class="header-anchor" href="#_8、mapgetters-的使用-vue3" aria-hidden="true">#</a> 8、mapGetters 的使用(vue3)</h3>
<h4 id="_1、基本使用-2" tabindex="-1"><a class="header-anchor" href="#_1、基本使用-2" aria-hidden="true">#</a> 1、基本使用</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">nameInfo</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">import </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">computed</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> from &#39;vue&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">import </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">useStore</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> from &#39;vuex&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">store</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useStore</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//传统做法:利用计算属性</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">nameInfo</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">computed</span><span style="color: #ABB2BF">(() </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">store</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">getters</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">nameInfo</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    return { </span><span style="color: #E06C75">nameInfo</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2、mapgetters" tabindex="-1"><a class="header-anchor" href="#_2、mapgetters" aria-hidden="true">#</a> 2、mapGetters</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">对40</span><span style="color: #ABB2BF">.5.2</span><span style="color: #E06C75">的优化</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">useMapper</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./useMapper&#39;</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">mapState</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vuex&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useState</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">mapper</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//返回useMapper 将mapState传入进去</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useMapper</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">mapper</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">mapState</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">定义一个useMapper函数</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">hooks</span><span style="color: #56B6C2">/</span><span style="color: #E5C07B">useMapper</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">js</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">useStore</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vuex&#39;</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">computed</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//mapFn：传入的参数 决定是执行 mapState还是mapGetters等...</span></span>
<span class="line"><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useMapper</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">mapper</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">mapFn</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">store</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useStore</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">storeStateFns</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">mapFn</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">mapper</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">storeState</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {}</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E5C07B">Object</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">keys</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">storeStateFns</span><span style="color: #ABB2BF">).</span><span style="color: #61AFEF">forEach</span><span style="color: #ABB2BF">((</span><span style="color: #E06C75; font-style: italic">key</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">fn</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">storeStateFns</span><span style="color: #ABB2BF">[</span><span style="color: #E06C75">key</span><span style="color: #ABB2BF">].</span><span style="color: #61AFEF">bind</span><span style="color: #ABB2BF">({ </span><span style="color: #E06C75">$store</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">store</span><span style="color: #ABB2BF"> })</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">storeState</span><span style="color: #ABB2BF">[</span><span style="color: #E06C75">key</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">computed</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">fn</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">  })</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">storeState</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">hooks</span><span style="color: #56B6C2">/</span><span style="color: #E5C07B">useGetters</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">js</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">useMapper</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./useMapper&#39;</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">mapGetters</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vuex&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useGetters</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">mapper</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useMapper</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">mapper</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">mapGetters</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">#   </span><span style="color: #E5C07B">Home</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">nameInfo</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">ageInfo</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">import </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">useGetters</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> from &#39;../hooks/useGetters&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">getters</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useGetters</span><span style="color: #ABB2BF">([</span><span style="color: #98C379">&#39;nameInfo&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;ageInfo&#39;</span><span style="color: #ABB2BF">])</span></span>
<span class="line"><span style="color: #ABB2BF">    return { ...</span><span style="color: #E06C75">getters</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_9、优化-hooks" tabindex="-1"><a class="header-anchor" href="#_9、优化-hooks" aria-hidden="true">#</a> 9、优化 hooks</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#  </span><span style="color: #E06C75">hooks</span><span style="color: #56B6C2">/</span><span style="color: #E5C07B">index</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">js</span><span style="color: #ABB2BF">  </span><span style="color: #E06C75">作为hooks的统一出口</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">useGetters</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./useGetters&#39;</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">useState</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./useState&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">useGetters</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">useState</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">使用</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//使用时只需这样引用即可</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">useGetters</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;../hooks&#39;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_10、mutation-的基本使用" tabindex="-1"><a class="header-anchor" href="#_10、mutation-的基本使用" aria-hidden="true">#</a> 10、Mutation 的基本使用</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#   </span><span style="color: #E06C75">store</span><span style="color: #56B6C2">/</span><span style="color: #E06C75">mutation</span><span style="color: #56B6C2">-</span><span style="color: #E5C07B">types</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">js</span><span style="color: #ABB2BF">   </span><span style="color: #E06C75">存放常数</span><span style="color: #ABB2BF">  </span><span style="color: #E06C75">谨防写错</span></span>
<span class="line"><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">INCREMENT_N</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;increment_n&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">#  </span><span style="color: #E06C75">store</span><span style="color: #56B6C2">/</span><span style="color: #E5C07B">index</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">js</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">INCREMENT_N</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./mutation-types&#39;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//mutations有两个参数  参数一:state 参数二:payload载荷</span></span>
<span class="line"><span style="color: #ABB2BF">mutations: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">increment</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">state</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">state</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">counter</span><span style="color: #56B6C2">++</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">decrement</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">state</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">state</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">counter</span><span style="color: #56B6C2">--</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//使用INCREMENT_N常数(这个是导入的,谨防写错)  记得用中括号包裹</span></span>
<span class="line"><span style="color: #ABB2BF">    [</span><span style="color: #E5C07B">INCREMENT_N</span><span style="color: #ABB2BF">](</span><span style="color: #E06C75">state</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">payload</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">payload</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">state</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">payload</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">n</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">},</span></span>
<span class="line"><span style="color: #ABB2BF">#   </span><span style="color: #E5C07B">Home</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;当前计数:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ $store.state.</span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">hr</span><span style="color: #ABB2BF"> /&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  //提交函数  处理函数</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;$store.commit(&#39;increment&#39;)&quot;&gt;+1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;$store.commit(&#39;decrement&#39;)&quot;&gt;-1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;addTen&quot;&gt;+10&lt;/button&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//引入 常数</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">INCREMENT_N</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;../store/mutation-types&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">methods</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">addTen</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//1、提交一个参数</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// this.$store.commit(&#39;incrementN&#39;, 10)</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//2、提交一个对象</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// this.$store.commit(&#39;incrementN&#39;, { n: 10, name: &#39;Xiao&#39;, age: 18 })</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//另一种提交风格</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">$store</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">commit</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//使用常数  谨防写错</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">type</span><span style="color: #ABB2BF">: </span><span style="color: #E5C07B">INCREMENT_N</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;Xiao&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">n</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">10</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">18</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      })</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_11、mapmutations-vue2" tabindex="-1"><a class="header-anchor" href="#_11、mapmutations-vue2" aria-hidden="true">#</a> 11、mapMutations(vue2)</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;当前计数:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ $store.state.</span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">hr</span><span style="color: #ABB2BF"> /&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;add&quot;&gt;+1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;decrement&quot;&gt;-1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//注意  这里的INCREMENT_N要换成increment_n(mutation-types这里面赋值的东西)</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;increment_n({</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">n:</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">10</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">})&quot;&gt;+10&lt;/button&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//引入常量</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">INCREMENT_N</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;../store/mutation-types&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">mapMutations</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vuex&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">methods</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//数组写法  使用@click=&quot;increment&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">    ...</span><span style="color: #61AFEF">mapMutations</span><span style="color: #ABB2BF">([</span><span style="color: #98C379">&#39;increment&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;decrement&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">INCREMENT_N</span><span style="color: #ABB2BF">]),</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//对象写法  重命名 使用@click=&quot;add&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">    ...</span><span style="color: #61AFEF">mapMutations</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">add</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;increment&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }),</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_12、mapmutations-vue3" tabindex="-1"><a class="header-anchor" href="#_12、mapmutations-vue3" aria-hidden="true">#</a> 12、mapMutations(vue3)</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;当前计数:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ $store.state.</span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">hr</span><span style="color: #ABB2BF"> /&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;add&quot;&gt;+1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;decrement&quot;&gt;-1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;increment_n({</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">n:</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">10</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">})&quot;&gt;+10&lt;/button&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">INCREMENT_N</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;../store/mutation-types&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">mapMutations</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vuex&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">storeMutations</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">mapMutations</span><span style="color: #ABB2BF">([</span><span style="color: #98C379">&#39;increment&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;decrement&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">INCREMENT_N</span><span style="color: #ABB2BF">])</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">storeMutations2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">mapMutations</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">add</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;increment&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    })</span></span>
<span class="line"><span style="color: #ABB2BF">    return {</span></span>
<span class="line"><span style="color: #ABB2BF">      ...</span><span style="color: #E06C75">storeMutations</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      ...</span><span style="color: #E06C75">storeMutations2</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_13、mutation-总结" tabindex="-1"><a class="header-anchor" href="#_13、mutation-总结" aria-hidden="true">#</a> 13、Mutation 总结</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">为什么mapState和mapGetters要使用hooks函数才能与vue2用法一致</span><span style="color: #ABB2BF">，</span><span style="color: #E06C75">而Mutation不需要hooks函数</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//他们三者返回的都是类似{ counter:function(){}}的对象</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//mapState和mapGetters要得到的是值 而value是函数 所以需要 computed()包裹一下</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//而Mutation本来就是要执行这个函数 @click就相当于counter()执行这个函数</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">为什么有mutation还要引入actions</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//一条重要的原则就是要记住 mutation 必须是同步函数</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//这是因为devtool工具会记录mutation的日记；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//每一条mutation被记录，devtools都需要捕捉到前一状态和后一状态的快照；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//但是在mutation中执行异步操作，就无法追踪到数据的变化；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//所以Vuex的重要原则中要求 mutation必须是同步函数；</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_14、actions-的基本使用" tabindex="-1"><a class="header-anchor" href="#_14、actions-的基本使用" aria-hidden="true">#</a> 14、actions 的基本使用</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//Action提交的是mutation，而不是直接变更状态；</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//Action可以包含任意异步操作</span></span>
<span class="line"><span style="color: #ABB2BF">#  </span><span style="color: #E06C75">store</span><span style="color: #56B6C2">/</span><span style="color: #E5C07B">index</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">js</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">createStore</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vuex&#39;</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">axios</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;axios&#39;</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">store</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">createStore</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">state</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">banners</span><span style="color: #ABB2BF">: []</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">mutations</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">	</span><span style="color: #61AFEF">addBannerData</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">state</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">payload</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//修改state.banners的内容</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">state</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">banners</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">payload</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  }</span></span>
<span class="line"><span style="color: #ABB2BF">  #</span><span style="color: #E06C75">解决异步函数问题</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">xxx</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">vue</span><span style="color: #C678DD">=&gt;</span><span style="color: #56B6C2">&gt;</span><span style="color: #61AFEF">actions</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">axios</span><span style="color: #ABB2BF">)</span><span style="color: #C678DD">=&gt;</span><span style="color: #56B6C2">&gt;</span><span style="color: #61AFEF">mutations</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">commit</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">actions</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 放函数  参数(载荷)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">incrementAction</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">context</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">payload</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//传来的参数</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">payload</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//模仿网络请求  =&gt;&gt;commit提交给increment</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #56B6C2">setTimeout</span><span style="color: #ABB2BF">(() </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">context</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">commit</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;increment&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">      }, </span><span style="color: #D19A66">1000</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//context属性:commit   dispatch  getters   rootGetters  rootState  state</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//可以解构</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">decrementAction</span><span style="color: #ABB2BF">({ </span><span style="color: #E06C75; font-style: italic">commit</span><span style="color: #ABB2BF"> }, </span><span style="color: #E06C75; font-style: italic">payload</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//commit提交非decrement</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">commit</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;decrement&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//参数</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">payload</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">getHomeMultiData</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">context</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//发起axios网络请求</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">axios</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;http://123.207.32.32:8000/home/multidata&#39;</span><span style="color: #ABB2BF">).</span><span style="color: #61AFEF">then</span><span style="color: #ABB2BF">((</span><span style="color: #E06C75; font-style: italic">res</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #7F848E; font-style: italic">//commit提交给addBannerData  然后将数据传给addBannerData去处理</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">context</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">commit</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;addBannerData&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">res</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">data</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">data</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">banner</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">list</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">      })</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">})</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">#   </span><span style="color: #E5C07B">Home</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;当前计数:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ $store.state.</span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">hr</span><span style="color: #ABB2BF"> /&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;increment&quot;&gt;+1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;decrement&quot;&gt;-1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">axios</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;axios&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">methods</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">increment</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//使用actions中的incrementAction  参入参数</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">$store</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">dispatch</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;incrementAction&#39;</span><span style="color: #ABB2BF">, { </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;Xiao&#39;</span><span style="color: #ABB2BF"> })</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">decrement</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">// this.$store.dispatch(&#39;decrementAction&#39;)</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//其他风格  传入对象</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">$store</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">dispatch</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">type</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;decrementAction&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;Xiao&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      })</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">mounted</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    #axios不建议在这里使用  </span><span style="color: #E06C75">axios发起的数据本就应该放在vuex</span></span>
<span class="line"><span style="color: #ABB2BF">    #</span><span style="color: #61AFEF">所以这里倒不如直接提交一个getHomeMultiData</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">actions</span><span style="color: #ABB2BF">)函数 在actions处理异步问题  并保留数据</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// axios.get(&#39;http://123.207.32.32:8000/home/multidata&#39;).then((res) =&gt; {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//   this.$store.commit(&#39;addBannerData&#39;, res.data.data.banner.list)</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// })</span></span>
<span class="line"><span style="color: #ABB2BF">    this.$store.</span><span style="color: #61AFEF">dispatch</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;getHomeMultiData&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_15、mapactions-vue2" tabindex="-1"><a class="header-anchor" href="#_15、mapactions-vue2" aria-hidden="true">#</a> 15、mapActions(vue2)</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ this.$store.state.</span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;incrementAction&quot;&gt;+1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;decrementAction&quot;&gt;-1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;add&quot;&gt;+1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;sub&quot;&gt;-1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;/div&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">mapActions</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vuex&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">methods</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// @click=&quot;incrementAction&quot;  数组</span></span>
<span class="line"><span style="color: #ABB2BF">    ...</span><span style="color: #61AFEF">mapActions</span><span style="color: #ABB2BF">([</span><span style="color: #98C379">&#39;incrementAction&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;decrementAction&#39;</span><span style="color: #ABB2BF">]),</span></span>
<span class="line"><span style="color: #ABB2BF">    ...</span><span style="color: #61AFEF">mapActions</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//@click=&quot;add&quot;  对象  可以重命名</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">add</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;incrementAction&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">sub</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;decrementAction&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }),</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_16、mapactions-vue3" tabindex="-1"><a class="header-anchor" href="#_16、mapactions-vue3" aria-hidden="true">#</a> 16、mapActions(vue3)</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ this.$store.state.</span><span style="color: #E06C75">counter</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;incrementAction&quot;&gt;+1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;decrementAction&quot;&gt;-1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;add&quot;&gt;+1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #FFFFFF">&lt;button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;sub&quot;&gt;-1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;/div&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">mapActions</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vuex&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//数组  @click=&quot;incrementAction&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">actions</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">mapActions</span><span style="color: #ABB2BF">([</span><span style="color: #98C379">&#39;incrementAction&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #98C379">&#39;decrementAction&#39;</span><span style="color: #ABB2BF">])</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//对象 可以重命名  @click=&quot;add&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">actions2</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">mapActions</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">add</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;incrementAction&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">sub</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;decrementAction&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    })</span></span>
<span class="line"><span style="color: #ABB2BF">    return {</span></span>
<span class="line"><span style="color: #ABB2BF">      ...</span><span style="color: #E06C75">actions</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      ...</span><span style="color: #E06C75">actions2</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_17、actions-的其他知识" tabindex="-1"><a class="header-anchor" href="#_17、actions-的其他知识" aria-hidden="true">#</a> 17、actions 的其他知识</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E5C07B">有时候我们在xxx</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">vue提交actions函数发送网络请求</span><span style="color: #ABB2BF">,</span><span style="color: #E06C75">我们想要知道请求的结果</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//Home.vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">import </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">onMounted</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> from &#39;vue&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">import </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">useStore</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> from &#39;vuex&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">export default </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">store</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useStore</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">onMounted</span><span style="color: #ABB2BF">(() </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//接收返回的promise对象</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">const</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">promise</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">store</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">dispatch</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;getHomeMultiData&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">promise</span></span>
<span class="line"><span style="color: #ABB2BF">        .</span><span style="color: #E5C07B">then</span><span style="color: #ABB2BF">((</span><span style="color: #E06C75; font-style: italic">res</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #7F848E; font-style: italic">//成功打印resolve()传过来的数据</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">log</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">res</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        })</span></span>
<span class="line"><span style="color: #ABB2BF">        .</span><span style="color: #E5C07B">catch</span><span style="color: #ABB2BF">((</span><span style="color: #E06C75; font-style: italic">err</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #7F848E; font-style: italic">//失败打印reject()传过来的数据</span></span>
<span class="line"><span style="color: #ABB2BF">          </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">log</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">err</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">        })</span></span>
<span class="line"><span style="color: #ABB2BF">    })</span></span>
<span class="line"><span style="color: #ABB2BF">    return {}</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//   store/index.js</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">axios</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;axios&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">actions:{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">getHomeMultiData</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">context</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//返回一个promise对象</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">new</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">Promise</span><span style="color: #ABB2BF">((</span><span style="color: #E06C75; font-style: italic">resolve</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">reject</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">axios</span></span>
<span class="line"><span style="color: #ABB2BF">          .</span><span style="color: #61AFEF">get</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;http://123.207.32.32:8000/home/multidata&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">          .</span><span style="color: #61AFEF">then</span><span style="color: #ABB2BF">((</span><span style="color: #E06C75; font-style: italic">res</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E5C07B">context</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">commit</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;addBannerData&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #E5C07B">res</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">data</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">data</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">banner</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">list</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">//如果成功的话把这个对象传出去</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">resolve</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">              </span><span style="color: #E06C75">name</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;Xiao&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">              </span><span style="color: #E06C75">age</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">18</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">            })</span></span>
<span class="line"><span style="color: #ABB2BF">          })</span></span>
<span class="line"><span style="color: #ABB2BF">          .</span><span style="color: #61AFEF">catch</span><span style="color: #ABB2BF">((</span><span style="color: #E06C75; font-style: italic">err</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">//失败的话把这个err传出去</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #61AFEF">reject</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">err</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">          })</span></span>
<span class="line"><span style="color: #ABB2BF">      })</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_18、modules-的基本使用" tabindex="-1"><a class="header-anchor" href="#_18、modules-的基本使用" aria-hidden="true">#</a> 18、modules 的基本使用</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">// store/modules/home.js</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">homeModule</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">state</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">homeCounter</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">100</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">getters</span><span style="color: #ABB2BF">: {},</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">mutations</span><span style="color: #ABB2BF">: {},</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">actions</span><span style="color: #ABB2BF">: {},</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">default</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">homeModule</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// store/modules/user.js</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">userModule</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">state</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">userCounter</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">18</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">getters</span><span style="color: #ABB2BF">: {},</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">mutations</span><span style="color: #ABB2BF">: {},</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">actions</span><span style="color: #ABB2BF">: {},</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">default</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">userModule</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">// store/index.js</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">createStore</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vuex&#39;</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">home</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./modules/home&#39;</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">user</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./modules/user&#39;</span></span>
<span class="line"><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">store</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">createStore</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">state</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">rootCounter</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">getters</span><span style="color: #ABB2BF">: {},</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">mutations</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">increment</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">state</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">state</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">rootCounter</span><span style="color: #56B6C2">++</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">actions</span><span style="color: #ABB2BF">: {},</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">modules</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// home:home</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">home</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">user</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">})</span></span>
<span class="line"><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">default</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">store</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//  Home.vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ $store.state.</span><span style="color: #E06C75">rootCounter</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ $store.state.home.</span><span style="color: #E06C75">homeCounter</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ $store.state.user.</span><span style="color: #E06C75">userCounter</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_19、namespaced-命名空间" tabindex="-1"><a class="header-anchor" href="#_19、namespaced-命名空间" aria-hidden="true">#</a> 19、namespaced 命名空间</h3>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#命名空间的重要性:</span><span style="color: #E06C75">使得各个模块的mutations</span><span style="color: #ABB2BF">、</span><span style="color: #E06C75">actions</span><span style="color: #ABB2BF">、</span><span style="color: #E06C75">getters不会弄混</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//  Home.vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;root:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ $store.state.</span><span style="color: #E06C75">rootCounter</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  //必须写上home</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;home:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ $store.state.home.</span><span style="color: #E06C75">homeCounter</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  //必须写上user</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;user:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ $store.state.user.</span><span style="color: #E06C75">userCounter</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  //需要区分是哪个模块的</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;homeIncrement&quot;&gt;Home+1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;homeIncrementAction&quot;&gt;HomeAction+1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;hr</span><span style="color: #ABB2BF"> /&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  //表示是home模块里面getters的dobuleHomeCounter</span></span>
<span class="line"><span style="color: #ABB2BF">  #这个home是在index.js的这里命名的   modules: </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">home</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">user</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;home*2:</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ $store.getters[</span><span style="color: #98C379">&#39;home/dobuleHomeCounter&#39;</span><span style="color: #ABB2BF">]</span><span style="color: #E06C75"> }}&lt;/div&gt;</span></span>
<span class="line"><span style="color: #E06C75">&lt;/template&gt;</span></span>
<span class="line"><span style="color: #E06C75">&lt;script&gt;</span></span>
<span class="line"><span style="color: #E06C75">export default {</span></span>
<span class="line"><span style="color: #E06C75">  methods</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">homeIncrement</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//表示是home模块里面mutations的increment</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">$store</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">commit</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;home/increment&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">homeIncrementAction</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//表示是home模块里面actions的incrementAction</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">this</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">$store</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">dispatch</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;home/incrementAction&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #56B6C2">&lt;/</span><span style="color: #E06C75">script</span><span style="color: #56B6C2">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//  src/store/index.js</span></span>
<span class="line"><span style="color: #E06C75">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">createStore</span><span style="color: #ABB2BF"> } </span><span style="color: #E06C75">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vuex&#39;</span></span>
<span class="line"><span style="color: #E06C75">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">home</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./modules/home&#39;</span></span>
<span class="line"><span style="color: #E06C75">import</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">user</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./modules/user&#39;</span></span>
<span class="line"><span style="color: #E06C75">const</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">store</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">createStore</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">state</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">rootCounter</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">getters</span><span style="color: #ABB2BF">: {},</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">mutations</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">increment</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">state</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">state</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">rootCounter</span><span style="color: #56B6C2">++</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">actions</span><span style="color: #ABB2BF">: {},</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//模块化</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">modules</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// home:home</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">home</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">user</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">})</span></span>
<span class="line"><span style="color: #E06C75">export</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">default</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">store</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//   store/modules/home.js</span></span>
<span class="line"><span style="color: #E06C75">const</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">homeModule</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//命名空间:true</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">namespaced</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">state</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">homeCounter</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">100</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">getters</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">// 参数:state getters rootState  rootGetters</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">dobuleHomeCounter</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">state</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">state</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">homeCounter</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">*</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">2</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">mutations</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">increment</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">state</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">state</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">homeCounter</span><span style="color: #56B6C2">++</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">actions</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//解构commit state dispatch getters rootState rootGetters</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #61AFEF">incrementAction</span><span style="color: #ABB2BF">({ </span><span style="color: #E06C75; font-style: italic">commit</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">dispatch</span><span style="color: #ABB2BF"> }) {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">commit</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;increment&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//对根进行mutations提交  null表示payload(即参数、载荷)</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">commit</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;increment&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">null</span><span style="color: #ABB2BF">, { </span><span style="color: #E06C75">root</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF"> })</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//对根进行actions提交</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">dispatch</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;incrementAction&#39;</span><span style="color: #ABB2BF">, </span><span style="color: #D19A66">null</span><span style="color: #ABB2BF">, { </span><span style="color: #E06C75">root</span><span style="color: #ABB2BF">: </span><span style="color: #D19A66">true</span><span style="color: #ABB2BF"> })</span></span>
<span class="line"><span style="color: #ABB2BF">    },</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"><span style="color: #E06C75">export</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">default</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">homeModule</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_20、module-的辅助函数" tabindex="-1"><a class="header-anchor" href="#_20、module-的辅助函数" aria-hidden="true">#</a> 20、module 的辅助函数</h3>
<h4 id="_1、vue2-用法" tabindex="-1"><a class="header-anchor" href="#_1、vue2-用法" aria-hidden="true">#</a> 1、vue2 用法</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">html部分</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">homeCounter</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">dobuleHomeCounter</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;increment&quot;&gt;Home+1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;incrementAction&quot;&gt;HomeAction+1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">#js部分</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//写法一</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">mapState</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">mapGetters</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">mapMutations</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">mapActions</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vuex&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">computed</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//写法一</span></span>
<span class="line"><span style="color: #ABB2BF">    ...</span><span style="color: #61AFEF">mapState</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">homeCounter</span><span style="color: #ABB2BF">: (</span><span style="color: #E06C75; font-style: italic">state</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">state</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">home</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">homeCounter</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">homeAge</span><span style="color: #ABB2BF">:(</span><span style="color: #E06C75; font-style: italic">state</span><span style="color: #ABB2BF">)</span><span style="color: #C678DD">=&gt;</span><span style="color: #E5C07B">state</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">home</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">homeAge</span></span>
<span class="line"><span style="color: #ABB2BF">    }),</span></span>
<span class="line"><span style="color: #ABB2BF">    ...</span><span style="color: #61AFEF">mapGetters</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">dobuleHomeCounter</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;home/dobuleHomeCounter&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">dobuleHomeAge</span><span style="color: #ABB2BF">:</span><span style="color: #98C379">&quot;home/dobuleHomeAge&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">    }),</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">methods</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//写法一</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//这里还可以传数组  ...mapMutations([&#39;home/increment&#39;,&#39;home/decrement&#39;])</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//==&gt;&gt;  this[&quot;home/increment]()</span></span>
<span class="line"><span style="color: #ABB2BF">    ...</span><span style="color: #61AFEF">mapMutations</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">increment</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;home/increment&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }),</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//这里还可以传数组  ...mapActions([&#39;home/incrementAction&#39;,&#39;home/decrementAction&#39;])</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//==&gt;&gt;  this[&quot;home/incrementAction]()</span></span>
<span class="line"><span style="color: #ABB2BF">    ...</span><span style="color: #61AFEF">mapActions</span><span style="color: #ABB2BF">({</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E06C75">incrementAction</span><span style="color: #ABB2BF">: </span><span style="color: #98C379">&#39;home/incrementAction&#39;</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">    }),</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//写法二</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">mapState</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">mapGetters</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">mapMutations</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">mapActions</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vuex&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">computed</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//写法二</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//还可以写对象 ...mapState(&#39;home&#39;,{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//  homeCounter:(state)=&gt;state.homeCounter,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//  homeAge:(state)=&gt;state.homeCounter</span></span>
<span class="line"><span style="color: #ABB2BF">  	</span><span style="color: #7F848E; font-style: italic">//  })</span></span>
<span class="line"><span style="color: #ABB2BF">    ...</span><span style="color: #61AFEF">mapState</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;home&#39;</span><span style="color: #ABB2BF">, [</span><span style="color: #98C379">&#39;homeCounter&#39;</span><span style="color: #ABB2BF">,</span><span style="color: #98C379">&quot;homeAge&quot;</span><span style="color: #ABB2BF">]),</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//还可以写对象...mapGetters(&quot;home&quot;,{</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//  dobuleHomeCounter: &#39;dobuleHomeCounter&#39;,</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//  dobuleHomeAge:&quot;dobuleHomeAge&quot;</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//}),</span></span>
<span class="line"><span style="color: #ABB2BF">    ...</span><span style="color: #61AFEF">mapGetters</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;home&#39;</span><span style="color: #ABB2BF">, [</span><span style="color: #98C379">&#39;dobuleHomeCounter&#39;</span><span style="color: #ABB2BF">,</span><span style="color: #98C379">&quot;dobuleHomeAge&quot;</span><span style="color: #ABB2BF">]),</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">methods</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//写法二</span></span>
<span class="line"><span style="color: #ABB2BF">    ...</span><span style="color: #61AFEF">mapMutations</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;home&#39;</span><span style="color: #ABB2BF">, [</span><span style="color: #98C379">&#39;increment&#39;</span><span style="color: #ABB2BF">,</span><span style="color: #98C379">&quot;xxx其他&quot;</span><span style="color: #ABB2BF">]),</span></span>
<span class="line"><span style="color: #ABB2BF">    ...</span><span style="color: #61AFEF">mapActions</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;home&#39;</span><span style="color: #ABB2BF">, [</span><span style="color: #98C379">&#39;incrementAction&#39;</span><span style="color: #ABB2BF">]),</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//写法三</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//引入命名空间辅助函数</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">createNamespacedHelpers</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vuex&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">const</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">mapState</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">mapGetters</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">mapMutations</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">mapActions</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">createNamespacedHelpers(&#39;home&#39;)</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">computed</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//写法三</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//可以写成对象 ...mapState({homeCounter:(state)=&gt;state.homeCounter,xxx:(state)=&gt;state.xxx})</span></span>
<span class="line"><span style="color: #ABB2BF">    ...</span><span style="color: #61AFEF">mapState</span><span style="color: #ABB2BF">([</span><span style="color: #98C379">&#39;homeCounter&#39;</span><span style="color: #ABB2BF">]),</span></span>
<span class="line"><span style="color: #ABB2BF">    ...</span><span style="color: #61AFEF">mapGetters</span><span style="color: #ABB2BF">([</span><span style="color: #98C379">&#39;dobuleHomeCounter&#39;</span><span style="color: #ABB2BF">]),</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E06C75">methods</span><span style="color: #ABB2BF">: {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//写法三</span></span>
<span class="line"><span style="color: #ABB2BF">    ...</span><span style="color: #61AFEF">mapMutations</span><span style="color: #ABB2BF">([</span><span style="color: #98C379">&#39;increment&#39;</span><span style="color: #ABB2BF">]),</span></span>
<span class="line"><span style="color: #ABB2BF">    ...</span><span style="color: #61AFEF">mapActions</span><span style="color: #ABB2BF">([</span><span style="color: #98C379">&#39;incrementAction&#39;</span><span style="color: #ABB2BF">]),</span></span>
<span class="line"><span style="color: #ABB2BF">  },</span></span>
<span class="line"><span style="color: #C678DD">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2、对-usestate、usegetters-进行修改" tabindex="-1"><a class="header-anchor" href="#_2、对-usestate、usegetters-进行修改" aria-hidden="true">#</a> 2、对 useState、useGetters 进行修改</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//    hooks/index.js</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">useGetters</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./useGetters&#39;</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">useState</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./useState&#39;</span></span>
<span class="line"><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">useGetters</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">useState</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//    hooks/useMapper.js</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">useStore</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vuex&#39;</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">computed</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue&#39;</span></span>
<span class="line"><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useMapper</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">mapper</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">mapFn</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">store</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useStore</span><span style="color: #ABB2BF">()</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">storeStateFns</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">mapFn</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">mapper</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">storeState</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {}</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #E5C07B">Object</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">keys</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">storeStateFns</span><span style="color: #ABB2BF">).</span><span style="color: #61AFEF">forEach</span><span style="color: #ABB2BF">((</span><span style="color: #E06C75; font-style: italic">key</span><span style="color: #ABB2BF">) </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #C678DD">const</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">fn</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">storeStateFns</span><span style="color: #ABB2BF">[</span><span style="color: #E06C75">key</span><span style="color: #ABB2BF">].</span><span style="color: #61AFEF">bind</span><span style="color: #ABB2BF">({ </span><span style="color: #E06C75">$store</span><span style="color: #ABB2BF">: </span><span style="color: #E06C75">store</span><span style="color: #ABB2BF"> })</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">storeState</span><span style="color: #ABB2BF">[</span><span style="color: #E06C75">key</span><span style="color: #ABB2BF">] </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">computed</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">fn</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">  })</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">storeState</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//     hooks/useState.js</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">useMapper</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./useMapper&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">mapState</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">createNamespacedHelpers</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vuex&#39;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//参数包含了moduleName,即module的名称</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useState</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">moduleName</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">mapper</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//默认是mapState</span></span>
<span class="line"><span style="color: #ABB2BF">  #</span><span style="color: #C678DD">let</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">mapperFn</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">mapState</span></span>
<span class="line"><span style="color: #ABB2BF">  #</span><span style="color: #C678DD">if</span><span style="color: #ABB2BF"> (</span><span style="color: #C678DD">typeof</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">moduleName</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">===</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;string&#39;</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">&amp;&amp;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">moduleName</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">length</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//如果传入的参数包含 moduleName 则需要使用createNamespacedHelpers找到module</span></span>
<span class="line"><span style="color: #ABB2BF">  #  </span><span style="color: #E06C75">mapperFn</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">createNamespacedHelpers</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">moduleName</span><span style="color: #ABB2BF">).</span><span style="color: #E06C75">mapState</span></span>
<span class="line"><span style="color: #ABB2BF">  #}</span><span style="color: #C678DD">else</span><span style="color: #ABB2BF">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//如果传入的参数没有包含moduleName 而是直接传的数组 那么则将数组赋值给mapper</span></span>
<span class="line"><span style="color: #ABB2BF">  #  </span><span style="color: #E06C75">mapper</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">moduleName</span></span>
<span class="line"><span style="color: #ABB2BF">  #}</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useMapper</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">mapper</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">mapperFn</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//     hooks/useGetters.js</span></span>
<span class="line"><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">useMapper</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;./useMapper&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #C678DD">import</span><span style="color: #ABB2BF"> { </span><span style="color: #E06C75">mapGetters</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">createNamespacedHelpers</span><span style="color: #ABB2BF"> } </span><span style="color: #C678DD">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vuex&#39;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//参数包含了moduleName,即module的名称</span></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #C678DD">export</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">function</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useGetters</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75; font-style: italic">moduleName</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75; font-style: italic">mapper</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//默认是mapGetters</span></span>
<span class="line"><span style="color: #ABB2BF">  #</span><span style="color: #C678DD">let</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">mapperFn</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">mapGetters</span></span>
<span class="line"><span style="color: #ABB2BF">  #</span><span style="color: #C678DD">if</span><span style="color: #ABB2BF"> (</span><span style="color: #C678DD">typeof</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">moduleName</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">===</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;string&#39;</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">&amp;&amp;</span><span style="color: #ABB2BF"> </span><span style="color: #E5C07B">moduleName</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">length</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">&gt;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66">0</span><span style="color: #ABB2BF">) {</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//如果传入的参数包含 moduleName 则需要使用createNamespacedHelpers找到module</span></span>
<span class="line"><span style="color: #ABB2BF">  #  </span><span style="color: #E06C75">mapperFn</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">createNamespacedHelpers</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">moduleName</span><span style="color: #ABB2BF">).</span><span style="color: #E06C75">mapGetters</span></span>
<span class="line"><span style="color: #ABB2BF">  #}</span><span style="color: #C678DD">else</span><span style="color: #ABB2BF">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #7F848E; font-style: italic">//如果传入的参数没有包含moduleName 而是直接传的数组 那么则将数组赋值给maper</span></span>
<span class="line"><span style="color: #ABB2BF">  #  </span><span style="color: #E06C75">maper</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">moduleName</span></span>
<span class="line"><span style="color: #ABB2BF">  #}</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">return</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useMapper</span><span style="color: #ABB2BF">(</span><span style="color: #E06C75">mapper</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">mapperFn</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3、vue3-用法" tabindex="-1"><a class="header-anchor" href="#_3、vue3-用法" aria-hidden="true">#</a> 3、vue3 用法</h4>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#    </span><span style="color: #E5C07B">home</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">vue</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">homeCounter</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">dobuleHomeCounter</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;increment&quot;&gt;Home+1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;incrementAction&quot;&gt;HomeAction+1&lt;/button&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">mapActions</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">mapMutations</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vuex&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">useGetters</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">useState</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;../hooks&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #7F848E; font-style: italic">//useState、useGetters修改过</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">state</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useState</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;home&#39;</span><span style="color: #ABB2BF">, [</span><span style="color: #98C379">&#39;homeCounter&#39;</span><span style="color: #ABB2BF">])</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">getters</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">useGetters</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;home&#39;</span><span style="color: #ABB2BF">, [</span><span style="color: #98C379">&#39;dobuleHomeCounter&#39;</span><span style="color: #ABB2BF">])</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">mutations</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">mapMutations</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;home&#39;</span><span style="color: #ABB2BF">, [</span><span style="color: #98C379">&#39;increment&#39;</span><span style="color: #ABB2BF">])</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">actions</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">mapActions</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;home&#39;</span><span style="color: #ABB2BF">, [</span><span style="color: #98C379">&#39;incrementAction&#39;</span><span style="color: #ABB2BF">])</span></span>
<span class="line"><span style="color: #ABB2BF">    return {</span></span>
<span class="line"><span style="color: #ABB2BF">      ...</span><span style="color: #E06C75">state</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      ...</span><span style="color: #E06C75">getters</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      ...</span><span style="color: #E06C75">mutations</span><span style="color: #ABB2BF">,</span></span>
<span class="line"><span style="color: #ABB2BF">      ...</span><span style="color: #E06C75">actions</span><span style="color: #ABB2BF">,    }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="nexttick" tabindex="-1"><a class="header-anchor" href="#nexttick" aria-hidden="true">#</a> nextTick</h2>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">实现原理</span><span style="color: #ABB2BF">  </span><span style="color: #E06C75">宏任务和微任务</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//先执行宏任务 message.value += &#39;哈哈哈哈哈哈哈哈&#39;</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//再是微任务 微任务是先进先出 而nextTick的顺序在生命周期之后  所以是先更新DOM再执行nextTick的内容</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//宏任务和微任务对循环的执行也是有好处的  先执行循环的同步,后再进行DOM的更新 而不是每循环一次就更新一次DOM</span></span>
<span class="line"><span style="color: #ABB2BF">&lt;</span><span style="color: #E06C75">template</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  &lt;</span><span style="color: #E06C75">div</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">class</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;title&quot;</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">ref</span><span style="color: #56B6C2">=</span><span style="color: #98C379">&quot;titleRef&quot;</span><span style="color: #ABB2BF">&gt;</span><span style="color: #C678DD">{</span><span style="color: #ABB2BF">{ </span><span style="color: #E06C75">message</span><span style="color: #ABB2BF"> }</span><span style="color: #C678DD">}</span><span style="color: #ABB2BF">&lt;/</span><span style="color: #E06C75">h2</span><span style="color: #ABB2BF">&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">    &lt;</span><span style="color: #E06C75">button</span><span style="color: #ABB2BF"> </span><span style="color: #FFFFFF">@click=&quot;addMessageContent&quot;&gt;添加内容&lt;/button&gt;</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #FFFFFF">&lt;/div&gt;</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/template&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #FFFFFF">&lt;script&gt;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">import</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span><span style="color: #ABB2BF"> </span><span style="color: #E06C75">nextTick</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">ref</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">}</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">from</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;vue&#39;</span></span>
<span class="line"><span style="color: #D19A66; font-style: italic">export</span><span style="color: #ABB2BF"> </span><span style="color: #D19A66; font-style: italic">default</span><span style="color: #ABB2BF"> </span><span style="color: #C678DD">{</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #61AFEF">setup</span><span style="color: #ABB2BF">() {</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">message</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ref</span><span style="color: #ABB2BF">(</span><span style="color: #98C379">&#39;&#39;</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #E06C75">titleRef</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> </span><span style="color: #61AFEF">ref</span><span style="color: #ABB2BF">(</span><span style="color: #D19A66">null</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">    const </span><span style="color: #61AFEF">addMessageContent</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> () </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #E5C07B">message</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">value</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">+=</span><span style="color: #ABB2BF"> </span><span style="color: #98C379">&#39;哈哈哈哈哈哈哈哈&#39;</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #7F848E; font-style: italic">//更新DOM再得到高度 如果直接拿的话只能拿到上一次的结果</span></span>
<span class="line"><span style="color: #ABB2BF">      </span><span style="color: #61AFEF">nextTick</span><span style="color: #ABB2BF">(() </span><span style="color: #C678DD">=&gt;</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E5C07B">console</span><span style="color: #ABB2BF">.</span><span style="color: #61AFEF">log</span><span style="color: #ABB2BF">(</span><span style="color: #E5C07B">titleRef</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">value</span><span style="color: #ABB2BF">.</span><span style="color: #E06C75">offsetHeight</span><span style="color: #ABB2BF">)</span></span>
<span class="line"><span style="color: #ABB2BF">      })</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">    return { </span><span style="color: #E06C75">message</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">addMessageContent</span><span style="color: #ABB2BF">, </span><span style="color: #E06C75">titleRef</span><span style="color: #ABB2BF"> }</span></span>
<span class="line"><span style="color: #ABB2BF">  </span><span style="color: #C678DD">}</span><span style="color: #FFFFFF">,</span></span>
<span class="line"><span style="color: #FFFFFF">}</span></span>
<span class="line"><span style="color: #FFFFFF">&lt;/script&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="historyapifallback" tabindex="-1"><a class="header-anchor" href="#historyapifallback" aria-hidden="true">#</a> historyApiFallback</h2>
<div class="language-javascript ext-js line-numbers-mode"><pre v-pre class="shiki" style="background-color: #282c34"><code><span class="line"><span style="color: #7F848E; font-style: italic">//  如果网址是localhost:8080/user/Xiao，并且我们没有配置静态资源。如果不对historyApiFallback进行配置,那么刷新的时候将会出现cannot get /user/Xiao(找不到静态资源);如果对对historyApiFallback进行了正确的配置,那么当找不到的时候会自动返回index.html然后重定向到对应的组件</span></span>
<span class="line"></span>
<span class="line"><span style="color: #ABB2BF">#</span><span style="color: #E06C75">historyApiFallback</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//vue默认配置了historyApiFallback,这个知识点在webpack</span></span>
<span class="line"><span style="color: #7F848E; font-style: italic">//如果想手动配置可以在   vue.config.js   编写</span></span>
<span class="line"><span style="color: #E5C07B">module</span><span style="color: #ABB2BF">.</span><span style="color: #E5C07B">exports</span><span style="color: #ABB2BF"> </span><span style="color: #56B6C2">=</span><span style="color: #ABB2BF"> {</span></span>
<span class="line"><span style="color: #ABB2BF">    </span><span style="color: #E06C75">configureWebpack</span><span style="color: #ABB2BF">:{</span></span>
<span class="line"><span style="color: #ABB2BF">        </span><span style="color: #E06C75">devServer</span><span style="color: #ABB2BF">:{</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #7F848E; font-style: italic">//webpack默认为false  vue里面是true</span></span>
<span class="line"><span style="color: #ABB2BF">            </span><span style="color: #E06C75">historyApiFallback</span><span style="color: #ABB2BF">:</span><span style="color: #D19A66">true</span></span>
<span class="line"><span style="color: #ABB2BF">        }</span></span>
<span class="line"><span style="color: #ABB2BF">    }</span></span>
<span class="line"><span style="color: #ABB2BF">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div></template>
